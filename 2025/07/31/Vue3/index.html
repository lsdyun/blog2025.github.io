<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/blog2025.github.io/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog2025.github.io/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog2025.github.io/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog2025.github.io/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog2025.github.io/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"lsdyun.github.io","root":"/blog2025.github.io/","images":"/blog2025.github.io/images","scheme":"Pisces","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/blog2025.github.io/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/blog2025.github.io/js/config.js"></script>

    <meta name="description" content="Vue3一个渐进式框架 安装： 1$ npm install vue@next  创建脚手架 CLI">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue3">
<meta property="og:url" content="https://lsdyun.github.io/blog2025.github.io/2025/07/31/Vue3/index.html">
<meta property="og:site_name" content="记录博客">
<meta property="og:description" content="Vue3一个渐进式框架 安装： 1$ npm install vue@next  创建脚手架 CLI">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-07-31T03:28:48.739Z">
<meta property="article:modified_time" content="2025-05-28T03:34:15.680Z">
<meta property="article:author" content="lsdyun">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lsdyun.github.io/blog2025.github.io/2025/07/31/Vue3/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://lsdyun.github.io/blog2025.github.io/2025/07/31/Vue3/","path":"2025/07/31/Vue3/","title":"Vue3"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Vue3 | 记录博客</title>
  








  <noscript>
    <link rel="stylesheet" href="/blog2025.github.io/css/noscript.css">
  </noscript>
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog2025.github.io/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">记录博客</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/blog2025.github.io/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/blog2025.github.io/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-categories"><a href="/blog2025.github.io/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/blog2025.github.io/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue3"><span class="nav-number">1.</span> <span class="nav-text">Vue3</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E5%BC%80%E5%A7%8B"><span class="nav-number">1.1.</span> <span class="nav-text">一、开始</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%BA%94%E7%94%A8%E5%AE%9E%E4%BE%8B%EF%BC%88createApp%EF%BC%89"><span class="nav-number">1.1.1.</span> <span class="nav-text">创建一个应用实例（createApp）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B9%E7%BB%84%E4%BB%B6%EF%BC%9AApp-vue"><span class="nav-number">1.1.2.</span> <span class="nav-text">根组件：App.vue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B%EF%BC%9A"><span class="nav-number">1.1.3.</span> <span class="nav-text">组件实例：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue3-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="nav-number">1.1.4.</span> <span class="nav-text">Vue3 生命周期钩子函数：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95"><span class="nav-number">1.2.</span> <span class="nav-text">二、模板语法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E6%9C%AC"><span class="nav-number">1.2.1.</span> <span class="nav-text">文本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7Attribute%EF%BC%9Av-bind"><span class="nav-number">1.2.2.</span> <span class="nav-text">属性Attribute：v-bind</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E5%A7%8BHTML%EF%BC%9Av-html"><span class="nav-number">1.2.3.</span> <span class="nav-text">原始HTML：v-html</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E6%95%B0%EF%BC%9Av-on-%E7%9B%91%E5%90%AC-DOM-%E4%BA%8B%E4%BB%B6"><span class="nav-number">1.2.4.</span> <span class="nav-text">参数：v-on 监听 DOM 事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E5%8F%82%E6%95%B0%EF%BC%9A"><span class="nav-number">1.2.5.</span> <span class="nav-text">动态参数：[]</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E6%95%B0%E6%8D%AE%E5%B1%9E%E6%80%A7%E5%92%8C%E6%96%B9%E6%B3%95"><span class="nav-number">1.3.</span> <span class="nav-text">三、数据属性和方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%B1%9E%E6%80%A7%EF%BC%9Adata-property"><span class="nav-number">1.3.1.</span> <span class="nav-text">数据属性：data property</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%EF%BC%9Amethod"><span class="nav-number">1.3.2.</span> <span class="nav-text">方法：method</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E5%92%8C%E4%BE%A6%E5%90%AC%E5%99%A8%EF%BC%9A"><span class="nav-number">1.4.</span> <span class="nav-text">四、计算属性和侦听器：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%EF%BC%9Acomputed"><span class="nav-number">1.4.1.</span> <span class="nav-text">计算属性：computed</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BE%A6%E5%90%AC%E5%99%A8%EF%BC%9Awatch"><span class="nav-number">1.4.2.</span> <span class="nav-text">侦听器：watch</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81class%E4%B8%8Estyle%E7%BB%91%E5%AE%9A%EF%BC%9A"><span class="nav-number">1.5.</span> <span class="nav-text">五、class与style绑定：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93%EF%BC%9Av-if-%E5%92%8C-v-show"><span class="nav-number">1.6.</span> <span class="nav-text">六、条件渲染：v-if 和 v-show</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E5%B7%AE%E5%BC%82"><span class="nav-number">1.6.1.</span> <span class="nav-text">核心差异</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%A7%E8%83%BD%E5%AF%B9%E6%AF%94"><span class="nav-number">1.6.2.</span> <span class="nav-text">性能对比</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%E3%80%81%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93%EF%BC%9Av-for"><span class="nav-number">1.7.</span> <span class="nav-text">七、列表渲染：v-for</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E6%9B%B4%E6%96%B0%EF%BC%9A"><span class="nav-number">1.7.1.</span> <span class="nav-text">数组更新：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%90%AD%E9%85%8Dv-if%EF%BC%9A"><span class="nav-number">1.7.1.1.</span> <span class="nav-text">搭配v-if：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E4%B8%AD%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="nav-number">1.7.1.2.</span> <span class="nav-text">组件中使用：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%E3%80%81%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%EF%BC%9Av-on"><span class="nav-number">1.8.</span> <span class="nav-text">八、事件处理：v-on &#x2F; @</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">1.8.1.</span> <span class="nav-text">事件修饰符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%89%E9%94%AE%EF%BC%88%E9%94%AE%E7%9B%98%EF%BC%89%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">1.8.2.</span> <span class="nav-text">按键（键盘）修饰符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E4%BF%AE%E9%A5%B0%E9%94%AE"><span class="nav-number">1.8.3.</span> <span class="nav-text">系统修饰键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%BC%A0%E6%A0%87%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">1.8.4.</span> <span class="nav-text">鼠标修饰符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B9%9D%E3%80%81%E8%A1%A8%E5%8D%95%EF%BC%9Av-model"><span class="nav-number">1.9.</span> <span class="nav-text">九、表单：v-model</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%EF%BC%9A"><span class="nav-number">1.9.1.</span> <span class="nav-text">文本：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E8%A1%8C%E6%96%87%E6%9C%AC%EF%BC%9A"><span class="nav-number">1.9.2.</span> <span class="nav-text">多行文本：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E9%80%89%E6%A1%86%EF%BC%9A"><span class="nav-number">1.9.3.</span> <span class="nav-text">单选框：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%8D%E9%80%89%E6%A1%86%EF%BC%9A"><span class="nav-number">1.9.4.</span> <span class="nav-text">复选框：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E6%8B%89%E6%A1%86%EF%BC%9A"><span class="nav-number">1.9.5.</span> <span class="nav-text">下拉框：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E9%A5%B0%E7%AC%A6%EF%BC%9A"><span class="nav-number">1.9.6.</span> <span class="nav-text">修饰符：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E3%80%81%E7%BB%84%E4%BB%B6-Components%EF%BC%9A"><span class="nav-number">1.10.</span> <span class="nav-text">十、组件 Components：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A"><span class="nav-number">1.10.1.</span> <span class="nav-text">示例：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E4%BA%A4%E4%BA%92-Props%EF%BC%9A"><span class="nav-number">1.10.2.</span> <span class="nav-text">组件交互 Props：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%91%E5%90%AC%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BA%8B%E4%BB%B6%EF%BC%9A"><span class="nav-number">1.10.3.</span> <span class="nav-text">监听子组件事件：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%92%E6%A7%BD%E5%88%86%E5%8F%91%E5%86%85%E5%AE%B9%EF%BC%9A"><span class="nav-number">1.10.4.</span> <span class="nav-text">插槽分发内容：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6%EF%BC%9A"><span class="nav-number">1.10.5.</span> <span class="nav-text">动态组件：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6%EF%BC%9A"><span class="nav-number">1.10.6.</span> <span class="nav-text">异步组件：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6%EF%BC%9A"><span class="nav-number">1.10.7.</span> <span class="nav-text">组件进阶：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E7%BB%84%E4%BB%B6%E6%B3%A8%E5%86%8C"><span class="nav-number">1.10.7.1.</span> <span class="nav-text">1. 组件注册</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E7%BB%84%E4%BB%B6Props"><span class="nav-number">1.10.7.2.</span> <span class="nav-text">2. 组件Props</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E9%9D%9EProp%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="nav-number">1.10.7.3.</span> <span class="nav-text">3. 非Prop的属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E7%BB%84%E4%BB%B6-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%EF%BC%9A"><span class="nav-number">1.10.7.4.</span> <span class="nav-text">4. 组件-自定义事件：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E6%8F%92%E6%A7%BDslot"><span class="nav-number">1.10.7.5.</span> <span class="nav-text">5.插槽slot</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-%E6%8F%90%E4%BE%9B-provide-%E4%B8%8E%E6%B3%A8%E5%85%A5-inject"><span class="nav-number">1.10.7.6.</span> <span class="nav-text">6. 提供 provide 与注入 inject</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-%E6%A8%A1%E6%9D%BF%E5%BC%95%E7%94%A8%EF%BC%9A"><span class="nav-number">1.10.7.7.</span> <span class="nav-text">7. 模板引用：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E8%BF%87%E6%B8%A1%E4%B8%8E%E5%8A%A8%E7%94%BB"><span class="nav-number">1.11.</span> <span class="nav-text">十一、过渡与动画</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6"><span class="nav-number">1.11.1.</span> <span class="nav-text">核心组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.11.2.</span> <span class="nav-text">基础实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E5%8A%9F%E8%83%BD"><span class="nav-number">1.11.3.</span> <span class="nav-text">高级功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E5%9C%BA%E6%99%AF"><span class="nav-number">1.11.4.</span> <span class="nav-text">特殊场景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="nav-number">1.11.5.</span> <span class="nav-text">最佳实践</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%BC%E5%90%88%E7%A4%BA%E4%BE%8B%EF%BC%88%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%8A%A8%E7%94%BB%EF%BC%89"><span class="nav-number">1.11.6.</span> <span class="nav-text">综合示例（购物车动画）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81Vue3-%E5%93%8D%E5%BA%94%E6%80%A7%EF%BC%88%E5%8F%8A%E6%97%B6%E5%8F%98%E5%8C%96%EF%BC%89"><span class="nav-number">1.12.</span> <span class="nav-text">十二、Vue3 响应性（及时变化）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%EF%BC%9A"><span class="nav-number">1.12.1.</span> <span class="nav-text">响应式系统工作流程：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5%EF%BC%9A"><span class="nav-number">1.12.2.</span> <span class="nav-text">性能优化实践：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B8%E5%9E%8B%E5%9C%BA%E6%99%AF%E7%A4%BA%E4%BE%8B%EF%BC%9A"><span class="nav-number">1.12.3.</span> <span class="nav-text">典型场景示例：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="nav-number">1.12.4.</span> <span class="nav-text">示例代码：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E%EF%BC%9A"><span class="nav-number">1.12.4.1.</span> <span class="nav-text">主要功能说明：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%89%E3%80%81Vue3-%E7%BB%84%E5%90%88%E5%BC%8FAPI%EF%BC%88Composition-API%EF%BC%89"><span class="nav-number">1.13.</span> <span class="nav-text">十三、Vue3 组合式API（Composition API）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="nav-number">1.13.1.</span> <span class="nav-text">核心概念 &lt;script setup&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E5%A4%8D%E7%94%A8%E4%B8%8E%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="nav-number">1.13.2.</span> <span class="nav-text">逻辑复用与模块化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8E%E9%80%89%E9%A1%B9%E5%BC%8F-API-%E5%AF%B9%E6%AF%94"><span class="nav-number">1.13.3.</span> <span class="nav-text">与选项式 API 对比</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E5%BC%8F-API-%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="nav-number">1.13.4.</span> <span class="nav-text">组合式 API 钩子函数：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%89%B9%E7%82%B9%E8%AF%B4%E6%98%8E%EF%BC%9A"><span class="nav-number">1.13.4.1.</span> <span class="nav-text">使用特点说明：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="nav-number">1.13.5.</span> <span class="nav-text">完整示例代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">1.13.6.</span> <span class="nav-text">适用场景</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">1.13.7.</span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81Vue3-%E6%90%AD%E9%85%8D-TypeScript"><span class="nav-number">1.14.</span> <span class="nav-text">十四、Vue3 搭配 TypeScript</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue-config-js"><span class="nav-number">1.14.1.</span> <span class="nav-text">Vue.config.js</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="nav-number">1.14.1.1.</span> <span class="nav-text">项目结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%85%B3%E9%94%AE%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-vue-config-js"><span class="nav-number">1.14.1.2.</span> <span class="nav-text">1. 关键配置文件 (vue.config.js)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-TypeScript-%E9%85%8D%E7%BD%AE-tsconfig-json"><span class="nav-number">1.14.1.3.</span> <span class="nav-text">2. TypeScript 配置 (tsconfig.json)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E%E6%96%87%E4%BB%B6-src-types-user-d-ts"><span class="nav-number">1.14.1.4.</span> <span class="nav-text">3. 类型声明文件 (src&#x2F;types&#x2F;user.d.ts)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E7%BB%84%E5%90%88%E5%BC%8F%E7%BB%84%E4%BB%B6%E7%A4%BA%E4%BE%8B-src-components-UserList-vue"><span class="nav-number">1.14.1.5.</span> <span class="nav-text">4. 组合式组件示例 (src&#x2F;components&#x2F;UserList.vue)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E4%B8%BB%E7%BB%84%E4%BB%B6%E7%A4%BA%E4%BE%8B-src-App-vue"><span class="nav-number">1.14.1.6.</span> <span class="nav-text">5. 主组件示例 (src&#x2F;App.vue)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-%E5%85%A8%E5%B1%80%E7%B1%BB%E5%9E%8B%E6%89%A9%E5%B1%95-src-shims-vue-d-ts"><span class="nav-number">1.14.1.7.</span> <span class="nav-text">6. 全局类型扩展 (src&#x2F;shims-vue.d.ts)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AF%B4%E6%98%8E"><span class="nav-number">1.14.1.8.</span> <span class="nav-text">关键知识点说明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E5%87%86%E5%A4%87"><span class="nav-number">1.14.1.9.</span> <span class="nav-text">运行准备</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE"><span class="nav-number">1.14.1.10.</span> <span class="nav-text">最佳实践建议</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vite-config-js"><span class="nav-number">1.14.2.</span> <span class="nav-text">vite.config.js</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-Vue3-TypeScript-%E9%A1%B9%E7%9B%AE"><span class="nav-number">1.14.2.1.</span> <span class="nav-text">创建 Vue3 + TypeScript 项目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E8%AF%B4%E6%98%8E"><span class="nav-number">1.14.2.2.</span> <span class="nav-text">项目结构说明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="nav-number">1.14.2.3.</span> <span class="nav-text">核心知识点示例代码</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E7%BB%84%E4%BB%B6-Props-%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E-HelloWorld-vue"><span class="nav-number">1.14.2.3.1.</span> <span class="nav-text">1. 组件 Props 类型声明 (HelloWorld.vue)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E7%BB%84%E5%90%88%E5%BC%8F-API-%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E-App-vue"><span class="nav-number">1.14.2.3.2.</span> <span class="nav-text">2. 组合式 API + 类型声明 (App.vue)</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AF%B4%E6%98%8E-1"><span class="nav-number">1.14.2.4.</span> <span class="nav-text">关键知识点说明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BB%BA%E8%AE%AE"><span class="nav-number">1.14.2.5.</span> <span class="nav-text">建议</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%BA%94%E3%80%81%E8%B7%AF%E7%94%B1-Router"><span class="nav-number">1.15.</span> <span class="nav-text">十五、路由 Router</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="nav-number">1.15.1.</span> <span class="nav-text">路由基础配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.15.2.</span> <span class="nav-text">路由组件示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.15.3.</span> <span class="nav-text">核心功能示例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8C%B9%E9%85%8D"><span class="nav-number">1.15.3.1.</span> <span class="nav-text">1. 动态路由匹配</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1"><span class="nav-number">1.15.3.2.</span> <span class="nav-text">2. 嵌套路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="nav-number">1.15.3.3.</span> <span class="nav-text">3. 编程式导航</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F%E9%80%89%E6%8B%A9"><span class="nav-number">1.15.4.</span> <span class="nav-text">路由模式选择</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.15.5.</span> <span class="nav-text">完整项目结构示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB%EF%BC%9A"><span class="nav-number">1.15.6.</span> <span class="nav-text">路由守卫：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%AE%88%E5%8D%AB%E7%B1%BB%E5%9E%8B%E4%B8%8E%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="nav-number">1.15.6.1.</span> <span class="nav-text">路由守卫类型与执行顺序</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%AE%88%E5%8D%AB%EF%BC%88%E4%BC%98%E5%85%88%E7%BA%A7%E4%BB%8E%E9%AB%98%E5%88%B0%E4%BD%8E%EF%BC%89"><span class="nav-number">1.15.6.1.1.</span> <span class="nav-text">全局守卫（优先级从高到低）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E7%8B%AC%E4%BA%AB%E5%AE%88%E5%8D%AB"><span class="nav-number">1.15.6.1.2.</span> <span class="nav-text">路由独享守卫</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%86%85%E5%AE%88%E5%8D%AB"><span class="nav-number">1.15.6.1.3.</span> <span class="nav-text">组件内守卫</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F%EF%BC%9A"><span class="nav-number">1.15.6.1.4.</span> <span class="nav-text">完整执行顺序：</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%AE%88%E5%8D%AB%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.15.6.2.</span> <span class="nav-text">全局守卫示例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E7%8B%AC%E4%BA%AB%E5%AE%88%E5%8D%AB-1"><span class="nav-number">1.15.6.3.</span> <span class="nav-text">路由独享守卫</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%86%85%E5%AE%88%E5%8D%AB%EF%BC%88%E7%BB%84%E5%90%88%E5%BC%8FAPI%EF%BC%89"><span class="nav-number">1.15.6.4.</span> <span class="nav-text">组件内守卫（组合式API）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B%E5%9C%BA%E6%99%AF"><span class="nav-number">1.15.6.5.</span> <span class="nav-text">完整示例场景</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81%E6%B5%81%E7%A8%8B"><span class="nav-number">1.15.6.5.1.</span> <span class="nav-text">用户登录认证流程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%95%8F%E6%84%9F%E6%93%8D%E4%BD%9C%E4%BA%8C%E6%AC%A1%E9%AA%8C%E8%AF%81"><span class="nav-number">1.15.6.5.2.</span> <span class="nav-text">敏感操作二次验证</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">1.15.6.6.</span> <span class="nav-text">注意事项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%A2%9E%E5%BC%BA%E7%89%88"><span class="nav-number">1.15.6.7.</span> <span class="nav-text">完整项目结构增强版</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E5%85%AD%E3%80%81Vuex"><span class="nav-number">1.16.</span> <span class="nav-text">十六、Vuex</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Vuex%E5%AE%9A%E4%B9%89%E4%B8%8E%E4%BD%9C%E7%94%A8"><span class="nav-number">1.16.1.</span> <span class="nav-text">Vuex定义与作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E8%AF%A6%E8%A7%A3"><span class="nav-number">1.16.2.</span> <span class="nav-text">核心概念详解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-State%EF%BC%88%E6%95%B0%E6%8D%AE%E6%BA%90%EF%BC%89"><span class="nav-number">1.16.2.1.</span> <span class="nav-text">1. State（数据源）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Mutations%EF%BC%88%E5%90%8C%E6%AD%A5%E4%BF%AE%E6%94%B9%EF%BC%89"><span class="nav-number">1.16.2.2.</span> <span class="nav-text">2. Mutations（同步修改）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Actions%EF%BC%88%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C%EF%BC%89"><span class="nav-number">1.16.2.3.</span> <span class="nav-text">3. Actions（异步操作）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-Getters%EF%BC%88%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%EF%BC%89"><span class="nav-number">1.16.2.4.</span> <span class="nav-text">4. Getters（计算属性）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-Modules%EF%BC%88%E6%A8%A1%E5%9D%97%E5%8C%96%EF%BC%89"><span class="nav-number">1.16.2.5.</span> <span class="nav-text">5. Modules（模块化）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B%E5%9C%BA%E6%99%AF-1"><span class="nav-number">1.16.3.</span> <span class="nav-text">完整示例场景</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B"><span class="nav-number">1.16.3.1.</span> <span class="nav-text">用户登录流程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%9A"><span class="nav-number">1.16.4.</span> <span class="nav-text">注意：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%90%AD%E9%85%8D-LocalStorage-%E4%BD%BF%E7%94%A8"><span class="nav-number">1.16.5.</span> <span class="nav-text">搭配 LocalStorage 使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="nav-number">1.16.5.1.</span> <span class="nav-text">基础配置</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96"><span class="nav-number">1.16.5.1.1.</span> <span class="nav-text">1. 安装依赖</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E5%AD%98%E5%82%A8%E5%B7%A5%E5%85%B7%E5%B0%81%E8%A3%85"><span class="nav-number">1.16.5.1.2.</span> <span class="nav-text">2. 存储工具封装</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vuex-Store%E9%85%8D%E7%BD%AE"><span class="nav-number">1.16.5.2.</span> <span class="nav-text">Vuex Store配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E6%8C%81%E4%B9%85%E5%8C%96%E6%8F%92%E4%BB%B6"><span class="nav-number">1.16.5.3.</span> <span class="nav-text">自动持久化插件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.16.5.4.</span> <span class="nav-text">组件使用示例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE-1"><span class="nav-number">1.16.5.5.</span> <span class="nav-text">最佳实践建议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%A8%A1%E5%9D%97%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.16.5.6.</span> <span class="nav-text">购物车模块示例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8D%81%E4%B8%83%E3%80%81Pinia"><span class="nav-number">1.17.</span> <span class="nav-text">十七、Pinia</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE-1"><span class="nav-number">1.17.1.</span> <span class="nav-text">基础配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96-1"><span class="nav-number">1.17.1.1.</span> <span class="nav-text">1. 安装依赖</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%88%9D%E5%A7%8B%E5%8C%96Pinia"><span class="nav-number">1.17.1.2.</span> <span class="nav-text">2. 初始化Pinia</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83Store%E5%AE%9A%E4%B9%89"><span class="nav-number">1.17.2.</span> <span class="nav-text">核心Store定义</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81Store"><span class="nav-number">1.17.2.1.</span> <span class="nav-text">1. 用户认证Store</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="nav-number">1.17.3.</span> <span class="nav-text">组件中使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E7%99%BB%E5%BD%95%E7%BB%84%E4%BB%B6"><span class="nav-number">1.17.3.1.</span> <span class="nav-text">1. 登录组件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9B%E9%98%B6%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.17.4.</span> <span class="nav-text">进阶功能实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E8%87%AA%E5%8A%A8%E6%8C%81%E4%B9%85%E5%8C%96%E6%8F%92%E4%BB%B6"><span class="nav-number">1.17.4.1.</span> <span class="nav-text">1. 自动持久化插件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E8%B4%AD%E7%89%A9%E8%BD%A6Store%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.17.4.2.</span> <span class="nav-text">2. 购物车Store示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="nav-number">1.17.5.</span> <span class="nav-text">组合式API最佳实践</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%A4%8D%E6%9D%82%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="nav-number">1.17.5.1.</span> <span class="nav-text">1. 复杂状态管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E8%B7%A8Store%E8%B0%83%E7%94%A8"><span class="nav-number">1.17.5.2.</span> <span class="nav-text">2. 跨Store调用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%BB%BA%E8%AE%AE"><span class="nav-number">1.17.6.</span> <span class="nav-text">项目结构建议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TypeScript%E6%94%AF%E6%8C%81"><span class="nav-number">1.17.7.</span> <span class="nav-text">TypeScript支持</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E9%AA%8C%E8%AF%81"><span class="nav-number">1.17.8.</span> <span class="nav-text">运行验证</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%90%AD%E9%85%8D-LocalStorage-%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="nav-number">1.17.9.</span> <span class="nav-text">搭配 LocalStorage 使用：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE-2"><span class="nav-number">1.17.9.1.</span> <span class="nav-text">基础配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81Store"><span class="nav-number">1.17.9.2.</span> <span class="nav-text">用户认证Store</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.17.9.3.</span> <span class="nav-text">组件实现</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E6%8C%81%E4%B9%85%E5%8C%96%E6%96%B9%E6%A1%88"><span class="nav-number">1.17.9.4.</span> <span class="nav-text">自动持久化方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BB%BA%E8%AE%AE%EF%BC%9A"><span class="nav-number">1.17.9.5.</span> <span class="nav-text">建议：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.17.9.6.</span> <span class="nav-text">购物车示例</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="lsdyun"
      src="/blog2025.github.io/images/avatar.png">
  <p class="site-author-name" itemprop="name">lsdyun</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/blog2025.github.io/archives/">
          <span class="site-state-item-count">34</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/blog2025.github.io/categories/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/lsdyun" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lsdyun" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://lsdyun.github.io/blog2025.github.io/2025/07/31/Vue3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog2025.github.io/images/avatar.png">
      <meta itemprop="name" content="lsdyun">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="记录博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Vue3 | 记录博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Vue3
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-07-31 11:28:48" itemprop="dateCreated datePublished" datetime="2025-07-31T11:28:48+08:00">2025-07-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-05-28 11:34:15" itemprop="dateModified" datetime="2025-05-28T11:34:15+08:00">2025-05-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog2025.github.io/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>


		<!--  设置置顶图标  -->
		        
		<!--  设置置顶图标  -->
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/vue3/vue3-project-intro.html">Vue3</a></h1><p>一个渐进式框架</p>
<p>安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install vue@next</span><br></pre></td></tr></table></figure>

<p>创建脚手架 CLI</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue ui</span><br></pre></td></tr></table></figure>

<h2 id="一、开始"><a href="#一、开始" class="headerlink" title="一、开始"></a>一、开始</h2><h3 id="创建一个应用实例（createApp）"><a href="#创建一个应用实例（createApp）" class="headerlink" title="创建一个应用实例（createApp）"></a>创建一个应用实例（<code>createApp</code>）</h3><ul>
<li>一般：（单个文件中）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123; <span class="comment">/* 内容 */</span> &#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">createApp</span>(&#123;&#125;)</span><br><span class="line">app.<span class="title function_">component</span>(<span class="string">&#x27;SearchInput&#x27;</span>, <span class="title class_">SearchInputComponent</span>)</span><br><span class="line">app.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, <span class="title class_">FocusDirective</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title class_">LocalePlugin</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>脚手架 <code>main.js</code>：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(store)</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="根组件：App-vue"><a href="#根组件：App-vue" class="headerlink" title="根组件：App.vue"></a><strong>根组件</strong>：App.vue</h3><p>根组件与其他组件没什么不同，配置选项是一样的。</p>
<ul>
<li><p>一般：（单个文件中）</p>
<p>把一个 Vue 应用挂载到 <code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code>，应该传递 <code>#app</code>：</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">ceateApp</span>(&#123;&#125;)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>脚手架 <code>src/App.vue</code>（主要布局和路由视图。）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;router-view /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>入口文件<code>main.js</code>中传递进根组件<code>App.vue</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(store)</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="组件实例："><a href="#组件实例：" class="headerlink" title="组件实例："></a>组件实例：</h3><ul>
<li>一般（单个文件中）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const app = Vue.createApp(&#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123; count: 4 &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const vm = app.mount(&#x27;#app&#x27;)</span><br><span class="line"></span><br><span class="line">console.log(vm.count) // =&gt; 4</span><br></pre></td></tr></table></figure>

<ul>
<li>脚手架中不存在这种写法。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      count: 4</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">      console.log(&#x27;created:&#x27;, this.count)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Vue3-生命周期钩子函数："><a href="#Vue3-生命周期钩子函数：" class="headerlink" title="Vue3 生命周期钩子函数："></a>Vue3 生命周期钩子函数：</h3><table>
<thead>
<tr>
<th><strong>阶段分类</strong>‌</th>
<th>‌<strong>选项式 API</strong>‌</th>
<th>‌<strong>组合式 API</strong>‌</th>
<th>‌<strong>触发时机</strong>‌</th>
<th>‌<strong>典型应用场景</strong>‌</th>
</tr>
</thead>
<tbody><tr>
<td>‌<strong>创建阶段</strong>‌</td>
<td><code>beforeCreate</code></td>
<td>由 <code>setup</code> 替代</td>
<td>组件实例初始化后，数据观测&#x2F;事件配置前</td>
<td>非响应式变量初始化</td>
</tr>
<tr>
<td></td>
<td><code>created</code></td>
<td>由 <code>setup</code> 替代</td>
<td>数据观测&#x2F;事件配置完成，DOM 未生成</td>
<td>发起异步请求、非 DOM 初始化</td>
</tr>
<tr>
<td>‌<strong>挂载阶段</strong>‌</td>
<td><code>beforeMount</code></td>
<td><code>onBeforeMount</code></td>
<td>模板编译完成，DOM 挂载前</td>
<td>极少数场景使用</td>
</tr>
<tr>
<td></td>
<td><code>mounted</code></td>
<td><code>onMounted</code></td>
<td>DOM 挂载完成，<code>$el</code> 可访问</td>
<td>操作 DOM、集成第三方库</td>
</tr>
<tr>
<td>‌<strong>更新阶段</strong>‌</td>
<td><code>beforeUpdate</code></td>
<td><code>onBeforeUpdate</code></td>
<td>数据变化导致虚拟 DOM 重新渲染前</td>
<td>获取更新前 DOM 状态（如滚动位置）</td>
</tr>
<tr>
<td></td>
<td><code>updated</code></td>
<td><code>onUpdated</code></td>
<td>虚拟 DOM 重新渲染并应用更新后</td>
<td>操作更新后的 DOM（需结合 <code>nextTick</code>）</td>
</tr>
<tr>
<td>‌<strong>卸载阶段</strong>‌</td>
<td><code>beforeUnmount</code></td>
<td><code>onBeforeUnmount</code></td>
<td>组件实例销毁前</td>
<td>清理定时器、移除事件监听</td>
</tr>
<tr>
<td></td>
<td><code>unmounted</code></td>
<td><code>onUnmounted</code></td>
<td>组件实例销毁后</td>
<td>释放全局资源、取消订阅</td>
</tr>
<tr>
<td>‌<strong>缓存组件阶段</strong>‌</td>
<td><code>activated</code></td>
<td><code>onActivated</code></td>
<td>被 <code>&lt;keep-alive&gt;</code> 缓存的组件激活时</td>
<td>恢复组件状态（如滚动位置）</td>
</tr>
<tr>
<td></td>
<td><code>deactivated</code></td>
<td><code>onDeactivated</code></td>
<td>被 <code>&lt;keep-alive&gt;</code> 缓存的组件切换离开时</td>
<td>保存临时数据</td>
</tr>
<tr>
<td>‌<strong>错误处理阶段</strong>‌</td>
<td><code>errorCaptured</code></td>
<td><code>onErrorCaptured</code></td>
<td>捕获子孙组件错误时</td>
<td>上报错误信息、阻止错误传播</td>
</tr>
</tbody></table>
<p><strong>补充说明：</strong></p>
<ul>
<li>‌<strong>组合式 API 特性</strong>‌<ul>
<li><code>setup</code> 函数替代了 <code>beforeCreate</code> 和 <code>created</code> 钩子；</li>
<li>组合式 API 钩子名称以 <code>on</code> 开头（如 <code>onMounted</code>）。</li>
</ul>
</li>
<li>‌<strong>特殊场景处理</strong>‌<ul>
<li><code>&lt;keep-alive&gt;</code> 组件的 <code>activated</code>&#x2F;<code>deactivated</code> 需配合缓存机制使用；</li>
<li><code>errorCaptured</code> 需返回 <code>false</code> 阻止错误继续传播。</li>
</ul>
</li>
<li>‌<strong>执行顺序</strong>‌<br>组合式 API 钩子优先于选项式 API 执行（如 <code>onMounted</code> 早于 <code>mounted</code>）</li>
</ul>
<h2 id="二、模板语法"><a href="#二、模板语法" class="headerlink" title="二、模板语法"></a>二、模板语法</h2><h3 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;span&gt;Message: &#123;&#123; msg &#125;&#125;&lt;/span&gt;</span><br></pre></td></tr></table></figure>

<h3 id="属性Attribute：v-bind"><a href="#属性Attribute：v-bind" class="headerlink" title="属性Attribute：v-bind"></a>属性Attribute：v-bind</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-bind:id=&quot;dynamicId&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--缩写--&gt;</span><br><span class="line">&lt;div :id=&quot;dynamicId&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h3 id="原始HTML：v-html"><a href="#原始HTML：v-html" class="headerlink" title="原始HTML：v-html"></a>原始HTML：v-html</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;Using mustaches: &#123;&#123; rawHtml &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;Using v-html directive: &lt;span v-html=&quot;rawHtml&quot;&gt;&lt;/span&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<h3 id="参数：v-on-监听-DOM-事件"><a href="#参数：v-on-监听-DOM-事件" class="headerlink" title="参数：v-on 监听 DOM 事件"></a>参数：v-on 监听 DOM 事件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;a v-on:click=&quot;doSomething&quot;&gt; ... &lt;/a&gt;</span><br><span class="line">&lt;!--缩写--&gt;</span><br><span class="line">&lt;a @click=&quot;doSomething&quot;&gt; ... &lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h3 id="动态参数："><a href="#动态参数：" class="headerlink" title="动态参数：[]"></a>动态参数：<code>[]</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;a v-bind:[attributeName]=&quot;url&quot;&gt; ... &lt;/a&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">这里的 attributeName 会被作为一个 JavaScript 表达式进行动态求值，求得的值将会作为最终的参数来使用。</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;a v-on:[eventName]=&quot;doSomething&quot;&gt; ... &lt;/a&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">当 eventName 的值为 &quot;focus&quot; 时，v-on:[eventName] 将等价于 v-on:focus</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure>

<h2 id="三、数据属性和方法"><a href="#三、数据属性和方法" class="headerlink" title="三、数据属性和方法"></a>三、数据属性和方法</h2><h3 id="数据属性：data-property"><a href="#数据属性：data-property" class="headerlink" title="数据属性：data property"></a>数据属性：data property</h3><p><code>date-&gt;$data</code></p>
<p>Vue 使用 <code>$</code> 前缀通过组件实例暴露自己的内置 API</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const app = Vue.createApp(&#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123; count: 4 &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const vm = app.mount(&#x27;#app&#x27;)</span><br><span class="line">console.log(vm.$data.count) // =&gt; 4</span><br><span class="line">console.log(vm.count)       // =&gt; 4</span><br></pre></td></tr></table></figure>

<h3 id="方法：method"><a href="#方法：method" class="headerlink" title="方法：method"></a>方法：method</h3><p>用 <code>methods</code> 选项向组件实例添加方法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const app = Vue.createApp(&#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123; count: 4 &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    increment() &#123;</span><br><span class="line">      // `this` 指向该组件实例</span><br><span class="line">      this.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const vm = app.mount(&#x27;#app&#x27;)</span><br><span class="line"></span><br><span class="line">console.log(vm.count) // =&gt; 4</span><br><span class="line">vm.increment()</span><br><span class="line">console.log(vm.count) // =&gt; 5</span><br></pre></td></tr></table></figure>

<h2 id="四、计算属性和侦听器："><a href="#四、计算属性和侦听器：" class="headerlink" title="四、计算属性和侦听器："></a>四、计算属性和侦听器：</h2><h3 id="计算属性：computed"><a href="#计算属性：computed" class="headerlink" title="计算属性：computed"></a>计算属性：computed</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;p&gt;Has published books:&lt;/p&gt;</span><br><span class="line">  &lt;span&gt;&#123;&#123; publishedBooksMessage &#125;&#125;&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">Vue.createApp(&#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      author: &#123;</span><br><span class="line">        name: &#x27;John Doe&#x27;,</span><br><span class="line">        books: [</span><br><span class="line">          &#x27;Vue 2 - Advanced Guide&#x27;,</span><br><span class="line">          &#x27;Vue 3 - Basic Guide&#x27;,</span><br><span class="line">          &#x27;Vue 4 - The Mystery&#x27;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    // 计算属性的 getter</span><br><span class="line">    publishedBooksMessage() &#123;</span><br><span class="line">      // `this` points to the vm instance</span><br><span class="line">      return this.author.books.length &gt; 0 ? &#x27;Yes&#x27; : &#x27;No&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>‌<strong>维度</strong>‌</th>
<th>‌**<code>computed</code>**‌</th>
<th>‌**<code>methods</code>**‌</th>
</tr>
</thead>
<tbody><tr>
<td>‌<strong>缓存机制</strong>‌</td>
<td>根据依赖缓存计算结果，依赖不变时直接复用</td>
<td>无缓存，每次调用都重新执行函数</td>
</tr>
<tr>
<td>‌<strong>触发条件</strong>‌</td>
<td>依赖的响应式数据变化时自动触发计算</td>
<td>需手动调用（如事件触发、模板表达式调用）</td>
</tr>
<tr>
<td>‌<strong>性能优化</strong>‌</td>
<td>适合高频访问的计算逻辑，<strong>避免重复运算</strong></td>
<td>频繁调用可能引发性能问题</td>
</tr>
<tr>
<td>‌<strong>参数支持</strong>‌</td>
<td>不可直接传参（需通过返回函数实现）</td>
<td>支持传参</td>
</tr>
<tr>
<td>‌<strong>代码用途</strong>‌</td>
<td>数据转换&#x2F;复杂计算（如价格格式化、条件筛选）</td>
<td>事件处理&#x2F;主动操作（如提交表单、发起请求）</td>
</tr>
</tbody></table>
<h3 id="侦听器：watch"><a href="#侦听器：watch" class="headerlink" title="侦听器：watch"></a>侦听器：watch</h3><p>Vue 通过<code>watch</code>来响应数据的变化，尤其需要在数据变化时执行异步或开销较大的操作时。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;button @click=&quot;sum++&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">Vue.createApp(&#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      sum: 1,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    // New: 新值 | Old: 老值</span><br><span class="line">    sum(New, Old) &#123;</span><br><span class="line">      console.log(`新值:$&#123;New&#125; ——— 老值:$&#123;Old&#125;`)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;  </span><br><span class="line">&#125;).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>数据变化出发异步操作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  searchKey(newVal) &#123;</span><br><span class="line">    axios.get(`/api/search?q=$&#123;newVal&#125;`)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><strong>特性</strong>‌</th>
<th>‌**<code>computed</code>**‌</th>
<th>‌**<code>watch</code>**‌</th>
</tr>
</thead>
<tbody><tr>
<td>‌<strong>缓存机制</strong>‌</td>
<td>依赖值未变化时直接返回缓存结果</td>
<td>无缓存，每次数据变化都会触发回调</td>
</tr>
<tr>
<td>‌<strong>触发方式</strong>‌</td>
<td>自动计算（依赖的响应式数据变化时触发）</td>
<td>需显式声明监听目标，数据变化时触发回调</td>
</tr>
<tr>
<td>‌<strong>异步支持</strong>‌</td>
<td>不支持异步操作</td>
<td>支持异步操作（如网络请求、定时任务）</td>
</tr>
<tr>
<td>‌<strong>返回值要求</strong>‌</td>
<td>必须通过 <code>return</code> 返回值</td>
<td>无需返回值，可执行任意逻辑</td>
</tr>
<tr>
<td><strong>适用场景</strong></td>
<td>依赖多属性计算新值，模板简化复杂逻辑</td>
<td>数据变化触发异步操作，监听数据变化影响多模块</td>
</tr>
</tbody></table>
<h2 id="五、class与style绑定："><a href="#五、class与style绑定：" class="headerlink" title="五、class与style绑定："></a>五、class与style绑定：</h2><p>说白了就是根据 class 中的值是否为 true 来动态渲染，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;div</span><br><span class="line">  id=&quot;app&quot;</span><br><span class="line">  class=&quot;static&quot;</span><br><span class="line">  :class=&quot;&#123; active: isActive, &#x27;text-danger&#x27;: hasError &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">Vue.createApp(&#123;</span><br><span class="line">   data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        isActive: true,</span><br><span class="line">        hasError: false</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .static&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    .static active&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    .static active text-danger&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;!--结果--&gt;</span><br><span class="line">&lt;div class=&quot;static active&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">当 isActive 或者 hasError 变化时，class 列表将相应地更新。例如，如果 hasError 的值为 true，class 列表将变为 &quot;static active text-danger&quot;。</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure>

<h2 id="六、条件渲染：v-if-和-v-show"><a href="#六、条件渲染：v-if-和-v-show" class="headerlink" title="六、条件渲染：v-if 和 v-show"></a>六、条件渲染：v-if 和 v-show</h2><p><code>v-if</code> 指令用于条件性地渲染一块内容。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-if=&quot;user.role === &#x27;ADMIN&#x27;&quot;&gt;</span><br><span class="line">haha</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div v-else-if=&quot;user.role === &#x27;USER&#x27;&quot;&gt;</span><br><span class="line">    null</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div v-else&gt;</span><br><span class="line">    undefined</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p><code>v-show</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-if=&quot;TRUE&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p><code>v-show</code>不支持<code>&lt;template&gt;</code></p>
<h3 id="核心差异"><a href="#核心差异" class="headerlink" title="核心差异"></a>核心差异</h3><table>
<thead>
<tr>
<th>‌<strong>对比维度</strong>‌</th>
<th>‌**<code>v-if</code>**‌</th>
<th>‌**<code>v-show</code>**‌</th>
</tr>
</thead>
<tbody><tr>
<td>‌<strong>实现原理</strong>‌</td>
<td>动态增删 DOM 元素（条件为 <code>false</code> 时完全移除）</td>
<td>仅切换 CSS 的 <code>display</code> 属性（元素始终在 DOM 中）</td>
</tr>
<tr>
<td>‌<strong>初始渲染开销</strong>‌</td>
<td>条件为 <code>false</code> 时无渲染开销</td>
<td>无论条件如何，元素都会被渲染到 DOM 中</td>
</tr>
<tr>
<td>‌<strong>切换性能</strong>‌</td>
<td>每次切换需重建&#x2F;销毁 DOM，开销较大</td>
<td>仅修改 CSS 属性，适合<strong>高频切换</strong>场景</td>
</tr>
<tr>
<td>‌<strong>组件生命周期影响</strong>‌</td>
<td>触发组件的 <code>created</code>&#x2F;<code>destroyed</code> 钩子</td>
<td>不影响组件生命周期（元素始终存在）</td>
</tr>
</tbody></table>
<h3 id="性能对比"><a href="#性能对比" class="headerlink" title="性能对比"></a>性能对比</h3><ol>
<li>‌**<code>v-if</code> 适用场景**‌<ul>
<li>‌**初始条件为 <code>false</code>**‌：避免无意义渲染，节省内存</li>
<li>‌<strong>低频切换操作</strong>‌：如页面初始化后仅需一次渲染的弹窗</li>
</ul>
</li>
<li>‌**<code>v-show</code> 优势场景**‌<ul>
<li>‌<strong>高频显示切换</strong>‌：如表单校验提示、Tab 栏切换</li>
<li>‌<strong>保留组件状态</strong>‌：如需要缓存输入框内容的隐藏&#x2F;显示</li>
</ul>
</li>
</ol>
<p><code>v-if</code> 是“真正”的条件渲染，因为它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建。</p>
<p><code>v-if</code> 也是惰性的：如果在初始渲染时条件为假，则什么也不做——直到条件第一次变为真时，才会开始渲染条件块。</p>
<p><code>v-show</code> 就简单得多——不管初始条件是什么，元素总是会被渲染，并且只是简单地基于 CSS 进行切换。</p>
<p><code>v-if</code> 有<strong>更高的切换开销</strong>，而 <code>v-show</code> 有更高的<strong>初始</strong>渲染开销。因此，如果需要非常频繁地切换，则使用 <code>v-show</code> 较好；如果在运行时条件很少改变，则使用 <code>v-if</code> 较好。</p>
<h2 id="七、列表渲染：v-for"><a href="#七、列表渲染：v-for" class="headerlink" title="七、列表渲染：v-for"></a>七、列表渲染：v-for</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;ul &gt;</span><br><span class="line">      &lt;li v-for=&quot;item in items&quot;&gt;</span><br><span class="line">        &#123;&#123; item.message &#125;&#125;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li v-for=&quot;(item, index) in items&quot;&gt;</span><br><span class="line">         &#123;&#123; index &#125;&#125; - &#123;&#123; item.message &#125;&#125;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">Vue.createApp(&#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      items: [</span><br><span class="line">          &#123; message: &#x27;Foo&#x27; &#125;, </span><br><span class="line">          &#123; message: &#x27;Bar&#x27; &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>也可以用 <code>of</code> 替代 <code>in</code> 作为分隔符，因为它更接近 JavaScript 迭代器的语法：</p>
<p><font color="red">还有<code>key</code>值最好标出，否则会导致一系列问题。<code>key</code>可以取<code>id</code>、<code>name</code>等<strong>字符串</strong>或<strong>数值</strong>为值。</font></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;ul &gt;</span><br><span class="line">      &lt;li v-for=&quot;(value,key,index) in user&quot; :key=&quot;key&quot;&gt;</span><br><span class="line">       	&#123;&#123;index&#125;&#125;. &#123;&#123;key&#125;&#125; : &#123;&#123; value &#125;&#125;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">Vue.createApp(&#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      user: &#123;</span><br><span class="line">        name: &#x27;张三&#x27;,</span><br><span class="line">        age: 18,</span><br><span class="line">        classNum: 1</span><br><span class="line">      &#125;</span><br><span class="line">      /*</span><br><span class="line">      userInfo: [</span><br><span class="line">      	&#123; key: &#x27;name&#x27;, value: &#x27;张三&#x27;&#125;,</span><br><span class="line">      	&#123; key: &#x27;age&#x27;, value: 18 &#125;,</span><br><span class="line">      	&#123; key: &#x27;classNum&#x27;, value: 1 &#125;</span><br><span class="line">      ]</span><br><span class="line">      */</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="数组更新："><a href="#数组更新：" class="headerlink" title="数组更新："></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/LEPENGYANG/p/15793690.html">数组更新</a>：</h3><h4 id="搭配v-if："><a href="#搭配v-if：" class="headerlink" title="搭配v-if："></a>搭配v-if：</h4><p><code>v-if</code>的优先级大于<code>v-for</code>，使用标准：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-for=&quot;items in userInfo&quot; :key=&quot;items.id&quot;&gt;</span><br><span class="line">  &lt;li v-if=&quot;user.role === &#x27;ADMIN&#x27;&quot;&gt;</span><br><span class="line">    &#123;&#123; items &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="组件中使用："><a href="#组件中使用：" class="headerlink" title="组件中使用："></a>组件中使用：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component</span><br><span class="line">  v-for=&quot;(item, index) in items&quot;</span><br><span class="line">  :item=&quot;item&quot;</span><br><span class="line">  :index=&quot;index&quot;</span><br><span class="line">  :key=&quot;item.id&quot;</span><br><span class="line">&gt;&lt;/my-component&gt;</span><br></pre></td></tr></table></figure>

<p>显式传递 <code>:item=&quot;item&quot;</code> 和 <code>:index=&quot;index&quot;</code> 的原因：</p>
<ul>
<li>‌<strong>组件作用域隔离</strong>‌：Vue 组件具有独立作用域，<code>v-for</code> 不会自动将迭代数据注入组件，必须通过 props 显式传递。（解耦组件逻辑与数据来源	避免依赖隐式注入，提升可维护性）</li>
<li>‌<strong>数据绑定</strong>：<ul>
<li><code>:item=&quot;item&quot;</code>：将当前数组元素传递给子组件的 <code>item</code> prop，确保子组件能访问具体数据。</li>
<li><code>:index=&quot;index&quot;</code>：传递索引值，常用于动态操作（如删除特定项）或展示列表序号。</li>
</ul>
</li>
</ul>
<h2 id="八、事件处理：v-on"><a href="#八、事件处理：v-on" class="headerlink" title="八、事件处理：v-on &#x2F; @"></a>八、事件处理：v-on &#x2F; @</h2><p>使用 <code>v-on</code> 指令 (通常缩写为 <code>@</code> 符号) 来监听 DOM 事件，并在触发事件时执行方法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;button @click=&quot;counter += 1&quot;&gt;Add 1&lt;/button&gt;</span><br><span class="line">  &lt;p&gt; &#123;&#123; counter &#125;&#125; &lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    Vue.createApp(&#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          counter: 1</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;button @click=&quot;sumAdd&quot;&gt;加 1&lt;/button&gt;</span><br><span class="line">  &lt;p&gt; &#123;&#123; counter &#125;&#125; &lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    Vue.createApp(&#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          counter: 0</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">          sumAdd()&#123;</span><br><span class="line">              this.counter+1</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/jingjing217/article/details/108235961">事件修饰符</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 阻止单击事件继续传播 --&gt;</span><br><span class="line">&lt;a @click.stop=&quot;doThis&quot;&gt;&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p>……</p>
<h3 id="按键（键盘）修饰符"><a href="#按键（键盘）修饰符" class="headerlink" title="按键（键盘）修饰符"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/unlockth/p/13485325.html">按键（键盘）修饰符</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 只有在 `key` 是 `Enter` 时调用 `vm.submit()` --&gt;</span><br><span class="line">&lt;input @keyup.enter=&quot;submit&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>……</p>
<h3 id="系统修饰键"><a href="#系统修饰键" class="headerlink" title="系统修饰键"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/leibaowen/article/details/121283937">系统修饰键</a></h3><h3 id="鼠标修饰符"><a href="#鼠标修饰符" class="headerlink" title="鼠标修饰符"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/leibaowen/article/details/121283937">鼠标修饰符</a></h3><h2 id="九、表单：v-model"><a href="#九、表单：v-model" class="headerlink" title="九、表单：v-model"></a>九、表单：v-model</h2><p><strong>v-model 与 v-bind 核心区别对比表</strong></p>
<table>
<thead>
<tr>
<th><strong>特性</strong>‌</th>
<th>‌**<code>v-model</code>**‌</th>
<th>‌**<code>v-bind</code>**‌</th>
</tr>
</thead>
<tbody><tr>
<td>‌<strong>核心用途</strong>‌</td>
<td>‌<strong>双向数据绑定</strong>‌（表单输入或自定义组件）</td>
<td>‌<strong>单向数据绑定</strong>‌（将数据绑定到 HTML 属性或组件 props）</td>
</tr>
<tr>
<td>‌<strong>数据流向</strong>‌</td>
<td>数据与视图双向同步：数据变化更新视图，视图变化（如用户输入）更新数据</td>
<td>单向数据流：数据变化更新视图，视图变化‌<strong>不会</strong>‌反向影响数据</td>
</tr>
<tr>
<td>‌<strong>底层实现</strong>‌</td>
<td>语法糖，等价于 <code>:value</code> + <code>@input</code>（默认行为，可自定义）</td>
<td>直接绑定属性，无事件监听机制</td>
</tr>
<tr>
<td>‌<strong>适用场景</strong>‌</td>
<td>- 表单控件（<code>input</code>、<code>textarea</code>、<code>select</code>） - 需要双向绑定的自定义组件</td>
<td>- 绑定 HTML 属性（如 <code>id</code>、<code>class</code>、<code>style</code>） - 向子组件传递 props</td>
</tr>
<tr>
<td>‌<strong>修饰符</strong>‌</td>
<td>支持 <code>.lazy</code>（延迟同步）、<code>.number</code>（转数值）、<code>.trim</code>（去空格）</td>
<td>支持 <code>.prop</code>（绑定 DOM 属性而非特性）、<code>.camel</code>（转驼峰命名）</td>
</tr>
<tr>
<td>‌<strong>典型代码</strong>‌</td>
<td><code>html &lt;input v-model=&quot;message&quot;&gt;</code></td>
<td><code>html &lt;div v-bind:class=&quot;&#123; active: isActive &#125;&quot;&gt;&lt;/div&gt;</code></td>
</tr>
<tr>
<td>‌<strong>自定义组件用法</strong>‌</td>
<td><code>html &lt;my-component v-model=&quot;value&quot;&gt;&lt;/my-component&gt;</code> 需组件内部实现 <code>modelValue</code> prop 和 <code>update:modelValue</code> 事件</td>
<td><code>html &lt;my-component :title=&quot;pageTitle&quot;&gt;&lt;/my-component&gt;</code> 直接传递 props</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>‌<strong>场景</strong>‌</th>
<th>‌<strong>选择指令</strong>‌</th>
<th>‌<strong>原因</strong>‌</th>
</tr>
</thead>
<tbody><tr>
<td>表单输入实时同步</td>
<td><code>v-model</code></td>
<td>自动处理双向数据流，简化代码</td>
</tr>
<tr>
<td>动态设置元素属性（如样式、ID）</td>
<td><code>v-bind</code></td>
<td>单向绑定足够且高效</td>
</tr>
<tr>
<td>向子组件传递只读数据</td>
<td><code>v-bind</code></td>
<td>明确数据所有权在父组件</td>
</tr>
<tr>
<td>子组件需要修改父组件数据</td>
<td><code>v-model</code></td>
<td>通过事件机制安全更新数据，符合单向数据流原则</td>
</tr>
<tr>
<td>需要格式化输入（如转数字、去空格）</td>
<td><code>v-model</code> + 修饰符</td>
<td>直接利用内置修饰符简化处理</td>
</tr>
</tbody></table>
<h3 id="文本："><a href="#文本：" class="headerlink" title="文本："></a>文本：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-model=&quot;message&quot; placeholder=&quot;请编辑&quot; /&gt;</span><br><span class="line">&lt;p&gt;文本 : &#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<h3 id="多行文本："><a href="#多行文本：" class="headerlink" title="多行文本："></a>多行文本：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;span&gt;多行文本 :&lt;/span&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;textarea v-model=&quot;message&quot; placeholder=&quot;请编辑&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    Vue.createApp(&#123;</span><br><span class="line">          data() &#123;</span><br><span class="line">              return &#123;</span><br><span class="line">                message: null // 确保 placeholder 生效</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">    &#125;).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="单选框："><a href="#单选框：" class="headerlink" title="单选框："></a>单选框：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;选择性别&lt;/h3&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      	&lt;input type=&quot;radio&quot; v-model=&quot;selected&quot; value=&quot;male&quot;/&gt; 男</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">     	&lt;input type=&quot;radio&quot; v-model=&quot;selected&quot; value=&quot;female&quot;/&gt; 女</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;p&gt;已选：&#123;&#123; selected &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">//import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">//const selected = ref(&#x27;male&#x27;) // 默认选中&quot;男&quot;</span><br><span class="line">    Vue.createApp(&#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          gender: &#x27;male&#x27;,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="复选框："><a href="#复选框：" class="headerlink" title="复选框："></a>复选框：</h3><ul>
<li><strong>单个复选框 (Checkbox)</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      &lt;input type=&quot;checkbox&quot; v-model=&quot;isAgreed&quot; /&gt; 我已阅读协议</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;p&gt;状态：&#123;&#123; isAgreed ? &#x27;已同意&#x27; : &#x27;未同意&#x27; &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const isAgreed = ref(false) // 默认空选</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>多个复选框 (Checkbox Group)</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;选择爱好&lt;/h3&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      &lt;input type=&quot;checkbox&quot; v-model=&quot;selectedHobbies&quot; value=&quot;music&quot; /&gt; 音乐</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      &lt;input type=&quot;checkbox&quot; v-model=&quot;selectedHobbies&quot; value=&quot;sports&quot; /&gt; 运动</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;label&gt;</span><br><span class="line">      &lt;input type=&quot;checkbox&quot; v-model=&quot;selectedHobbies&quot; value=&quot;reading&quot; /&gt; 阅读</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;p&gt;已选：&#123;&#123; selectedHobbies &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">//import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">//const selectedHobbies = ref([&#x27;music&#x27;]) // 默认选中音乐</span><br><span class="line">    Vue.createApp(&#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          hobbies: [&#x27;coding&#x27;]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>‌<strong>单选框组</strong>‌：<ul>
<li>使用相同的 <code>v-model</code> 绑定</li>
<li>通过不同 <code>value</code> 值区分选项</li>
<li>绑定值为字符串类型</li>
</ul>
</li>
<li>‌<strong>复选框</strong>‌：<ul>
<li>单个复选框绑定‌<strong>布尔值</strong>‌</li>
<li>多个复选框绑定‌<strong>数组</strong>‌</li>
<li>每个复选框的 <code>value</code> 会被自动加入&#x2F;移出数组</li>
</ul>
</li>
<li>‌<strong>响应式表现</strong>‌：<ul>
<li>修改 <code>selected</code> 会更新单选状态</li>
<li>修改 <code>selectedHobbies</code> 会同步多选状态</li>
<li>用户点击操作会自动更新绑定值</li>
</ul>
</li>
</ol>
<h3 id="下拉框："><a href="#下拉框：" class="headerlink" title="下拉框："></a>下拉框：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;选择城市&lt;/h3&gt;</span><br><span class="line">    &lt;!-- 下拉框绑定 selectedCity --&gt;</span><br><span class="line">    &lt;select v-model=&quot;selectedCity&quot;&gt;</span><br><span class="line">      &lt;option </span><br><span class="line">        v-for=&quot;city in cities&quot; </span><br><span class="line">        :key=&quot;city.value&quot; </span><br><span class="line">        :value=&quot;city.value&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;&#123; city.label &#125;&#125;</span><br><span class="line">      &lt;/option&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    &lt;p&gt;当前选择：&#123;&#123; selectedCity &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">/**</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 下拉选项数据（value 为提交值，label 为显示文本）</span><br><span class="line">const cities = [</span><br><span class="line">  &#123; value: &#x27;bj&#x27;, label: &#x27;北京&#x27; &#125;,</span><br><span class="line">  &#123; value: &#x27;sh&#x27;, label: &#x27;上海&#x27; &#125;,</span><br><span class="line">  &#123; value: &#x27;gz&#x27;, label: &#x27;广州&#x27; &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">// 默认选中第一个选项</span><br><span class="line">const selectedCity = ref(cities[0].value)</span><br><span class="line">*/</span><br><span class="line">    Vue.createApp(&#123;</span><br><span class="line">      data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">          cities: [</span><br><span class="line">            &#123; value: &#x27;bj&#x27;, label: &#x27;北京&#x27; &#125;,</span><br><span class="line">            &#123; value: &#x27;sh&#x27;, label: &#x27;上海&#x27; &#125;,</span><br><span class="line">            &#123; value: &#x27;gz&#x27;, label: &#x27;广州&#x27; &#125;</span><br><span class="line">          ],</span><br><span class="line">          selectedCity: &#x27;sh&#x27; // 默认选中上海</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="修饰符："><a href="#修饰符：" class="headerlink" title="修饰符："></a>修饰符：</h3><ul>
<li><code>.lazy</code>：延迟同步</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 在“change”时而非“input”时更新 --&gt;</span><br><span class="line">&lt;input v-model.lazy=&quot;msg&quot; /&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>.number</code>：将用户的输入值转为数值类型</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-model.number=&quot;age&quot; type=&quot;number&quot; /&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>.trim</code>：自动过滤用户输入的首尾空白字符</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-model.trim=&quot;msg&quot; /&gt;</span><br></pre></td></tr></table></figure>

<h2 id="十、组件-Components："><a href="#十、组件-Components：" class="headerlink" title="十、组件 Components："></a>十、组件 Components：</h2><h3 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h3><ul>
<li>一般（单个文件中）：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 创建一个Vue 应用</span><br><span class="line">const app = Vue.createApp(&#123;&#125;)</span><br><span class="line">// 定义一个名为 button-counter 的新全局组件</span><br><span class="line">app.component(&#x27;button-counter&#x27;, &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      count: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  template: `</span><br><span class="line">    &lt;button @click=&quot;count++&quot;&gt;</span><br><span class="line">      You clicked me &#123;&#123; count &#125;&#125; times.</span><br><span class="line">    &lt;/button&gt;`</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>调用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;button-counter&gt;&lt;/button-counter&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">Vue.createApp(&#123;&#125;).mount(&quot;#app&quot;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>脚手架 CLI：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- src/components/LocalButton.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button class=&quot;warning-btn&quot;&gt;局部按钮&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>调用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;LocalButton /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import LocalButton from &#x27;./components/LocalButton.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="组件交互-Props："><a href="#组件交互-Props：" class="headerlink" title="组件交互 Props："></a>组件交互 Props：</h3><ul>
<li>父子组件交互（Props + 事件）：</li>
</ul>
<p>子组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ChildComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;接收父组件数据：&#123;&#123; msg &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;sendToParent&quot;&gt;向父组件传值&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">defineProps([&#x27;msg&#x27;])  // 接收父组件数据</span><br><span class="line">const emit = defineEmits([&#x27;child-event&#x27;])  // 定义自定义事件</span><br><span class="line"></span><br><span class="line">const sendToParent = () =&gt; &#123;</span><br><span class="line">  emit(&#x27;child-event&#x27;, &#x27;来自子组件的数据&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>父组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ParentComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ChildComponent </span><br><span class="line">    :msg=&quot;parentMsg&quot; </span><br><span class="line">    @child-event=&quot;handleChildEvent&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import ChildComponent from &#x27;./ChildComponent.vue&#x27;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const parentMsg = ref(&#x27;父组件初始数据&#x27;)</span><br><span class="line">const handleChildEvent = (data) =&gt; &#123;</span><br><span class="line">  parentMsg.value = data  // 接收子组件数据</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>兄弟组件交互（通过父组件中介）</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ParentComponent</span><br><span class="line">├─ BrotherComponentA（发送数据）</span><br><span class="line">└─ BrotherComponentB（接收数据）</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- BrotherComponentA.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;emitData&quot;&gt;发送数据&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const emit = defineEmits([&#x27;transfer&#x27;])</span><br><span class="line">const emitData = () =&gt; &#123;</span><br><span class="line">  emit(&#x27;transfer&#x27;, &#x27;兄弟A的数据&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ParentComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;BrotherComponentA @transfer=&quot;handleTransfer&quot; /&gt;</span><br><span class="line">  &lt;BrotherComponentB :received=&quot;transferData&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const transferData = ref(&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">const handleTransfer = (data) =&gt; &#123;</span><br><span class="line">  transferData.value = data  // 通过父组件中转</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>全局状态共享（简易版）</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ComponentA.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;store.increment&quot;&gt;全局计数+1&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; store &#125; from &#x27;./store&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ComponentB.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p&gt;当前计数：&#123;&#123; store.count &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; store &#125; from &#x27;./store&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>‌<strong>交互类型</strong>‌</th>
<th>‌<strong>实现方式</strong>‌</th>
<th>‌<strong>适用场景</strong>‌</th>
</tr>
</thead>
<tbody><tr>
<td>父子组件交互</td>
<td>Props + 自定义事件</td>
<td>直接关联的组件层级</td>
</tr>
<tr>
<td>兄弟组件交互</td>
<td>父组件作为中介</td>
<td>同层级无直接关联组件</td>
</tr>
<tr>
<td>全局状态共享</td>
<td>响应式对象</td>
<td>跨多层级组件通信</td>
</tr>
</tbody></table>
<h3 id="监听子组件事件："><a href="#监听子组件事件：" class="headerlink" title="监听子组件事件："></a>监听子组件事件：</h3><ul>
<li>基础事件监听（子组件主动触发）：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 ChildComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;emitData&quot;&gt;触发事件&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const emit = defineEmits([&#x27;child-event&#x27;])  // 定义事件</span><br><span class="line"></span><br><span class="line">const emitData = () =&gt; &#123;</span><br><span class="line">  emit(&#x27;child-event&#x27;, &#x27;子组件数据&#x27;)  // 触发事件并传值</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件 ParentComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ChildComponent @child-event=&quot;handleEvent&quot; /&gt;</span><br><span class="line">  &lt;p&gt;接收数据：&#123;&#123; receivedData &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const receivedData = ref(&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">const handleEvent = (data) =&gt; &#123;</span><br><span class="line">  receivedData.value = data  // 监听子组件事件</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>监听子组件数据变化（props驱动）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 ChildComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input v-model=&quot;internalValue&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; watch &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const props = defineProps([&#x27;value&#x27;])</span><br><span class="line">const emit = defineEmits([&#x27;update:value&#x27;])</span><br><span class="line"></span><br><span class="line">// 监听内部数据变化</span><br><span class="line">watch(() =&gt; props.value, (newVal) =&gt; &#123;</span><br><span class="line">  emit(&#x27;update:value&#x27;, newVal)  // 同步数据到父组件</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件 ParentComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ChildComponent </span><br><span class="line">    :value=&quot;parentValue&quot; </span><br><span class="line">    @update:value=&quot;val =&gt; parentValue = val&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const parentValue = ref(&#x27;&#x27;)  // 自动双向绑定</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>组合式监听（v-model语法糖）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 ChildComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input </span><br><span class="line">    :value=&quot;modelValue&quot;</span><br><span class="line">    @input=&quot;$emit(&#x27;update:modelValue&#x27;, $event.target.value)&quot;</span><br><span class="line">  &gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">defineProps([&#x27;modelValue&#x27;])  // 默认prop名</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件 ParentComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ChildComponent v-model=&quot;inputValue&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const inputValue = ref(&#x27;&#x27;)  // 自动建立双向绑定</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><strong>监听类型</strong>‌</th>
<th>‌<strong>实现方式</strong>‌</th>
<th>‌<strong>适用场景</strong>‌</th>
</tr>
</thead>
<tbody><tr>
<td>自定义事件监听</td>
<td><code>@event</code> + <code>defineEmits</code></td>
<td>子组件主动触发事件</td>
</tr>
<tr>
<td>Props数据变化监听</td>
<td><code>watch</code> + <code>v-model</code></td>
<td>表单类组件双向绑定</td>
</tr>
<tr>
<td>语法糖绑定</td>
<td><code>v-model</code>默认协议</td>
<td>快速实现双向数据流</td>
</tr>
</tbody></table>
<h3 id="插槽分发内容："><a href="#插槽分发内容：" class="headerlink" title="插槽分发内容："></a>插槽分发内容：</h3><ul>
<li><strong>默认插槽</strong></li>
</ul>
<p>子组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- SlotComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;h3&gt;默认内容容器&lt;/h3&gt;</span><br><span class="line">    &lt;slot&gt;备用内容（父组件未传内容时显示）&lt;/slot&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>父组件调用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;SlotComponent&gt;</span><br><span class="line">    &lt;p&gt;父组件传入的插槽内容&lt;/p&gt;  &lt;!-- 覆盖默认插槽--&gt;</span><br><span class="line">  &lt;/SlotComponent&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>具名插槽</strong></li>
</ul>
<p>子组件定义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- LayoutComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;layout&quot;&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">      &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;  &lt;!-- 具名插槽--&gt;</span><br><span class="line">    &lt;/header&gt;</span><br><span class="line">    &lt;main&gt;</span><br><span class="line">      &lt;slot&gt;&lt;/slot&gt;  &lt;!-- 默认插槽 --&gt;</span><br><span class="line">    &lt;/main&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>父组件调用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;LayoutComponent&gt;</span><br><span class="line">    &lt;template #header&gt;  &lt;!-- v-slot 简写--&gt;</span><br><span class="line">      &lt;h1&gt;自定义标题内容&lt;/h1&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;p&gt;主体内容区&lt;/p&gt;  &lt;!-- 自动填充默认插槽--&gt;</span><br><span class="line">  &lt;/LayoutComponent&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>作用域插槽</strong></li>
</ul>
<p>‌子组件定义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ListComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;item in items&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">      &lt;slot :item=&quot;item&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/slot&gt;  &lt;!-- 传递作用域数据--&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const items = [</span><br><span class="line">  &#123; id: 1, name: &#x27;Apple&#x27; &#125;,</span><br><span class="line">  &#123; id: 2, name: &#x27;Banana&#x27; &#125;</span><br><span class="line">]</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>父组件调用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ListComponent&gt;</span><br><span class="line">    &lt;template #default=&quot;&#123; item &#125;&quot;&gt;  &lt;!-- 接收作用域数据--&gt;</span><br><span class="line">      &lt;span class=&quot;highlight&quot;&gt;&#123;&#123; item.name &#125;&#125;（ID:&#123;&#123; item.id &#125;&#125;）&lt;/span&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/ListComponent&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>‌<strong>类型</strong>‌</th>
<th>‌<strong>功能特性</strong>‌</th>
<th>‌<strong>适用场景</strong>‌</th>
</tr>
</thead>
<tbody><tr>
<td>默认插槽</td>
<td>基础内容分发，支持备用内容</td>
<td>简单内容替换场景</td>
</tr>
<tr>
<td>具名插槽</td>
<td>多区域内容分发，<code>name</code>标识插槽位置</td>
<td>复杂布局组件</td>
</tr>
<tr>
<td>作用域插槽</td>
<td>子组件向父组件传递数据，实现动态内容渲染</td>
<td>数据驱动型组件交互</td>
</tr>
</tbody></table>
<h3 id="动态组件："><a href="#动态组件：" class="headerlink" title="动态组件："></a>动态组件：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;component :is=&quot;currentComponent&quot; /&gt; </span><br><span class="line">&lt;!--使用内置 &lt;component&gt; 元素配合 :is 属性--&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;currentComponent = &#x27;ComponentA&#x27;&quot;&gt;显示A&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;currentComponent = &#x27;ComponentB&#x27;&quot;&gt;显示B&lt;/button&gt;</span><br><span class="line">  &lt;component :is=&quot;currentComponent&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import ComponentA from &#x27;./ComponentA.vue&#x27;</span><br><span class="line">import ComponentB from &#x27;./ComponentB.vue&#x27;</span><br><span class="line">const currentComponent = ref(&#x27;ComponentA&#x27;)  // 默认显示组件A</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>补充：</p>
<ul>
<li><p>‌<strong>状态保持</strong></p>
<p>比如说：在 A 组件写了一半的文章，然后切换到 B 组件，再切换回 A 组件时，A 组件编辑的内容丢失，想要保持内容，就可以通过<code>&lt;keep-alive/&gt;</code></p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive&gt;</span><br><span class="line">  &lt;component :is=&quot;currentComponent&quot; /&gt;  // 保持组件实例避免重复渲染</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>‌<strong>动态传参</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;component </span><br><span class="line">  :is=&quot;currentComponent&quot; </span><br><span class="line">  :data=&quot;dynamicData&quot;  // 传递动态参数</span><br><span class="line">  @custom-event=&quot;handleEvent&quot;  // 监听子组件事件</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>‌<strong>调用子组件方法</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;component :is=&quot;currentComponent&quot; ref=&quot;dynamicComp&quot; /&gt;</span><br><span class="line"></span><br><span class="line">// 父组件中调用</span><br><span class="line">const dynamicComp = ref()</span><br><span class="line">dynamicComp.value.childMethod()  // 需注意可能返回数组</span><br></pre></td></tr></table></figure>

<h3 id="异步组件："><a href="#异步组件：" class="headerlink" title="异步组件："></a>异步组件：</h3><ul>
<li><p>‌<strong>基础定义</strong>‌</p>
<p>使用 <code>defineAsyncComponent()</code> 实现组件按需加载，需配合动态 <code>import()</code> 语法实现代码分割。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AsyncComp</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">() =&gt;</span> </span><br><span class="line">  <span class="keyword">import</span>(<span class="string">&#x27;./AsyncComponent.vue&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>加载状态控制</strong>‌<br>配置加载中&#x2F;失败状态组件，提升用户体验。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">AsyncComp</span> = <span class="title function_">defineAsyncComponent</span>(&#123;</span><br><span class="line">  <span class="attr">loader</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./HeavyComponent.vue&#x27;</span>),</span><br><span class="line">  <span class="attr">loadingComponent</span>: <span class="title class_">LoadingSpinner</span>, <span class="comment">// 加载中显示</span></span><br><span class="line">  <span class="attr">errorComponent</span>: <span class="title class_">ErrorDisplay</span>,      <span class="comment">// 加载失败显示</span></span><br><span class="line">  <span class="attr">delay</span>: <span class="number">200</span>,                       <span class="comment">// 延迟展示 loading (ms)</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">3000</span>                     <span class="comment">// 超时时间</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>应用场景：</strong></p>
<ul>
<li><p>‌<strong>首屏性能优化</strong>‌<br>延迟加载非关键组件，降低初始包体积</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 首屏不加载的模态框</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">LoginModal</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">() =&gt;</span> </span><br><span class="line">  <span class="keyword">import</span>(<span class="string">&#x27;@/components/LoginModal.vue&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>条件渲染组件</strong>‌<br>用户交互后加载特定模块</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">const showChart = ref(false)</span><br><span class="line">const ChartComponent = defineAsyncComponent(() =&gt; </span><br><span class="line">  import(&#x27;./ChartComponent.vue&#x27;)</span><br><span class="line">)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;button @click=&quot;showChart = true&quot;&gt;加载图表&lt;/button&gt;</span><br><span class="line">&lt;ChartComponent v-if=&quot;showChart&quot;/&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>组合式 API 集成</strong>‌<br>在 setup 语法中动态创建异步组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; defineAsyncComponent, ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const tabs = ref([&#x27;Profile&#x27;, &#x27;Settings&#x27;])</span><br><span class="line">const currentTab = ref(&#x27;Profile&#x27;)</span><br><span class="line"></span><br><span class="line">const AsyncTabComponent = defineAsyncComponent(() =&gt;</span><br><span class="line">  import(`./tabs/$&#123;currentTab.value&#125;.vue`)</span><br><span class="line">)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>Suspense 集成</strong>‌<br>实现嵌套异步组件统一加载状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Suspense&gt;</span><br><span class="line">    &lt;template #default&gt;</span><br><span class="line">      &lt;AsyncComponent/&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #fallback&gt;</span><br><span class="line">      &lt;div&gt;Loading...&lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/Suspense&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>完整示例（用户管理系统）</strong></p>
<p>该示例实现：</p>
<ol>
<li>点击触发异步加载</li>
<li>Suspense 统一管理加载状态</li>
<li>5秒超时控制</li>
<li>TypeScript 类型校验</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件 UserManagement.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;showDetail = true&quot;&gt;查看详情&lt;/button&gt;</span><br><span class="line">  &lt;Suspense v-if=&quot;showDetail&quot;&gt;</span><br><span class="line">    &lt;template #default&gt;</span><br><span class="line">      &lt;UserDetail :userId=&quot;selectedId&quot;/&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #fallback&gt;</span><br><span class="line">      &lt;div class=&quot;loading&quot;&gt;加载用户信息中...&lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/Suspense&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; defineAsyncComponent, ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const showDetail = ref(false)</span><br><span class="line">const selectedId = ref(123)</span><br><span class="line"></span><br><span class="line">const UserDetail = defineAsyncComponent(&#123;</span><br><span class="line">  loader: () =&gt; import(&#x27;./UserDetail.vue&#x27;),</span><br><span class="line">  loadingComponent: LoadingSpinner,</span><br><span class="line">  timeout: 5000</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="组件进阶："><a href="#组件进阶：" class="headerlink" title="组件进阶："></a>组件进阶：</h3><h4 id="1-组件注册"><a href="#1-组件注册" class="headerlink" title="1. 组件注册"></a>1. 组件注册</h4><ul>
<li><p>组件名称：全部小写、包含连字符，如：<code>component-name</code></p>
<p>或者首字母大写，如：<code>ComponentName</code></p>
</li>
<li><p>全局注册：</p>
<p><strong>一般</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Vue.createApp(&#123;...&#125;).component(&#x27;my-component-name&#x27;, &#123;</span><br><span class="line">  // ... 选项 ...</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">或者：</span><br><span class="line">const app = Vue.createApp(&#123;&#125;)</span><br><span class="line">app.component(&#x27;component-a&#x27;, &#123;</span><br><span class="line">  /* ... */</span><br><span class="line">&#125;)</span><br><span class="line">app.component(&#x27;component-b&#x27;, &#123;</span><br><span class="line">  /* ... */</span><br><span class="line">&#125;)</span><br><span class="line">app.mount(&#x27;#app&#x27;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;component-a&gt;&lt;/component-a&gt;</span><br><span class="line">  &lt;component-b&gt;&lt;/component-b&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p><strong>脚手架</strong>：</p>
<p><code>src/components/GlobalButton.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button class=&quot;global-button&quot; @click=&quot;$emit(&#x27;click&#x27;)&quot;&gt;</span><br><span class="line">    &lt;slot&gt;默认按钮&lt;/slot&gt;</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>在 <code>src/main.js</code> 中全局注册这个组件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">GlobalButton</span> <span class="keyword">from</span> <span class="string">&#x27;./components/GlobalButton.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局注册组件</span></span><br><span class="line">app.<span class="title function_">component</span>(<span class="string">&#x27;GlobalButton&#x27;</span>, <span class="title class_">GlobalButton</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>在应用的任何地方直接使用 <code>&lt;GlobalButton&gt;</code> 而无需单独导入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;全局组件示例&lt;/h1&gt;</span><br><span class="line">    &lt;GlobalButton @click=&quot;handleClick&quot;&gt;点击我&lt;/GlobalButton&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const handleClick = () =&gt; &#123;</span><br><span class="line">  console.log(&#x27;按钮被点击了&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>局部注册：</p>
<p><strong>一般</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const ComponentA = &#123;</span><br><span class="line">  /* ... */</span><br><span class="line">&#125;</span><br><span class="line">const ComponentB = &#123;</span><br><span class="line">  /* ... */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const app = Vue.createApp(&#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    &#x27;component-a&#x27;: ComponentA,</span><br><span class="line">    &#x27;component-b&#x27;: ComponentB</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>脚手架</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ParentComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;ChildComponent /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">// 局部导入组件</span><br><span class="line">import ChildComponent from &#x27;./ChildComponent.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ChildComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    这是局部子组件内容</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>带<strong>Props</strong>的局部组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ChildComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :style=&quot;&#123; color: textColor &#125;&quot;&gt;</span><br><span class="line">    &#123;&#123; message &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">defineProps(&#123;</span><br><span class="line">  message: String,</span><br><span class="line">  textColor: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    default: &#x27;#333&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ParentComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ChildComponent </span><br><span class="line">    message=&quot;来自父组件的消息&quot; </span><br><span class="line">    text-color=&quot;blue&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>组合式API局部组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- CounterComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;</span><br><span class="line">    点击次数: &#123;&#123; count &#125;&#125;</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const count = ref(0)</span><br><span class="line">const increment = () =&gt; count.value++</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>局部组件注册的替代写法（非<code>&lt;script setup&gt;</code>）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ParentComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;OldStyleComponent /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import OldStyleComponent from &#x27;./OldStyleComponent.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    OldStyleComponent</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h4 id="2-组件Props"><a href="#2-组件Props" class="headerlink" title="2. 组件Props"></a>2. 组件Props</h4><p><strong>子组件<code>ChildComponent.vue</code></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;container&quot;&gt;</span><br><span class="line">    &lt;!-- 基础类型 --&gt;</span><br><span class="line">    &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;数字类型: &#123;&#123; numberValue &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;布尔类型: &#123;&#123; showInfo ? &#x27;显示&#x27; : &#x27;隐藏&#x27; &#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 数组类型 --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;(item, index) in items&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">        &#123;&#123; item &#125;&#125;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 对象类型 --&gt;</span><br><span class="line">    &lt;div v-if=&quot;userConfig&quot;&gt;</span><br><span class="line">      用户: &#123;&#123; userConfig.name &#125;&#125; (&#123;&#123; userConfig.age &#125;&#125;岁)</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 函数类型 --&gt;</span><br><span class="line">    &lt;button @click=&quot;handleAction&quot;&gt;执行函数&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 自定义验证 --&gt;</span><br><span class="line">    &lt;div :class=&quot;[&#x27;status&#x27;, status]&quot;&gt;</span><br><span class="line">      状态: &#123;&#123; status &#125;&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">// ========== JavaScript 写法 ==========</span><br><span class="line">defineProps(&#123;</span><br><span class="line">  // 必填字符串 (kebab-case 转换示例)</span><br><span class="line">  title: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    required: true</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 数字验证 (0-100)</span><br><span class="line">  numberValue: &#123;</span><br><span class="line">    type: Number,</span><br><span class="line">    default: 0,</span><br><span class="line">    validator: value =&gt; value &gt;= 0 &amp;&amp; value &lt;= 100 //:ml-citation&#123;ref=&quot;5,7&quot; data=&quot;citationList&quot;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 布尔类型简写</span><br><span class="line">  showInfo: Boolean,</span><br><span class="line"></span><br><span class="line">  // 数组类型 (带元素类型验证)</span><br><span class="line">  items: &#123;</span><br><span class="line">    type: Array,</span><br><span class="line">    default: () =&gt; [],</span><br><span class="line">    validator: arr =&gt; arr.every(item =&gt; typeof item === &#x27;string&#x27;) //:ml-citation&#123;ref=&quot;4,7&quot; data=&quot;citationList&quot;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 对象类型 (结构化验证)</span><br><span class="line">  userConfig: &#123;</span><br><span class="line">    type: Object,</span><br><span class="line">    default: () =&gt; (&#123;</span><br><span class="line">      name: &#x27;匿名用户&#x27;,</span><br><span class="line">      age: 18</span><br><span class="line">    &#125;),</span><br><span class="line">    validator: obj =&gt; &#x27;name&#x27; in obj &amp;&amp; &#x27;age&#x27; in obj //:ml-citation&#123;ref=&quot;4,7&quot; data=&quot;citationList&quot;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 函数类型</span><br><span class="line">  handleAction: &#123;</span><br><span class="line">    type: Function,</span><br><span class="line">    default: () =&gt; console.log(&#x27;默认操作&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 自定义枚举验证</span><br><span class="line">  status: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    validator: value =&gt; [&#x27;success&#x27;, &#x27;warning&#x27;, &#x27;error&#x27;].includes(value) //:ml-citation&#123;ref=&quot;5,7&quot; data=&quot;citationList&quot;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// ========== TypeScript 写法 ==========</span><br><span class="line">/*</span><br><span class="line">interface Props &#123;</span><br><span class="line">  title: string</span><br><span class="line">  numberValue?: number</span><br><span class="line">  showInfo?: boolean</span><br><span class="line">  items?: string[]</span><br><span class="line">  userConfig?: &#123;</span><br><span class="line">    name: string</span><br><span class="line">    age: number</span><br><span class="line">  &#125;</span><br><span class="line">  handleAction?: () =&gt; void</span><br><span class="line">  status?: &#x27;success&#x27; | &#x27;warning&#x27; | &#x27;error&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const props = withDefaults(defineProps&lt;Props&gt;(), &#123;</span><br><span class="line">  numberValue: 0,</span><br><span class="line">  items: () =&gt; [],</span><br><span class="line">  userConfig: () =&gt; (&#123; name: &#x27;匿名用户&#x27;, age: 18 &#125;),</span><br><span class="line">  handleAction: () =&gt; console.log(&#x27;默认操作&#x27;)</span><br><span class="line">&#125;) //:ml-citation&#123;ref=&quot;2,6&quot; data=&quot;citationList&quot;&#125;</span><br><span class="line">*/</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.status &#123;</span><br><span class="line">  padding: 8px;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">  color: white;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.success &#123; background-color: #67C23A; &#125;</span><br><span class="line">.warning &#123; background-color: #E6A23C; &#125;</span><br><span class="line">.error &#123; background-color: #F56C6C; &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><strong>父组件使用 <code>ParentComponent.vue</code></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ChildComponent</span><br><span class="line">    title=&quot;组件演示&quot;</span><br><span class="line">    :number-value=&quot;75&quot;</span><br><span class="line">    :show-info=&quot;true&quot;</span><br><span class="line">    :items=&quot;[&#x27;苹果&#x27;, &#x27;香蕉&#x27;, &#x27;橙子&#x27;]&quot;</span><br><span class="line">    :user-config=&quot;&#123; name: &#x27;张三&#x27;, age: 25 &#125;&quot;</span><br><span class="line">    status=&quot;warning&quot;</span><br><span class="line">    :handle-action=&quot;customAction&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">// 注意使用 kebab-case 属性命名 (短横线分隔)</span><br><span class="line">const customAction = () =&gt; alert(&#x27;自定义操作触发&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-非Prop的属性"><a href="#3-非Prop的属性" class="headerlink" title="3. 非Prop的属性"></a>3. 非Prop的属性</h4><p>在 Vue 3 中，‌<strong>非 Prop 的 属性</strong>‌ 是指传递给组件但未被组件显式声明为 <code>props</code> 的属性。这些属性默认会被自动应用到组件的根元素上，适用于处理原生 HTML 属性或自定义属性的传递场景。</p>
<p>通过合理利用非 Prop Attribute 机制，可以显著提升组件的灵活性和可复用性，特别是在构建基础组件库时，该特性尤为重要。</p>
<p><strong>使用示例</strong>:</p>
<ul>
<li><p><strong>示例 1：基础用法（自动继承）</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ChildComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;custom-wrapper&quot;&gt;</span><br><span class="line">    &lt;h3&gt;子组件内容&lt;/h3&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件使用 --&gt;</span><br><span class="line">&lt;ChildComponent </span><br><span class="line">  class=&quot;custom-class&quot; </span><br><span class="line">  style=&quot;color: red&quot;</span><br><span class="line">  data-info=&quot;示例数据&quot;</span><br><span class="line">  @click=&quot;handleClick&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<p>‌<strong>渲染结果</strong>‌：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;custom-wrapper custom-class&quot; </span><br><span class="line">     style=&quot;color: red&quot; </span><br><span class="line">     data-info=&quot;示例数据&quot;&gt;</span><br><span class="line">  &lt;h3&gt;子组件内容&lt;/h3&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>示例 2：禁用继承 + 手动绑定</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ChildComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;wrapper&quot;&gt;</span><br><span class="line">    &lt;!-- 将属性绑定到内部元素 --&gt;</span><br><span class="line">    &lt;button v-bind=&quot;$attrs&quot;&gt;操作按钮&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  inheritAttrs: false</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件使用 --&gt;</span><br><span class="line">&lt;ChildComponent </span><br><span class="line">  class=&quot;btn-primary&quot;</span><br><span class="line">  title=&quot;操作提示&quot;</span><br><span class="line">  @click=&quot;handleClick&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<p><strong>渲染结果</strong>‌：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;wrapper&quot;&gt;</span><br><span class="line">  &lt;button class=&quot;btn-primary&quot; title=&quot;操作提示&quot;&gt;操作按钮&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>示例 3：多根组件处理</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- MultiRootComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;header v-bind=&quot;$attrs&quot;&gt;头部&lt;/header&gt;</span><br><span class="line">  &lt;main&gt;主要内容&lt;/main&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  inheritAttrs: false</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件使用 --&gt;</span><br><span class="line">&lt;MultiRootComponent class=&quot;header-class&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p><strong>渲染结果</strong>‌：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;header class=&quot;header-class&quot;&gt;头部&lt;/header&gt;</span><br><span class="line">&lt;main&gt;主要内容&lt;/main&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>关键 API 说明</strong>:</p>
<table>
<thead>
<tr>
<th>API&#x2F;对象</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>$attrs</code></td>
<td>包含所有非 prop 属性（包括 <code>class</code>, <code>style</code>, 事件监听器）的对象</td>
</tr>
<tr>
<td><code>inheritAttrs</code></td>
<td>布尔值，控制是否自动绑定到根元素（默认 <code>true</code>）</td>
</tr>
<tr>
<td><code>v-bind=&quot;$attrs&quot;</code></td>
<td>手动绑定指令，用于精确控制属性位置</td>
</tr>
</tbody></table>
<h4 id="4-组件-自定义事件："><a href="#4-组件-自定义事件：" class="headerlink" title="4. 组件-自定义事件："></a>4. 组件-自定义事件：</h4><ul>
<li><p>‌组件通信机制‌</p>
<p>通过自定义事件实现‌子组件 → 父组件‌的单向数据流，与 props 形成互补的通信方式。</p>
</li>
<li><p>不同于组件和 prop，事件名不存在任何自动化的大小写转换。而是触发的事件名需要完全匹配监听这个事件所用的名称。推荐使用短横线命名（如 <code>update-data</code>）以避免 DOM 模板的大小写转换问题，如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">this.$emit(&#x27;my-event&#x27;)</span><br><span class="line">&lt;!--这个myEvent必须匹配事件名为my-event--&gt;</span><br><span class="line">&lt;my-component @my-event=&quot;doSomething&quot;&gt;&lt;/my-component&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>核心 API</strong>‌</p>
<ul>
<li><p><code>defineEmits()</code>: 声明组件可触发的事件类型</p>
</li>
<li><p><code>emit()</code>: 触发事件并传递数据</p>
<p>使用 <code>$emit</code> 重写原生事件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&quot;$emit(&#x27;custom-click&#x27;, $event)&quot;&gt;</span><br><span class="line">  自定义点击事件</span><br><span class="line">&lt;/button&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>使用</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 ChildComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;handleClick&quot;&gt;发送消息&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const emit = defineEmits([&#x27;message-sent&#x27;])  // 声明事件类型</span><br><span class="line">const handleClick = () =&gt; &#123;</span><br><span class="line">  emit(&#x27;message-sent&#x27;, &#123;  // 触发事件并传递对象参数</span><br><span class="line">    text: &#x27;来自子组件的消息&#x27;,</span><br><span class="line">    timestamp: Date.now()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件 ParentComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ChildComponent @message-sent=&quot;handleMessage&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const handleMessage = (payload) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;收到子组件消息:&#x27;, payload.text)</span><br><span class="line">  // 输出结果: &quot;收到子组件消息: 来自子组件的消息&quot;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="5-插槽slot"><a href="#5-插槽slot" class="headerlink" title="5.插槽slot"></a>5.插槽<code>slot</code></h4><ul>
<li><p>‌<strong>默认插槽</strong></p>
<p>接收父组件未指定名称的内容，使用 <code>&lt;slot&gt;</code> 标签作为内容占位符。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 BaseCard.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;card&quot;&gt;</span><br><span class="line">    &lt;slot&gt;&lt;/slot&gt; &lt;!-- 默认插槽位置 --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件使用 --&gt;</span><br><span class="line">&lt;BaseCard&gt;</span><br><span class="line">  &lt;p&gt;默认插槽内容&lt;/p&gt;</span><br><span class="line">&lt;/BaseCard&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>具名插槽</strong></p>
<p>通过 <code>name</code> 属性定义多内容分发点位，父组件使用 <code>v-slot:name</code> 或 <code>#name</code> 指定内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 Layout.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;slot name=&quot;content&quot;&gt;&lt;/slot&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件使用 --&gt;</span><br><span class="line">&lt;Layout&gt;</span><br><span class="line">  &lt;template #header&gt;</span><br><span class="line">    &lt;h1&gt;标题区域&lt;/h1&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  &lt;template #content&gt;</span><br><span class="line">    &lt;p&gt;正文内容&lt;/p&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/Layout&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>作用域插槽</strong></p>
<p>子组件通过插槽向父组件传递数据，父组件通过 <code>v-slot=&quot;scope&quot;</code> 接收。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 DataTable.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;item in items&quot;&gt;</span><br><span class="line">      &lt;slot :item=&quot;item&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件使用 --&gt;</span><br><span class="line">&lt;DataTable :items=&quot;list&quot;&gt;</span><br><span class="line">  &lt;template #default=&quot;&#123; item &#125;&quot;&gt;</span><br><span class="line">    &lt;span&gt;&#123;&#123; item.name &#125;&#125; (&#123;&#123; item.id &#125;&#125;)&lt;/span&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/DataTable&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>多数据传递</strong>‌<br>子组件可传递多个参数，父组件按需解构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 --&gt;</span><br><span class="line">&lt;slot :data=&quot;data&quot; :index=&quot;index&quot;&gt;&lt;/slot&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template #item=&quot;&#123; data, index &#125;&quot;&gt;</span><br><span class="line">  &#123;&#123; index + 1 &#125;&#125;. &#123;&#123; data.title &#125;&#125;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>方法传递</strong>‌<br>支持传递子组件方法实现跨组件交互</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 FormField.vue --&gt;</span><br><span class="line">&lt;slot :updateValue=&quot;handleUpdate&quot;&gt;&lt;/slot&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件使用 --&gt;</span><br><span class="line">&lt;template #field=&quot;&#123; updateValue &#125;&quot;&gt;</span><br><span class="line">  &lt;input @input=&quot;updateValue($event.target.value)&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>使用示例：（数据表格组件）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 DataGrid.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;table&gt;</span><br><span class="line">    &lt;thead&gt;</span><br><span class="line">      &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/thead&gt;</span><br><span class="line">    &lt;tbody&gt;</span><br><span class="line">      &lt;tr v-for=&quot;(row, index) in data&quot;&gt;</span><br><span class="line">        &lt;slot name=&quot;row&quot; :row=&quot;row&quot; :index=&quot;index&quot;&gt;&lt;/slot&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/tbody&gt;</span><br><span class="line">  &lt;/table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件使用 --&gt;</span><br><span class="line">&lt;DataGrid :data=&quot;users&quot;&gt;</span><br><span class="line">  &lt;template #header&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">      &lt;th&gt;序号&lt;/th&gt;</span><br><span class="line">      &lt;th&gt;姓名&lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">  &lt;template #row=&quot;&#123; row, index &#125;&quot;&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">      &lt;td&gt;&#123;&#123; index + 1 &#125;&#125;&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;&#123;&#123; row.name &#125;&#125;&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/DataGrid&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="6-提供-provide-与注入-inject"><a href="#6-提供-provide-与注入-inject" class="headerlink" title="6. 提供 provide 与注入 inject"></a>6. 提供 provide 与注入 inject</h4><ul>
<li><p>‌<strong>设计目标</strong>‌<br>解决深层嵌套组件间的‌<strong>跨层级数据传递</strong>‌问题，避免逐级透传 props 的繁琐性。</p>
</li>
<li><p>‌<strong>核心 API</strong>‌</p>
<ul>
<li><code>provide(key, value)</code>：在父&#x2F;祖先组件中声明可注入数据</li>
<li><code>inject(key, defaultValue)</code>：在后代组件中获取注入数据</li>
</ul>
</li>
<li><p>‌<strong>响应式机制</strong>‌<br>默认传递静态数据，需配合 <code>ref()</code> 或 <code>reactive()</code> 实现响应式数据传递</p>
</li>
<li><p><strong>用法</strong></p>
<ul>
<li><p><strong>静态数据传递</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 祖先组件 Provider.vue --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; provide &#125; from &#x27;vue&#x27;</span><br><span class="line">provide(&#x27;appTheme&#x27;, &#x27;dark&#x27;) // 提供静态值</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 后代组件 Consumer.vue --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; inject &#125; from &#x27;vue&#x27;</span><br><span class="line">const theme = inject(&#x27;appTheme&#x27;) // 注入值</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>响应式数据传递</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 祖先组件 --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; provide, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const counter = ref(0)</span><br><span class="line">provide(&#x27;globalCounter&#x27;, counter) // 提供响应式对象</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 后代组件 --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const counter = inject(&#x27;globalCounter&#x27;)</span><br><span class="line">const increment = () =&gt; counter.value++</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>方法传递</strong>‌<br>实现跨组件方法调用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 祖先组件 --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const refreshData = () =&gt; &#123; /* 数据刷新逻辑 */ &#125;</span><br><span class="line">provide(&#x27;refresh&#x27;, refreshData)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 后代组件 --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const refresh = inject(&#x27;refresh&#x27;)</span><br><span class="line">&lt;button @click=&quot;refresh&quot;&gt;刷新&lt;/button&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Symbol 键名</strong>‌<br>避免命名冲突</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// symbols.js</span><br><span class="line">export const APP_THEME = Symbol()</span><br><span class="line"></span><br><span class="line">// 提供端</span><br><span class="line">provide(APP_THEME, &#x27;dark&#x27;)</span><br><span class="line"></span><br><span class="line">// 注入端</span><br><span class="line">inject(APP_THEME)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>默认值设置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const theme = inject(&#x27;appTheme&#x27;, &#x27;light&#x27;) // 默认浅色主题</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>示例：（用户管理系统）</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 祖先组件 App.vue --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; provide, reactive &#125; from &#x27;vue&#x27;</span><br><span class="line">import ChildComponent from &#x27;./ChildComponent.vue&#x27;</span><br><span class="line"></span><br><span class="line">const userState = reactive(&#123;</span><br><span class="line">  list: [],</span><br><span class="line">  addUser: (user) =&gt; &#123;</span><br><span class="line">    userState.list.push(user)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">provide(&#x27;userSystem&#x27;, userState) // 提供状态管理系统</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ChildComponent /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 后代组件 ChildComponent.vue --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; inject &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const &#123; list, addUser &#125; = inject(&#x27;userSystem&#x27;)</span><br><span class="line"></span><br><span class="line">const handleSubmit = () =&gt; &#123;</span><br><span class="line">  addUser(&#123; name: &#x27;新用户&#x27;, id: Date.now() &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;user in list&quot; :key=&quot;user.id&quot;&gt;&#123;&#123; user.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">  &lt;button @click=&quot;handleSubmit&quot;&gt;添加用户&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="7-模板引用："><a href="#7-模板引用：" class="headerlink" title="7. 模板引用："></a>7. 模板引用：</h4><ul>
<li><p><strong>基本定义</strong>‌</p>
<p>模板引用通过<code>ref</code>属性直接获取DOM元素或子组件实例，需在<code>setup()</code>中声明同名引用变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input ref=&quot;inputRef&quot; type=&quot;text&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line">const inputRef = ref(null)</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  inputRef.value?.focus() // DOM加载后自动聚焦</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>组件实例引用</strong>‌<br>引用子组件时需使用<code>defineExpose</code>暴露方法或属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ChildComponent.vue --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const sayHello = () =&gt; console.log(&#x27;Hello!&#x27;)</span><br><span class="line">defineExpose(&#123; sayHello &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- ParentComponent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Child ref=&quot;childRef&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const childRef = ref(null)</span><br><span class="line">childRef.value?.sayHello() // 调用子组件方法</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>动态模板引用</strong>‌<br>结合<code>v-for</code>循环动态绑定引用时，需使用函数形式接收元素</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-for=&quot;item in 5&quot; :key=&quot;item&quot;&gt;</span><br><span class="line">    &lt;div :ref=&quot;(el) =&gt; setItemRef(el, item)&quot;&gt;</span><br><span class="line">      &#123;&#123; item &#125;&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const itemRefs = []</span><br><span class="line">const setItemRef = (el, index) =&gt; &#123;</span><br><span class="line">  if (el) itemRefs[index] = el</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>复合类型引用</strong>‌<br>引用多个元素时通过对象结构管理不同实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div ref=&quot;container&quot;&gt;</span><br><span class="line">    &lt;button ref=&quot;submitBtn&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">    &lt;button ref=&quot;cancelBtn&quot;&gt;取消&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const &#123; container, submitBtn, cancelBtn &#125; = &#123;</span><br><span class="line">  container: ref(null),</span><br><span class="line">  submitBtn: ref(null),</span><br><span class="line">  cancelBtn: ref(null)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>组件卸载处理</strong>‌<br>通过<code>watchEffect</code>自动清理引用避免内存泄漏</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vueCopy Code&lt;script setup&gt;</span><br><span class="line">import &#123; watchEffect &#125; from &#x27;vue&#x27;</span><br><span class="line">const dynamicRef = ref(null)</span><br><span class="line"></span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  const node = dynamicRef.value</span><br><span class="line">  if (node) &#123;</span><br><span class="line">    node.addEventListener(&#x27;click&#x27;, handleClick)</span><br><span class="line">    return () =&gt; node.removeEventListener(&#x27;click&#x27;, handleClick)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>TypeScript 类型声明</strong>‌<br>为组件引用声明精确类型保障代码安全</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">typescriptCopy Codeimport type &#123; Ref &#125; from &#x27;vue&#x27;</span><br><span class="line">interface ChildComponentExpose &#123;</span><br><span class="line">  validate: () =&gt; boolean</span><br><span class="line">&#125;</span><br><span class="line">const childRef = ref&lt;Ref&lt;ChildComponentExpose&gt;&gt;(null)</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>注意事项:</strong></p>
<ul>
<li><p>‌<strong>引用时机限制</strong>‌<br>只能在<code>onMounted</code>及之后的生命周期钩子访问引用对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">javascriptCopy CodeonMounted(() =&gt; &#123;</span><br><span class="line">  console.log(inputRef.value) // 正常访问</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>响应式更新机制</strong>‌<br>模板引用不会触发组件重新渲染，与响应式数据解耦</p>
</li>
<li><p>‌<strong>性能优化建议</strong>‌<br>避免高频操作DOM，优先使用数据驱动方案</p>
</li>
</ul>
<p><strong>完整示例（表单验证）：</strong></p>
<p>该示例实现：</p>
<ol>
<li>表单元素直接操作验证</li>
<li>原生DOM方法调用</li>
<li>提交状态控制</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;form @submit.prevent=&quot;handleSubmit&quot;&gt;</span><br><span class="line">    &lt;input ref=&quot;emailInput&quot; type=&quot;email&quot; required&gt;</span><br><span class="line">    &lt;button ref=&quot;submitBtn&quot; type=&quot;submit&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const emailInput = ref(null)</span><br><span class="line">const submitBtn = ref(null)</span><br><span class="line"></span><br><span class="line">const handleSubmit = () =&gt; &#123;</span><br><span class="line">  if (!emailInput.value.checkValidity()) &#123;</span><br><span class="line">    emailInput.value.setCustomValidity(&#x27;请输入有效邮箱&#x27;)</span><br><span class="line">    emailInput.value.reportValidity()</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    submitBtn.value.disabled = true // 禁用提交按钮</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="十一、过渡与动画"><a href="#十一、过渡与动画" class="headerlink" title="十一、过渡与动画"></a>十一、过渡与动画</h2><h3 id="核心组件"><a href="#核心组件" class="headerlink" title="核心组件"></a>核心组件</h3><ul>
<li><p>‌<strong>组件分类</strong>‌</p>
<ul>
<li><code>&lt;transition&gt;</code>：用于单个元素的进入&#x2F;离开过渡</li>
<li><code>&lt;transition-group&gt;</code>：处理列表元素的动态变化（增删&#x2F;顺序调整）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 单个元素 --&gt;</span><br><span class="line">&lt;transition name=&quot;fade&quot;&gt;</span><br><span class="line">  &lt;div v-if=&quot;show&quot;&gt;内容&lt;/div&gt;</span><br><span class="line">&lt;/transition&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 列表元素 --&gt;</span><br><span class="line">&lt;transition-group name=&quot;list&quot; tag=&quot;ul&quot;&gt;</span><br><span class="line">  &lt;li v-for=&quot;item in items&quot; :key=&quot;item.id&quot;&gt;&#123;&#123; item.text &#125;&#125;&lt;/li&gt;</span><br><span class="line">&lt;/transition-group&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>过渡生命周期</strong>‌<br>自动应用 6 个 CSS 类名控制过渡效果：</p>
<ul>
<li><code>v-enter-from</code>：进入动画起始状态</li>
<li><code>v-enter-active</code>：进入动画生效阶段（定义过渡时长&#x2F;曲线）</li>
<li><code>v-enter-to</code>：进入动画结束状态</li>
<li><code>v-leave-from</code>：离开动画起始状态</li>
<li><code>v-leave-active</code>：离开动画生效阶段</li>
<li><code>v-leave-to</code>：离开动画结束状态</li>
</ul>
</li>
</ul>
<h3 id="基础实现"><a href="#基础实现" class="headerlink" title="基础实现"></a>基础实现</h3><ul>
<li><p>‌<strong>CSS 过渡</strong>‌<br>通过 CSS 属性实现平滑状态切换：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">.fade-enter-active, .fade-leave-active &#123;</span><br><span class="line">  transition: opacity 0.5s ease;</span><br><span class="line">&#125;</span><br><span class="line">.fade-enter-from, .fade-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>CSS 动画</strong>‌<br>使用 <code>@keyframes</code> 定义复杂动画效果：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.bounce-enter-active</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: bounce-in <span class="number">0.5s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.bounce-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: bounce-in <span class="number">0.5s</span> reverse;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> bounce-in &#123;</span><br><span class="line">  <span class="number">0%</span> &#123; <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0</span>) &#125;</span><br><span class="line">  <span class="number">50%</span> &#123; <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.25</span>) &#125;</span><br><span class="line">  <span class="number">100%</span> &#123; <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>) &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="高级功能"><a href="#高级功能" class="headerlink" title="高级功能"></a>高级功能</h3><ul>
<li><p>‌<strong>JavaScript 钩子</strong>‌<br>通过生命周期钩子实现脚本控制动画：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition</span><br><span class="line">  @before-enter=&quot;onBeforeEnter&quot;</span><br><span class="line">  @enter=&quot;onEnter&quot;</span><br><span class="line">  @after-enter=&quot;onAfterEnter&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &lt;div v-if=&quot;show&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/transition&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const onEnter = (el, done) =&gt; &#123;</span><br><span class="line">  el.style.opacity = 0</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    el.style.opacity = 1</span><br><span class="line">    done() // 必须调用以结束过渡</span><br><span class="line">  &#125;, 1000)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>第三方动画库集成</strong>‌<br>结合 <code>animate.css</code> 快速实现预置动画：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition</span><br><span class="line">  enter-active-class=&quot;animate__animated animate__fadeInDown&quot;</span><br><span class="line">  leave-active-class=&quot;animate__animated animate__fadeOutUp&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &lt;div v-if=&quot;show&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="特殊场景"><a href="#特殊场景" class="headerlink" title="特殊场景"></a>特殊场景</h3><ul>
<li><p>‌<strong>列表动画</strong>‌<br>使用 <code>&lt;transition-group&gt;</code> 时需为每个元素设置唯一 <code>key</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vueCopy Code&lt;transition-group name=&quot;list&quot;&gt;</span><br><span class="line">  &lt;div </span><br><span class="line">    v-for=&quot;item in items&quot; </span><br><span class="line">    :key=&quot;item.id&quot;</span><br><span class="line">    class=&quot;list-item&quot;</span><br><span class="line">  &gt;&#123;&#123; item.text &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/transition-group&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.list-move &#123; /* 列表顺序变化动画 */</span><br><span class="line">  transition: transform 0.8s ease;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>动态过渡</strong>‌<br>根据状态切换不同动画效果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vueCopy Code&lt;transition :name=&quot;isError ? &#x27;shake&#x27; : &#x27;fade&#x27;&quot;&gt;</span><br><span class="line">  &lt;div v-if=&quot;show&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h3><ul>
<li><p>‌<strong>性能优化</strong>‌</p>
<ul>
<li>优先使用 CSS 动画（浏览器硬件加速优化）</li>
<li>避免在过渡中操作大量 DOM 元素</li>
</ul>
</li>
<li><p>‌<strong>初始渲染过渡</strong>‌<br>通过 <code>appear</code> 属性启用页面加载时的初始动画：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vueCopy Code&lt;transition appear&gt;</span><br><span class="line">  &lt;div&gt;首次加载动画&lt;/div&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>组件根元素过渡</strong>‌<br>直接为组件根元素添加过渡效果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vueCopy Code&lt;transition name=&quot;slide&quot;&gt;</span><br><span class="line">  &lt;MyComponent v-if=&quot;show&quot; /&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="综合示例（购物车动画）"><a href="#综合示例（购物车动画）" class="headerlink" title="综合示例（购物车动画）"></a>综合示例（购物车动画）</h3><p>该示例实现：</p>
<ol>
<li>商品添加时的右滑进入动画</li>
<li>删除时的上滑消失动画</li>
<li>自动处理列表位置调整过渡</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;addItem&quot;&gt;添加商品&lt;/button&gt;</span><br><span class="line">  &lt;transition-group name=&quot;cart&quot; tag=&quot;ul&quot;&gt;</span><br><span class="line">    &lt;li </span><br><span class="line">      v-for=&quot;item in cartItems&quot; </span><br><span class="line">      :key=&quot;item.id&quot;</span><br><span class="line">      class=&quot;cart-item&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &#123;&#123; item.name &#125;&#125;</span><br><span class="line">      &lt;button @click=&quot;removeItem(item.id)&quot;&gt;×&lt;/button&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/transition-group&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.cart-item &#123;</span><br><span class="line">  transition: all 0.5s ease;</span><br><span class="line">&#125;</span><br><span class="line">.cart-enter-from &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translateX(30px);</span><br><span class="line">&#125;</span><br><span class="line">.cart-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translateY(-20px);</span><br><span class="line">&#125;</span><br><span class="line">.cart-leave-active &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="十二、Vue3-响应性（及时变化）"><a href="#十二、Vue3-响应性（及时变化）" class="headerlink" title="十二、Vue3 响应性（及时变化）"></a>十二、Vue3 响应性（及时变化）</h2><p><font color="red">这玩意图的就是动态更新，比如说 a+b&#x3D;c，当 a 变化，c 自动跟随变化，不需要手动干预</font></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="title function_">ref</span>(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">const</span> b = <span class="title function_">ref</span>(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">const</span> c = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> a.<span class="property">value</span> + b.<span class="property">value</span>) <span class="comment">// c=3</span></span><br><span class="line"><span class="comment">//当修改 a.value = 5 时，c 自动变为 7，无需手动干预</span></span><br></pre></td></tr></table></figure>

<p>应用场景：购物车总价计算</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input type=&quot;number&quot; v-model.number=&quot;price&quot;&gt; 单价</span><br><span class="line">  &lt;input type=&quot;number&quot; v-model.number=&quot;quantity&quot;&gt; 数量</span><br><span class="line">  &lt;p&gt;总价: &#123;&#123; total &#125;&#125;&lt;/p&gt; &lt;!-- 当 price 或 quantity 变化时，total 自动更新 --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, computed &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const price = ref(10)    // 单价</span><br><span class="line">const quantity = ref(2) // 数量</span><br><span class="line">const total = computed(() =&gt; price.value * quantity.value) // 总价自动计算</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>Vue3 使用 ES6 的<code>Proxy</code> 和 <code>Reflect</code> API 实现响应式系统</p>
<p><strong>优势</strong>：支持动态新增&#x2F;删除属性自动触发更新，直接通过下标修改数组元素可触发响应。</p>
<p><strong>原理</strong>‌：通过<code>Proxy</code> 对象拦截 <code>get</code>、<code>set</code>、<code>deleteProperty</code> 等操作，实现细粒度依赖追踪</p>
<p><strong>响应式流程</strong>‌</p>
<ul>
<li>数据变化 → 触发 <code>Proxy</code> 的 <code>set</code> 拦截 → 通知依赖更新 → 重新渲染视图。</li>
<li>深度响应式：<code>reactive</code> 会递归代理对象的所有嵌套属性。</li>
</ul>
<p>‌<strong>依赖收集与触发更新</strong>‌</p>
<ul>
<li>‌<strong>依赖收集</strong>‌：在数据读取时，通过 <code>track()</code> 函数记录当前正在执行的副作用函数（如模板渲染、计算属性等）；</li>
<li>‌<strong>触发更新</strong>‌：在数据修改时，通过 <code>trigger()</code> 函数通知所有关联的副作用函数重新执行，驱动视图更新。</li>
</ul>
<p><strong>核心 API 解析：</strong></p>
<table>
<thead>
<tr>
<th>‌<strong>API</strong>‌</th>
<th>‌<strong>设计目的</strong>‌</th>
<th>‌<strong>特性</strong>‌</th>
<th>‌<strong>示例</strong>‌</th>
</tr>
</thead>
<tbody><tr>
<td><code>reactive</code></td>
<td>创建深度响应式<strong>对象&#x2F;数组</strong></td>
<td>递归代理所有嵌套属性，自动追踪深层变化</td>
<td><code>const obj = reactive(&#123; a: 1 &#125;)</code></td>
</tr>
<tr>
<td><code>ref</code></td>
<td>包装**基本类型（数字、字符串）**或复杂对象引用</td>
<td>通过 <code>.value</code> 访问值，自动解包（模板中无需 <code>.value</code>）</td>
<td><code>const count = ref(0)</code></td>
</tr>
<tr>
<td><code>shallowRef</code></td>
<td>仅包装顶层引用</td>
<td>不追踪内部属性变化，适用于大对象性能优化</td>
<td><code>const data = shallowRef(&#123; list: [...] &#125;)</code></td>
</tr>
<tr>
<td><code>markRaw</code></td>
<td>标记对象为非响应式</td>
<td>跳过代理转换，避免不必要的性能消耗</td>
<td><code>markRaw(largeStaticData)</code></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>‌<strong>特性</strong>‌</td>
<td>‌<strong>Vue 2.x</strong>‌</td>
<td>‌<strong>Vue 3.0</strong>‌</td>
</tr>
<tr>
<td>‌<strong>响应式实现</strong>‌</td>
<td><code>Object.defineProperty</code></td>
<td><code>Proxy</code>（全量拦截）</td>
</tr>
<tr>
<td>‌<strong>动态属性支持</strong>‌</td>
<td>需手动调用 API</td>
<td>自动触发更新</td>
</tr>
<tr>
<td>‌<strong>数组操作支持</strong>‌</td>
<td>仅拦截部分方法（如 <code>push</code>）</td>
<td>支持所有操作（包括下标修改）</td>
</tr>
<tr>
<td>‌<strong>性能优化</strong>‌</td>
<td>全量递归监听</td>
<td>按需追踪依赖，减少内存占用</td>
</tr>
</tbody></table>
<h3 id="响应式系统工作流程："><a href="#响应式系统工作流程：" class="headerlink" title="响应式系统工作流程："></a>响应式系统工作流程：</h3><ol>
<li><p>‌<strong>初始化阶段</strong>‌</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123; <span class="attr">count</span>: <span class="number">0</span> &#125;); <span class="comment">// 代理对象生成</span></span><br><span class="line"><span class="title function_">effect</span>(<span class="function">() =&gt;</span> &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(state.<span class="property">count</span>) &#125;); <span class="comment">// 副作用注册</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>reactive()</code> 将对象转换为 <code>Proxy</code> 代理；</li>
<li><code>effect()</code> 执行时触发 <code>get</code> 拦截，完成依赖收集。</li>
</ul>
</li>
<li><p>‌<strong>更新阶段</strong>‌</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">state.<span class="property">count</span>++; <span class="comment">// 触发 set 拦截</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>Proxy</code> 拦截 <code>set</code> 操作，调用 <code>trigger()</code> 触发所有关联副作用；</li>
<li>视图或计算属性基于最新数据重新渲染。</li>
</ul>
</li>
</ol>
<h3 id="性能优化实践："><a href="#性能优化实践：" class="headerlink" title="性能优化实践："></a>性能优化实践：</h3><ol>
<li><p>避免过度深度监听‌</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> shallowObj = <span class="title function_">shallowReactive</span>(&#123; <span class="attr">nested</span>: &#123; <span class="attr">data</span>: [...] &#125; &#125;); <span class="comment">// 仅顶层响应</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用 <code>shallowReactive</code> 或 <code>shallowRef</code> 减少递归监听开销；</li>
</ul>
</li>
<li><p>‌<strong>静态数据标记</strong>‌</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config = <span class="title function_">markRaw</span>(&#123; <span class="attr">size</span>: <span class="number">100</span> &#125;); <span class="comment">// 跳过代理转换</span></span><br></pre></td></tr></table></figure>

<ul>
<li>对高频访问但无需响应的数据标记为 <code>markRaw</code>，提升访问速度；</li>
</ul>
</li>
<li><p>‌<strong>响应式与非响应式数据分离</strong>‌</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> staticData = &#123; <span class="comment">/* 非响应数据 */</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> reactiveData = <span class="title function_">reactive</span>(&#123; <span class="comment">/* 响应数据 */</span> &#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>减少不必要的依赖追踪。</li>
</ul>
</li>
</ol>
<h3 id="典型场景示例："><a href="#典型场景示例：" class="headerlink" title="典型场景示例："></a>典型场景示例：</h3><p>‌<strong>动态添加响应式属性</strong>‌</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;&#125;);</span><br><span class="line">state.<span class="property">newProp</span> = <span class="string">&quot;value&quot;</span>; <span class="comment">// 自动触发更新</span></span><br></pre></td></tr></table></figure>

<h3 id="示例代码："><a href="#示例代码：" class="headerlink" title="示例代码："></a>示例代码：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 基础数据绑定 --&gt;</span><br><span class="line">  &lt;div :class=&quot;[&#x27;container&#x27;, `theme-$&#123;user.preferences.theme&#125;`]&quot;&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; props.initialTitle &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 事件处理 --&gt;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;点击计数: &#123;&#123; counter &#125;&#125;&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeTheme&quot;&gt;切换主题&lt;/button&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 条件渲染 --&gt;</span><br><span class="line">    &lt;p v-if=&quot;isAdult&quot;&gt;成年用户&lt;/p&gt;</span><br><span class="line">    &lt;p v-else&gt;未成年用户&lt;/p&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 表单双向绑定 --&gt;</span><br><span class="line">    &lt;input v-model=&quot;user.name&quot; placeholder=&quot;输入用户名&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;number&quot; v-model.number=&quot;user.age&quot;&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 自定义组件通信 --&gt;</span><br><span class="line">    &lt;button @click=&quot;updateTitle&quot;&gt;更新标题&lt;/button&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 列表渲染 --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;n in 5&quot; :key=&quot;n&quot;&gt;项目 &#123;&#123; n &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 样式绑定 --&gt;</span><br><span class="line">    &lt;p :style=&quot;&#123; fontSize: user.preferences.fontSize + &#x27;px&#x27; &#125;&quot;&gt;可调节字号&lt;/p&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 自定义Hook使用 --&gt;</span><br><span class="line">    &lt;form @submit.prevent=&quot;resetForm&quot;&gt;</span><br><span class="line">      &lt;input v-model=&quot;formData.username&quot; placeholder=&quot;用户名&quot;&gt;</span><br><span class="line">      &lt;input v-model=&quot;formData.password&quot; type=&quot;password&quot; placeholder=&quot;密码&quot;&gt;</span><br><span class="line">      &lt;button type=&quot;submit&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">/* ✅ 响应式核心 API 导入 */</span><br><span class="line">import &#123; ref, reactive, computed, watch, watchEffect, onMounted, provide &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">/* 🛠️ 场景1：基础响应式数据 */</span><br><span class="line">// 用 ref 处理基本类型</span><br><span class="line">const counter = ref(0)</span><br><span class="line">// 用 reactive 处理对象类型</span><br><span class="line">const user = reactive(&#123;</span><br><span class="line">  name: &#x27;张三&#x27;,</span><br><span class="line">  age: 25,</span><br><span class="line">  preferences: &#123;</span><br><span class="line">    theme: &#x27;dark&#x27;,</span><br><span class="line">    fontSize: 14</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">/* 🛠️ 场景2：计算属性 */</span><br><span class="line">const isAdult = computed(() =&gt; user.age &gt;= 18)</span><br><span class="line"></span><br><span class="line">/* 🛠️ 场景3：方法 */</span><br><span class="line">// 修改 ref 需要 .value</span><br><span class="line">const increment = () =&gt; counter.value++  </span><br><span class="line">// 修改 reactive 对象直接赋值</span><br><span class="line">const changeTheme = () =&gt; &#123;</span><br><span class="line">  user.preferences.theme = user.preferences.theme === &#x27;dark&#x27; ? &#x27;light&#x27; : &#x27;dark&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 🛠️ 场景4：监听器 */</span><br><span class="line">// 监听单个 ref 的变化</span><br><span class="line">watch(counter, (newVal, oldVal) =&gt; &#123;</span><br><span class="line">  console.log(`计数器从 $&#123;oldVal&#125; 变为 $&#123;newVal&#125;`)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 深度监听对象</span><br><span class="line">watch(</span><br><span class="line">  () =&gt; user.preferences,</span><br><span class="line">  (newPref) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;主题变化:&#x27;, newPref.theme)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; deep: true &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">// 立即执行的 watchEffect</span><br><span class="line">watchEffect(() =&gt; &#123;</span><br><span class="line">  document.title = `计数器: $&#123;counter.value&#125;`</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">/* 🛠️ 场景5：生命周期 */</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;组件已挂载&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">/* 🛠️ 场景6：组件通信 */</span><br><span class="line">// 接收 props</span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  initialTitle: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    default: &#x27;默认标题&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 定义 emits</span><br><span class="line">const emit = defineEmits([&#x27;titleChange&#x27;])</span><br><span class="line">const updateTitle = () =&gt; &#123;</span><br><span class="line">  emit(&#x27;titleChange&#x27;, &#x27;新标题-&#x27; + Date.now())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 🛠️ 场景7：依赖注入 */</span><br><span class="line">// 提供全局配置</span><br><span class="line">provide(&#x27;appConfig&#x27;, &#123;</span><br><span class="line">  apiBaseUrl: &#x27;https://api.example.com&#x27;,</span><br><span class="line">  maxItems: 100</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">/* 🛠️ 场景8：自定义Hook示例 */</span><br><span class="line">// 自动重置的表单逻辑复用</span><br><span class="line">function useAutoResetForm(initialValue) &#123;</span><br><span class="line">  const formData = reactive(&#123; ...initialValue &#125;)</span><br><span class="line">  const resetForm = () =&gt; Object.assign(formData, initialValue)</span><br><span class="line">  </span><br><span class="line">  return &#123;</span><br><span class="line">    formData,</span><br><span class="line">    resetForm</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 使用Hook</span><br><span class="line">const &#123; formData, resetForm &#125; = useAutoResetForm(&#123;</span><br><span class="line">  username: &#x27;&#x27;,</span><br><span class="line">  password: &#x27;&#x27;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.container &#123;</span><br><span class="line">  padding: 20px;</span><br><span class="line">&#125;</span><br><span class="line">.theme-dark &#123;</span><br><span class="line">  background: #333;</span><br><span class="line">  color: white;</span><br><span class="line">&#125;</span><br><span class="line">.theme-light &#123;</span><br><span class="line">  background: #fff;</span><br><span class="line">  color: #333;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="主要功能说明："><a href="#主要功能说明：" class="headerlink" title="主要功能说明："></a>主要功能说明：</h4><ol>
<li>‌<strong>响应式数据管理</strong>‌<ul>
<li><code>ref</code> 处理基本类型数据</li>
<li><code>reactive</code> 处理对象类型数据</li>
<li>嵌套对象修改的正确姿势</li>
</ul>
</li>
<li>‌<strong>计算属性</strong>‌<ul>
<li>根据用户年龄判断是否成年</li>
</ul>
</li>
<li>‌<strong>方法交互</strong>‌<ul>
<li>计数器增减</li>
<li>主题切换</li>
</ul>
</li>
<li>‌<strong>监听系统</strong>‌<ul>
<li><code>watch</code> 监听特定值变化</li>
<li><code>watchEffect</code> 自动追踪依赖</li>
<li>深度监听对象属性</li>
</ul>
</li>
<li>‌<strong>生命周期</strong>‌<ul>
<li>使用 <code>onMounted</code> 执行初始化操作</li>
</ul>
</li>
<li>‌<strong>组件通信</strong>‌<ul>
<li><code>defineProps</code> 接收父组件参数</li>
<li><code>defineEmits</code> 触发父组件事件</li>
</ul>
</li>
<li>‌<strong>依赖注入</strong>‌<ul>
<li>使用 <code>provide</code> 实现跨组件数据传递</li>
</ul>
</li>
<li>‌<strong>逻辑复用</strong>‌<ul>
<li>封装 <code>useAutoResetForm</code> 自定义 Hook</li>
</ul>
</li>
<li>‌<strong>模板特性</strong>‌<ul>
<li>条件渲染 (<code>v-if</code>&#x2F;<code>v-else</code>)</li>
<li>列表渲染 (<code>v-for</code>)</li>
<li>事件修饰符 (<code>.prevent</code>)</li>
<li>样式绑定 (<code>:class</code>, <code>:style</code>)</li>
</ul>
</li>
<li>‌<strong>样式作用域</strong>‌<ul>
<li>使用 <code>scoped</code> 实现组件样式隔离</li>
</ul>
</li>
</ol>
<h2 id="十三、Vue3-组合式API（Composition-API）"><a href="#十三、Vue3-组合式API（Composition-API）" class="headerlink" title="十三、Vue3 组合式API（Composition API）"></a>十三、Vue3 组合式API（Composition API）</h2><h3 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念 &lt;script setup&gt;"></a>核心概念 <code>&lt;script setup&gt;</code></h3><ol>
<li><p>‌**<code>setup</code> 函数**‌<br>组合式 API 的入口函数，用于定义组件逻辑，替代 Vue 2 的 <code>data</code>、<code>methods</code> 等选项。</p>
<ul>
<li><p>‌特性：</p>
<ul>
<li>在组件实例创建前执行，无 <code>this</code> 上下文；</li>
<li>返回对象中的属性和方法可直接在模板中使用。</li>
</ul>
</li>
<li><p>‌示例‌：</p>
<p><strong>传统 <code>setup()</code> 函数</strong>‌<br>需 <code>return</code> 响应式变量（如 <code>ref</code>&#x2F;<code>reactive</code>）才能让模板访问并实现数据绑定</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>);<span class="comment">// 使用 ref 创建响应式变量</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; count.<span class="property">value</span>++;</span><br><span class="line">    <span class="keyword">return</span> &#123; count, increment &#125;; <span class="comment">// 必须返回变量才能在模板中使用</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><font color="red"><strong>简化后：</strong></font></p>
<p><code>&lt;script setup&gt;</code><strong>语法</strong>‌<br>自动暴露顶层变量（包括 <code>ref</code>&#x2F;<code>reactive</code> 数据），但仍需显式声明响应式数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// ✅ 使用 ref 创建响应式变量（自动暴露到模板）</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;;</span><br><span class="line">const count = ref(0);</span><br><span class="line">const increment = () =&gt; count.value++; // JS 中需用 .value</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>&lt;script setup&gt;</code>通过以下优化大幅提升开发效率：</p>
<ul>
<li>‌<strong>自动变量暴露</strong>‌：顶层变量自动暴露到模板，无需 <code>return</code> 语句；</li>
<li>‌<strong>语法简洁性</strong>‌：减少样板代码，专注核心逻辑；</li>
<li>‌<strong>更好的 TypeScript 支持</strong>‌：类型推导更精准。</li>
</ul>
</li>
</ul>
</li>
<li><p>‌<strong>响应式数据</strong>‌</p>
<ul>
<li><p>‌<code>ref</code>：适用于基本类型或对象引用，通过 <code>.value</code> 访问&#x2F;修改值（模板中可省略）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = <span class="title function_">ref</span>(<span class="number">0</span>);  <span class="comment">// JS 中通过 num.value 操作</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<code>reactive</code>：深度代理对象&#x2F;数组，直接操作属性触发更新</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;);</span><br><span class="line">state.<span class="property">age</span>++;  <span class="comment">// 直接修改属性</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="逻辑复用与模块化"><a href="#逻辑复用与模块化" class="headerlink" title="逻辑复用与模块化"></a>逻辑复用与模块化</h3><ol>
<li><p>‌<strong>自定义组合函数</strong>‌<br>将逻辑封装为函数，实现跨组件复用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// useCounter.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useCounter</span>(<span class="params">initialValue = <span class="number">0</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> count = <span class="title function_">ref</span>(initialValue);</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; count.<span class="property">value</span>++;</span><br><span class="line">  <span class="keyword">return</span> &#123; count, increment &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 组件中使用</span></span><br><span class="line"><span class="keyword">import</span> &#123; useCounter &#125; <span class="keyword">from</span> <span class="string">&#x27;./useCounter&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; count, increment &#125; = <span class="title function_">useCounter</span>();</span><br><span class="line">    <span class="keyword">return</span> &#123; count, increment &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>生命周期钩子</strong>‌<br>使用 <code>onMounted</code>、<code>onUpdated</code> 等函数管理生命周期：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onMounted, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="title function_">ref</span>(<span class="literal">null</span>);</span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">fetchData</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> data.<span class="property">value</span> = res);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> &#123; data &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="与选项式-API-对比"><a href="#与选项式-API-对比" class="headerlink" title="与选项式 API 对比"></a>与选项式 API 对比</h3><table>
<thead>
<tr>
<th>‌<strong>特性</strong>‌</th>
<th>‌<strong>选项式 API</strong>‌</th>
<th>‌<strong>组合式 API</strong>‌</th>
</tr>
</thead>
<tbody><tr>
<td>‌<strong>代码组织</strong>‌</td>
<td>按选项（data、methods）分割</td>
<td>按逻辑功能聚合</td>
</tr>
<tr>
<td>‌<strong>逻辑复用</strong>‌</td>
<td>依赖 Mixins（易命名冲突）</td>
<td>自定义组合函数（高灵活性）</td>
</tr>
<tr>
<td>‌<strong>TypeScript 支持</strong>‌</td>
<td>类型推导受限</td>
<td>完整类型推断</td>
</tr>
</tbody></table>
<h3 id="组合式-API-钩子函数："><a href="#组合式-API-钩子函数：" class="headerlink" title="组合式 API 钩子函数："></a>组合式 API 钩子函数：</h3><table>
<thead>
<tr>
<th><strong>组合式 API 钩子</strong>‌</th>
<th>‌<strong>对应选项式 API</strong>‌</th>
<th>‌<strong>触发时机</strong>‌</th>
<th>‌<strong>常见用途</strong>‌</th>
</tr>
</thead>
<tbody><tr>
<td><code>onBeforeMount()</code></td>
<td><code>beforeMount</code></td>
<td>组件挂载到 DOM 前调用</td>
<td>执行与 DOM 无关的初始化操作（此时无法访问 DOM 元素）</td>
</tr>
<tr>
<td><code>onMounted()</code></td>
<td><code>mounted</code></td>
<td>组件首次完成 DOM 渲染后调用</td>
<td>DOM 操作、数据请求、定时器启动等副作用操作</td>
</tr>
<tr>
<td><code>onBeforeUpdate()</code></td>
<td><code>beforeUpdate</code></td>
<td>响应式数据变化导致 DOM 更新前调用</td>
<td>获取更新前的 DOM 状态（如滚动位置记录）</td>
</tr>
<tr>
<td><code>onUpdated()</code></td>
<td><code>updated</code></td>
<td>组件 DOM 完成更新后调用</td>
<td>执行依赖更新后 DOM 的操作（需注意避免无限循环）</td>
</tr>
<tr>
<td><code>onBeforeUnmount()</code></td>
<td><code>beforeUnmount</code></td>
<td>组件实例卸载前调用</td>
<td>清理定时器、取消事件监听、释放内存等收尾工作</td>
</tr>
<tr>
<td><code>onUnmounted()</code></td>
<td><code>unmounted</code></td>
<td>组件实例完全卸载后调用</td>
<td>执行最终资源释放（如断开 WebSocket 连接）</td>
</tr>
<tr>
<td><code>onErrorCaptured()</code></td>
<td><code>errorCaptured</code></td>
<td>捕获后代组件传递的错误时调用</td>
<td>全局错误处理（如错误日志上报）</td>
</tr>
<tr>
<td><code>onActivated()</code></td>
<td><code>activated</code></td>
<td>被 <code>&lt;keep-alive&gt;</code> 缓存的组件激活时调用</td>
<td>恢复组件状态（如重新加载数据）</td>
</tr>
<tr>
<td><code>onDeactivated()</code></td>
<td><code>deactivated</code></td>
<td>被 <code>&lt;keep-alive&gt;</code> 缓存的组件失活时调用</td>
<td>保存组件状态（如暂停视频播放）</td>
</tr>
<tr>
<td><code>onServerPrefetch()</code></td>
<td>无</td>
<td>服务端渲染时在组件实例创建后调用</td>
<td>预取服务端数据（SSR 专用）</td>
</tr>
</tbody></table>
<h4 id="使用特点说明："><a href="#使用特点说明：" class="headerlink" title="使用特点说明："></a>使用特点说明：</h4><ol>
<li><p>‌<strong>执行顺序</strong>‌</p>
<ul>
<li>组合式 API 钩子按代码编写顺序同步执行（多个同类型钩子按顺序触发）</li>
<li>组合式钩子先于选项式钩子执行（如 <code>onMounted()</code> 早于 <code>mounted</code>）</li>
</ul>
</li>
<li><p><strong>特殊场景</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="comment">// 示例：同时使用多个同类型钩子</span></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;钩子1&#x27;</span>) &#125;)  </span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;钩子2&#x27;</span>) &#125;) <span class="comment">// 按顺序输出 1 → 2</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌<strong>注意事项</strong>‌</p>
<ul>
<li>避免在 <code>onUpdated</code> 中修改响应式数据，可能导致无限更新循环</li>
<li>服务端渲染时 <code>onMounted</code> 等客户端钩子不会执行，需使用 <code>onServerPrefetch</code></li>
</ul>
</li>
<li><p><strong>生命周期图示简化版</strong>：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">创建实例 → onBeforeMount → 渲染DOM → onMounted → 数据更新 → onBeforeUpdate → 重新渲染 → onUpdated → 组件销毁 → onBeforeUnmount → 卸载DOM → onUnmounted</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="完整示例代码"><a href="#完整示例代码" class="headerlink" title="完整示例代码"></a>完整示例代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; user.name &#125;&#125; - &#123;&#123; user.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;p&gt;计数: &#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;updateUser&quot;&gt;更新用户&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, reactive, onMounted &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">// 响应式数据</span><br><span class="line">const count = ref(0);</span><br><span class="line">const user = reactive(&#123; name: &#x27;Alice&#x27;, age: 25 &#125;);</span><br><span class="line"></span><br><span class="line">// 方法</span><br><span class="line">const increment = () =&gt; count.value++;</span><br><span class="line">const updateUser = () =&gt; &#123;</span><br><span class="line">  user.age += 1;</span><br><span class="line">  user.name = &#x27;Bob&#x27;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// 生命周期钩子</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;组件已挂载&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h3><ul>
<li>‌<strong>大型项目</strong>‌：逻辑复杂需模块化拆分时；</li>
<li>‌<strong>逻辑复用</strong>‌：跨组件共享功能（如表单验证、数据请求）；</li>
<li>‌<strong>TypeScript 项目</strong>‌：类型安全与推导需求高时。</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>组合式 API 通过 <code>setup</code> 函数和响应式 API（<code>ref</code>&#x2F;<code>reactive</code>）实现逻辑的灵活组织与复用，尤其适合中大型项目及 TypeScript 开发场景。通过自定义组合函数，可显著提升代码的可维护性和复用性。</p>
<h2 id="十四、Vue3-搭配-TypeScript"><a href="#十四、Vue3-搭配-TypeScript" class="headerlink" title="十四、Vue3 搭配 TypeScript"></a>十四、Vue3 搭配 TypeScript</h2><h3 id="Vue-config-js"><a href="#Vue-config-js" class="headerlink" title="Vue.config.js"></a><code>Vue.config.js</code></h3><h4 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h4><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">my-vue3-ts-project/</span><br><span class="line">├── src/</span><br><span class="line">│   ├── components/</span><br><span class="line">│   │   └── UserList.vue</span><br><span class="line">│   ├── types/</span><br><span class="line">│   │   └── user.d.ts</span><br><span class="line">│   ├── App.vue</span><br><span class="line">│   ├── main.ts</span><br><span class="line">│   └── shims-vue.d.ts</span><br><span class="line">├── vue.config.js</span><br><span class="line">├── tsconfig.json</span><br><span class="line">└── package.json</span><br></pre></td></tr></table></figure>

<h4 id="1-关键配置文件-vue-config-js"><a href="#1-关键配置文件-vue-config-js" class="headerlink" title="1. 关键配置文件 (vue.config.js)"></a>1. 关键配置文件 (vue.config.js)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">transpileDependencies</span>: <span class="literal">true</span>,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// TypeScript 相关配置</span></span><br><span class="line">  <span class="attr">configureWebpack</span>: &#123;</span><br><span class="line">    <span class="attr">resolve</span>: &#123;</span><br><span class="line">      <span class="attr">extensions</span>: [<span class="string">&#x27;.ts&#x27;</span>, <span class="string">&#x27;.tsx&#x27;</span>, <span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.vue&#x27;</span>],</span><br><span class="line">      <span class="attr">alias</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;@&#x27;</span>: path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;src&#x27;</span>) <span class="comment">// 路径别名</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">chainWebpack</span>: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// TypeScript loader 配置</span></span><br><span class="line">    config.<span class="property">module</span></span><br><span class="line">      .<span class="title function_">rule</span>(<span class="string">&#x27;ts&#x27;</span>)</span><br><span class="line">      .<span class="title function_">test</span>(<span class="regexp">/\.tsx?$/</span>)</span><br><span class="line">      .<span class="title function_">use</span>(<span class="string">&#x27;ts-loader&#x27;</span>)</span><br><span class="line">      .<span class="title function_">loader</span>(<span class="string">&#x27;ts-loader&#x27;</span>)</span><br><span class="line">      .<span class="title function_">options</span>(&#123;</span><br><span class="line">        <span class="attr">appendTsSuffixTo</span>: [<span class="regexp">/\.vue$/</span>],</span><br><span class="line">        <span class="attr">transpileOnly</span>: <span class="literal">true</span> <span class="comment">// 提升编译速度</span></span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="2-TypeScript-配置-tsconfig-json"><a href="#2-TypeScript-配置-tsconfig-json" class="headerlink" title="2. TypeScript 配置 (tsconfig.json)"></a>2. TypeScript 配置 (tsconfig.json)</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;esnext&quot;</span><span class="punctuation">,</span>	<span class="comment">// 编译目标版本</span></span><br><span class="line">    <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;esnext&quot;</span><span class="punctuation">,</span>	<span class="comment">// 模块系统</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span>		<span class="comment">// 启用严格类型检查</span></span><br><span class="line">    <span class="attr">&quot;jsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;preserve&quot;</span><span class="punctuation">,</span>	<span class="comment">// 保留 JSX 语法</span></span><br><span class="line">    <span class="attr">&quot;moduleResolution&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node&quot;</span><span class="punctuation">,</span>	<span class="comment">// 模块解析方式</span></span><br><span class="line">    <span class="attr">&quot;allowSyntheticDefaultImports&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span> <span class="comment">// 允许默认导入</span></span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;.&quot;</span><span class="punctuation">,</span>		<span class="comment">// 基础路径</span></span><br><span class="line">    <span class="attr">&quot;paths&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>			<span class="comment">// 路径别名（需与 vue.config.js 中的别名一致）</span></span><br><span class="line">      <span class="attr">&quot;@/*&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/*&quot;</span><span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;types&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;vite/client&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span>	<span class="comment">// 包含的类型声明</span></span><br><span class="line">    <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;esnext&quot;</span><span class="punctuation">,</span> <span class="string">&quot;dom&quot;</span><span class="punctuation">,</span> <span class="string">&quot;dom.iterable&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span>	<span class="comment">// 跳过第三方库类型检查</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span>	<span class="comment">// 兼容 CommonJS 和 ES Module</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;src/&amp;zwnj;**/*.ts&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**&amp;zwnj;/*.d.ts&quot;</span><span class="punctuation">,</span> <span class="string">&quot;src/**/*.vue&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;node_modules&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-类型声明文件-src-types-user-d-ts"><a href="#3-类型声明文件-src-types-user-d-ts" class="headerlink" title="3. 类型声明文件 (src&#x2F;types&#x2F;user.d.ts)"></a>3. 类型声明文件 (src&#x2F;types&#x2F;user.d.ts)</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用户类型定义</span></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">interface</span> <span class="title class_">IUser</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>?: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">email</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局状态类型</span></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">interface</span> <span class="title class_">GlobalState</span> &#123;</span><br><span class="line">  <span class="attr">version</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">darkMode</span>: <span class="built_in">boolean</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-组合式组件示例-src-components-UserList-vue"><a href="#4-组合式组件示例-src-components-UserList-vue" class="headerlink" title="4. 组合式组件示例 (src&#x2F;components&#x2F;UserList.vue)"></a>4. 组合式组件示例 (src&#x2F;components&#x2F;UserList.vue)</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;user-list&quot;&gt;</span><br><span class="line">    &lt;!-- 双向绑定示例 --&gt;</span><br><span class="line">    &lt;input </span><br><span class="line">      v-model=&quot;localSearch&quot; </span><br><span class="line">      @input=&quot;emit(&#x27;update:searchText&#x27;, localSearch)&quot;</span><br><span class="line">      placeholder=&quot;Search users...&quot;</span><br><span class="line">    &gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 列表渲染 --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li </span><br><span class="line">        v-for=&quot;user in filteredUsers&quot; </span><br><span class="line">        :key=&quot;user.id&quot;</span><br><span class="line">        @click=&quot;emit(&#x27;select&#x27;, user)&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;&#123; user.name &#125;&#125; - &#123;&#123; user.email &#125;&#125;</span><br><span class="line">        &lt;span v-if=&quot;user.age&quot;&gt;(&#123;&#123; user.age &#125;&#125;岁)&lt;/span&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 计数器示例 --&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button @click=&quot;increment&quot;&gt;点击次数: &#123;&#123; count &#125;&#125;&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, computed, type PropType &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 定义 Props 类型（两种方式）</span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  // 运行时声明 + TypeScript 类型</span><br><span class="line">  users: &#123;</span><br><span class="line">    type: Array as PropType&lt;IUser[]&gt;,</span><br><span class="line">    required: true,</span><br><span class="line">    validator: (value: IUser[]) =&gt; value.length &gt; 0</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  // 纯 TypeScript 类型声明</span><br><span class="line">  searchText: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    default: &#x27;&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 定义 Emits 类型</span><br><span class="line">const emit = defineEmits&lt;&#123;</span><br><span class="line">  (e: &#x27;select&#x27;, user: IUser): void</span><br><span class="line">  (e: &#x27;update:searchText&#x27;, value: string): void</span><br><span class="line">&#125;&gt;()</span><br><span class="line"></span><br><span class="line">// 响应式数据</span><br><span class="line">const localSearch = ref&lt;string&gt;(props.searchText)</span><br><span class="line"></span><br><span class="line">// 计算属性（自动类型推断）</span><br><span class="line">const filteredUsers = computed(() =&gt; &#123;</span><br><span class="line">  return props.users.filter(user =&gt; </span><br><span class="line">    user.name.toLowerCase().includes(localSearch.value.toLowerCase())</span><br><span class="line">  )</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 组合式函数（带类型）</span><br><span class="line">const useUserActions = (initialCount: number) =&gt; &#123;</span><br><span class="line">  const count = ref&lt;number&gt;(initialCount)</span><br><span class="line">  </span><br><span class="line">  const increment = () =&gt; &#123;</span><br><span class="line">    count.value++</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return &#123; count, increment &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 使用组合式函数</span><br><span class="line">const &#123; count, increment &#125; = useUserActions(0)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.user-list &#123;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  border: 1px solid #eee;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h4 id="5-主组件示例-src-App-vue"><a href="#5-主组件示例-src-App-vue" class="headerlink" title="5. 主组件示例 (src&#x2F;App.vue)"></a>5. 主组件示例 (src&#x2F;App.vue)</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;h1&gt;用户列表 (&#123;&#123; users.length &#125;&#125;人)&lt;/h1&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;UserList</span><br><span class="line">      :users=&quot;users&quot;</span><br><span class="line">      :search-text=&quot;searchText&quot;</span><br><span class="line">      @select=&quot;handleSelect&quot;</span><br><span class="line">      @update:search-text=&quot;val =&gt; searchText = val&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import UserList, &#123; type IUser &#125; from &#x27;@/components/UserList.vue&#x27;</span><br><span class="line"></span><br><span class="line">// 用户数据</span><br><span class="line">const users = ref&lt;IUser[]&gt;([</span><br><span class="line">  &#123; id: 1, name: &#x27;张三&#x27;, age: 25, email: &#x27;zhangsan@example.com&#x27; &#125;,</span><br><span class="line">  &#123; id: 2, name: &#x27;李四&#x27;, email: &#x27;lisi@example.com&#x27; &#125;,</span><br><span class="line">  &#123; id: 3, name: &#x27;王五&#x27;, age: 30, email: &#x27;wangwu@example.com&#x27; &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">// 搜索文本</span><br><span class="line">const searchText = ref(&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">// 处理用户选择</span><br><span class="line">const handleSelect = (user: IUser) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;选中用户:&#x27;, user)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="6-全局类型扩展-src-shims-vue-d-ts"><a href="#6-全局类型扩展-src-shims-vue-d-ts" class="headerlink" title="6. 全局类型扩展 (src&#x2F;shims-vue.d.ts)"></a>6. 全局类型扩展 (src&#x2F;shims-vue.d.ts)</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ComponentCustomProperties</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&#x27;vue&#x27;</span> &#123;</span><br><span class="line">  <span class="keyword">interface</span> <span class="title class_">ComponentCustomProperties</span> &#123;</span><br><span class="line">    <span class="comment">// 扩展全局属性</span></span><br><span class="line">    <span class="attr">$formatDate</span>: <span class="function">(<span class="params"><span class="attr">date</span>: <span class="title class_">Date</span></span>) =&gt;</span> <span class="built_in">string</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 扩展第三方库类型</span></span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">module</span> <span class="string">&#x27;axios&#x27;</span> &#123;</span><br><span class="line">  <span class="keyword">interface</span> <span class="title class_">AxiosRequestConfig</span> &#123;</span><br><span class="line">    <span class="attr">showLoading</span>?: <span class="built_in">boolean</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="关键知识点说明"><a href="#关键知识点说明" class="headerlink" title="关键知识点说明"></a>关键知识点说明</h4><ol>
<li>‌<strong>Props 类型声明</strong>‌：<ul>
<li>使用 <code>PropType</code> 进行复杂类型标注</li>
<li>支持运行时验证和 TypeScript 类型检查</li>
<li>两种声明方式：选项式声明和纯类型声明</li>
</ul>
</li>
<li>‌<strong>组合式 API</strong>‌：<ul>
<li>使用 <code>&lt;script setup&gt;</code> 语法糖</li>
<li>通过 <code>ref&lt;T&gt;</code> 和 <code>computed&lt;T&gt;</code> 进行类型标注</li>
<li>封装带类型的自定义 Hook</li>
</ul>
</li>
<li>‌<strong>类型系统</strong>‌：<ul>
<li>使用 <code>.d.ts</code> 文件进行全局类型声明</li>
<li>类型扩展（组件实例、第三方库）</li>
<li>接口(interface)和类型别名(type)的使用</li>
</ul>
</li>
<li>‌<strong>Emit 类型安全</strong>‌：<ul>
<li>使用 <code>defineEmits</code> 定义带类型的事件</li>
<li>支持 overload 函数类型声明</li>
</ul>
</li>
<li>‌<strong>双向绑定</strong>‌：<ul>
<li>实现 <code>v-model</code> 的类型安全更新</li>
<li>使用 <code>update:xxx</code> 事件命名规范</li>
</ul>
</li>
</ol>
<h4 id="运行准备"><a href="#运行准备" class="headerlink" title="运行准备"></a>运行准备</h4><ol>
<li>安装依赖：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue@next @vue/cli-service typescript ts-loader @types/node</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>启动项目：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure>

<h4 id="最佳实践建议"><a href="#最佳实践建议" class="headerlink" title="最佳实践建议"></a>最佳实践建议</h4><ol>
<li>类型文件组织：<ul>
<li>将全局类型放在 <code>types</code> 目录</li>
<li>组件类型就近声明</li>
<li>使用 <code>import type</code> 导入纯类型</li>
</ul>
</li>
<li>组件开发规范：<ul>
<li>优先使用 <code>&lt;script setup&gt;</code> 语法</li>
<li>复杂 Props 使用接口单独定义</li>
<li>为自定义事件提供类型声明</li>
</ul>
</li>
<li>类型安全技巧：<ul>
<li>开启 <code>strict: true</code> 配置</li>
<li>使用 <code>volar</code> 插件获得更好的类型支持</li>
<li>定期运行 <code>tsc --noEmit</code> 进行类型检查</li>
</ul>
</li>
<li>性能优化：<ul>
<li>使用 <code>transpileOnly: true</code> 加速开发构建</li>
<li>对第三方库类型使用 <code>skipLibCheck</code></li>
<li>避免过度使用 <code>any</code> 类型</li>
</ul>
</li>
</ol>
<p>此示例完整覆盖 Vue3 + TypeScript 的核心开发模式，可直接复制到项目中运行，并根据实际需求进行扩展调整。</p>
<h3 id="vite-config-js"><a href="#vite-config-js" class="headerlink" title="vite.config.js"></a><code>vite.config.js</code></h3><h4 id="创建-Vue3-TypeScript-项目"><a href="#创建-Vue3-TypeScript-项目" class="headerlink" title="创建 Vue3 + TypeScript 项目"></a>创建 Vue3 + TypeScript 项目</h4><p>使用 Vite 快速创建项目（推荐）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm create vite@latest my-vue-app -- --template vue-ts</span><br></pre></td></tr></table></figure>

<h4 id="项目结构说明"><a href="#项目结构说明" class="headerlink" title="项目结构说明"></a>项目结构说明</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">textCopy Code├── src/</span><br><span class="line">│   ├── components/      # 组件目录</span><br><span class="line">│   │   └── HelloWorld.vue</span><br><span class="line">│   └── App.vue          # 根组件</span><br><span class="line">├── tsconfig.json        # TypeScript 配置文件（自动生成）</span><br><span class="line">└── vite.config.ts       # Vite 配置文件</span><br></pre></td></tr></table></figure>

<h4 id="核心知识点示例代码"><a href="#核心知识点示例代码" class="headerlink" title="核心知识点示例代码"></a>核心知识点示例代码</h4><h5 id="1-组件-Props-类型声明-HelloWorld-vue"><a href="#1-组件-Props-类型声明-HelloWorld-vue" class="headerlink" title="1. 组件 Props 类型声明 (HelloWorld.vue)"></a>1. 组件 Props 类型声明 (HelloWorld.vue)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;p&gt;Count: &#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;User: &#123;&#123; userInfo.name &#125;&#125; (ID: &#123;&#123; userInfo.id &#125;&#125;)&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">// 使用 defineProps + 类型字面量声明 Props</span><br><span class="line">interface Props &#123;</span><br><span class="line">  // 必传属性</span><br><span class="line">  title: String,</span><br><span class="line">  // 可选属性，默认值通过 withDefaults 处理</span><br><span class="line">  count?: number,</span><br><span class="line">  // 复杂对象类型</span><br><span class="line">  userInfo?: &#123;</span><br><span class="line">    id: number,</span><br><span class="line">    name: string</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 带默认值的 props 声明（推荐方式）</span><br><span class="line">const props = withDefaults(defineProps&lt;Props&gt;(), &#123;</span><br><span class="line">  count: 0,</span><br><span class="line">  userInfo: () =&gt; (&#123; id: -1, name: &#x27;Guest&#x27; &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 类型检查示例（TS 会自动推断类型）</span><br><span class="line">console.log(props.title.toLowerCase()) // 正确：string 类型有该方法</span><br><span class="line">// console.log(props.count.toLowerCase()) // 错误：TS 会报类型错误</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="2-组合式-API-类型声明-App-vue"><a href="#2-组合式-API-类型声明-App-vue" class="headerlink" title="2. 组合式 API + 类型声明 (App.vue)"></a>2. 组合式 API + 类型声明 (App.vue)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 传递 props --&gt;</span><br><span class="line">  &lt;HelloWorld </span><br><span class="line">    title=&quot;Vue3 + TS 演示&quot; </span><br><span class="line">    :count=&quot;count&quot;</span><br><span class="line">    :user-info=&quot;&#123; id: 1, name: &#x27;John&#x27; &#125;&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;增加计数&lt;/button&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input v-model=&quot;newHobby&quot; @keyup.enter=&quot;addHobby&quot;&gt;</span><br><span class="line">    &lt;button @click=&quot;addHobby&quot;&gt;添加爱好&lt;/button&gt;</span><br><span class="line">    &lt;ul v-if=&quot;user.hobbies&quot;&gt;</span><br><span class="line">      &lt;li v-for=&quot;hobby in user.hobbies&quot; :key=&quot;hobby&quot;&gt;&#123;&#123; hobby &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  &lt;p&gt;&#123;&#123; userInfo &#125;&#125;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">  &lt;button @click=&quot;showAlert&quot;&gt;触发事件&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, reactive, computed &#125; from &#x27;vue&#x27;</span><br><span class="line">import HelloWorld from &#x27;./components/HelloWorld.vue&#x27;</span><br><span class="line"></span><br><span class="line">// 类型声明示例 -------------------------------------------------</span><br><span class="line"></span><br><span class="line">// 1. 基本类型推断</span><br><span class="line">const count = ref(0) // 自动推断为 Ref&lt;number&gt;</span><br><span class="line"></span><br><span class="line">// 2. 显式声明复杂类型</span><br><span class="line">interface User &#123;</span><br><span class="line">  name: string</span><br><span class="line">  age: number</span><br><span class="line">  hobbies?: string[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 3. reactive 对象类型</span><br><span class="line">const user = reactive&lt;User&gt;(&#123;</span><br><span class="line">  name: &#x27;Alice&#x27;,</span><br><span class="line">  age: 25</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 4. 带类型的 ref</span><br><span class="line">const newHobby = ref&lt;string&gt;(&#x27;&#x27;) // 显式声明为字符串类型</span><br><span class="line"></span><br><span class="line">// 5. 计算属性类型</span><br><span class="line">const userInfo = computed((): string =&gt; &#123;</span><br><span class="line">  return `Name: $&#123;user.name&#125;, Age: $&#123;user.age&#125;`</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 方法示例 ----------------------------------------------------</span><br><span class="line">const increment = (): void =&gt; &#123; // 明确声明返回值类型</span><br><span class="line">  count.value++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const addHobby = (): void =&gt; &#123;</span><br><span class="line">  if (newHobby.value.trim()) &#123;</span><br><span class="line">    user.hobbies = [...(user.hobbies || []), newHobby.value]</span><br><span class="line">    newHobby.value = &#x27;&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 事件处理示例 ------------------------------------------------</span><br><span class="line">const emit = defineEmits&lt;&#123;</span><br><span class="line">  (e: &#x27;showMessage&#x27;, message: string): void</span><br><span class="line">&#125;&gt;()</span><br><span class="line"></span><br><span class="line">const showAlert = (): void =&gt; &#123;</span><br><span class="line">  emit(&#x27;showMessage&#x27;, &#x27;Hello from App component!&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="关键知识点说明-1"><a href="#关键知识点说明-1" class="headerlink" title="关键知识点说明"></a>关键知识点说明</h4><ol>
<li><p>‌<strong>Props 类型声明</strong>‌</p>
<ul>
<li>使用 <code>defineProps</code> + TypeScript 接口</li>
<li>可选属性使用 <code>?</code> 修饰符</li>
<li>默认值通过 <code>withDefaults</code> 编译器宏处理</li>
</ul>
</li>
<li><p>‌<strong>组合式 API 类型</strong>‌</p>
<ul>
<li><code>ref()</code> 自动类型推断：<code>const num = ref(0)</code> → <code>Ref&lt;number&gt;</code></li>
<li>复杂类型显式声明：<code>ref&lt;string&gt;(&#39;&#39;)</code></li>
<li><code>reactive()</code> 推荐使用接口约束对象类型</li>
</ul>
</li>
<li><p>‌<strong>计算属性类型</strong>‌</p>
<ul>
<li>使用返回类型注解：<code>computed((): string =&gt; &#123; ... &#125;)</code></li>
</ul>
</li>
<li><p>‌<strong>事件类型校验</strong>‌</p>
<ul>
<li>使用 <code>defineEmits</code> 定义带类型的事件</li>
<li>语法：<code>(e: &#39;eventName&#39;, payload: Type): void</code></li>
</ul>
</li>
<li><p>‌<strong>类型复用</strong>‌</p>
<ul>
<li><p>推荐将接口定义在单独文件（如<code>types.ts</code>）：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/types.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">hobbies</span>?: <span class="built_in">string</span>[]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h4 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h4><ol>
<li>‌<strong>严格的类型检查</strong>‌：在 <code>tsconfig.json</code> 中启用严格模式</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">jsonCopy Code<span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;noImplicitAny&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p><strong>组件事件类型</strong>‌：始终使用 <code>defineEmits</code> 声明事件</p>
</li>
<li><p><strong>类型导入</strong>‌：大型项目推荐使用类型导入语法：</p>
</li>
</ol>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">User</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../types&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="十五、路由-Router"><a href="#十五、路由-Router" class="headerlink" title="十五、路由 Router"></a>十五、路由 Router</h2><h3 id="路由基础配置"><a href="#路由基础配置" class="headerlink" title="路由基础配置"></a>路由基础配置</h3><ol>
<li>‌<strong>安装依赖</strong>‌</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router@4</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>路由配置文件</strong>‌（<code>src/router/index.js</code>）</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/About.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Home</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>, <span class="attr">component</span>: <span class="title class_">About</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>挂载到Vue实例</strong>‌（<code>main.js</code>）</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="路由组件示例"><a href="#路由组件示例" class="headerlink" title="路由组件示例"></a>路由组件示例</h3><ol>
<li>‌<strong>Home组件</strong>‌（<code>src/views/Home.vue</code>）</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;Home Page&lt;/h1&gt;</span><br><span class="line">    &lt;router-link to=&quot;/about&quot;&gt;Go to About&lt;/router-link&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>About组件</strong>‌（<code>src/views/About.vue</code>）</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;About Page&lt;/h1&gt;</span><br><span class="line">    &lt;router-link to=&quot;/&quot;&gt;Back Home&lt;/router-link&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="核心功能示例"><a href="#核心功能示例" class="headerlink" title="核心功能示例"></a>核心功能示例</h3><h4 id="1-动态路由匹配"><a href="#1-动态路由匹配" class="headerlink" title="1. 动态路由匹配"></a>1. 动态路由匹配</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 路由配置</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/User.vue&#x27;</span>),</span><br><span class="line">  <span class="attr">props</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- User组件内获取参数 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;User ID: &#123;&#123; userId &#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useRoute &#125; from &#x27;vue-router&#x27;</span><br><span class="line">const route = useRoute()</span><br><span class="line">const userId = route.params.id</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-嵌套路由"><a href="#2-嵌套路由" class="headerlink" title="2. 嵌套路由"></a>2. 嵌套路由</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父路由配置</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/parent&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/Parent.vue&#x27;</span>),</span><br><span class="line">  <span class="attr">children</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;child&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/Child.vue&#x27;</span>) &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Parent组件模板 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;Parent Component&lt;/h2&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-编程式导航"><a href="#3-编程式导航" class="headerlink" title="3. 编程式导航"></a>3. 编程式导航</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useRouter &#125; from &#x27;vue-router&#x27;</span><br><span class="line">const router = useRouter()</span><br><span class="line"></span><br><span class="line">// 跳转示例</span><br><span class="line">const navigate = () =&gt; &#123;</span><br><span class="line">  // 路径跳转</span><br><span class="line">  router.push(&#x27;/about&#x27;)</span><br><span class="line">  </span><br><span class="line">  // 命名路由带参数</span><br><span class="line">  router.push(&#123;</span><br><span class="line">    name: &#x27;user&#x27;,</span><br><span class="line">    params: &#123; id: 123 &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  // 带查询参数</span><br><span class="line">  router.push(&#123; path: &#x27;/search&#x27;, query: &#123; q: &#x27;vue3&#x27; &#125; &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="路由模式选择"><a href="#路由模式选择" class="headerlink" title="路由模式选择"></a>路由模式选择</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Hash模式（默认）</span></span><br><span class="line"><span class="title function_">createWebHashHistory</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// History模式（需服务器配置）</span></span><br><span class="line"><span class="title function_">createWebHistory</span>()</span><br></pre></td></tr></table></figure>

<h3 id="完整项目结构示例"><a href="#完整项目结构示例" class="headerlink" title="完整项目结构示例"></a>完整项目结构示例</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">├── router/</span><br><span class="line">│   └── index.js</span><br><span class="line">├── views/</span><br><span class="line">│   ├── Home.vue</span><br><span class="line">│   ├── About.vue</span><br><span class="line">│   └── User.vue</span><br><span class="line">└── App.vue</span><br></pre></td></tr></table></figure>

<h3 id="路由守卫："><a href="#路由守卫：" class="headerlink" title="路由守卫："></a>路由守卫：</h3><h4 id="路由守卫类型与执行顺序"><a href="#路由守卫类型与执行顺序" class="headerlink" title="路由守卫类型与执行顺序"></a>路由守卫类型与执行顺序</h4><h5 id="全局守卫（优先级从高到低）"><a href="#全局守卫（优先级从高到低）" class="headerlink" title="全局守卫（优先级从高到低）"></a>全局守卫（优先级从高到低）</h5><ol>
<li>‌<strong>全局前置守卫</strong>‌ <code>router.beforeEach</code></li>
<li>‌<strong>全局解析守卫</strong>‌ <code>router.beforeResolve</code></li>
<li>‌<strong>全局后置钩子</strong>‌ <code>router.afterEach</code></li>
</ol>
<h5 id="路由独享守卫"><a href="#路由独享守卫" class="headerlink" title="路由独享守卫"></a>路由独享守卫</h5><ul>
<li>‌<strong>beforeEnter</strong>‌</li>
</ul>
<h5 id="组件内守卫"><a href="#组件内守卫" class="headerlink" title="组件内守卫"></a>组件内守卫</h5><ol>
<li><code>beforeRouteEnter</code></li>
<li><code>beforeRouteUpdate</code></li>
<li><code>beforeRouteLeave</code></li>
</ol>
<h5 id="完整执行顺序："><a href="#完整执行顺序：" class="headerlink" title="完整执行顺序："></a>完整执行顺序：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">textCopy Code导航触发 → 组件内beforeRouteLeave → </span><br><span class="line">全局beforeEach → </span><br><span class="line">路由配置beforeEnter → </span><br><span class="line">组件内beforeRouteUpdate（复用组件时）→ </span><br><span class="line">解析异步组件 → </span><br><span class="line">全局beforeResolve → </span><br><span class="line">导航确认 → </span><br><span class="line">全局afterEach → </span><br><span class="line">组件内beforeRouteEnter的next回调</span><br></pre></td></tr></table></figure>

<h4 id="全局守卫示例"><a href="#全局守卫示例" class="headerlink" title="全局守卫示例"></a>全局守卫示例</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router/index.js</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123; <span class="comment">/*...*/</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局前置守卫（用户认证）</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> isAuthenticated = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 需要登录且未登录的情况</span></span><br><span class="line">  <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">requiresAuth</span> &amp;&amp; !isAuthenticated) &#123;</span><br><span class="line">    <span class="title function_">next</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">query</span>: &#123; <span class="attr">redirect</span>: to.<span class="property">fullPath</span> &#125; &#125;)</span><br><span class="line">  &#125; </span><br><span class="line">  <span class="comment">// 已登录访问登录页的情况</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (to.<span class="property">path</span> === <span class="string">&#x27;/login&#x27;</span> &amp;&amp; isAuthenticated) &#123;</span><br><span class="line">    <span class="title function_">next</span>(<span class="string">&#x27;/dashboard&#x27;</span>)</span><br><span class="line">  &#125; </span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">next</span>() <span class="comment">// 正常放行</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局解析守卫（最后机会处理）</span></span><br><span class="line">router.<span class="title function_">beforeResolve</span>(<span class="keyword">async</span> to =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">requiresFetch</span>) &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">fetchInitialData</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局后置钩子（页面统计/动画）</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">sendToAnalytics</span>(to.<span class="property">fullPath</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="路由独享守卫-1"><a href="#路由独享守卫-1" class="headerlink" title="路由独享守卫"></a>路由独享守卫</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 路由配置</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/admin&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">AdminPanel</span>,</span><br><span class="line">  <span class="attr">meta</span>: &#123; <span class="attr">requiresAdmin</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">  <span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> isAdmin = <span class="title function_">checkAdminRole</span>()</span><br><span class="line">    isAdmin ? <span class="title function_">next</span>() : <span class="title function_">next</span>(<span class="string">&#x27;/403&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="组件内守卫（组合式API）"><a href="#组件内守卫（组合式API）" class="headerlink" title="组件内守卫（组合式API）"></a>组件内守卫（组合式API）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; onBeforeRouteLeave, onBeforeRouteUpdate &#125; from &#x27;vue-router&#x27;</span><br><span class="line"></span><br><span class="line">// 离开守卫（阻止未保存修改）</span><br><span class="line">onBeforeRouteLeave((to, from, next) =&gt; &#123;</span><br><span class="line">  if (formData.value.isDirty) &#123;</span><br><span class="line">    const confirmLeave = window.confirm(&#x27;有未保存的修改，确定离开吗？&#x27;)</span><br><span class="line">    confirmLeave ? next() : next(false)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 更新守卫（复用组件时）</span><br><span class="line">onBeforeRouteUpdate(async (to, from) =&gt; &#123;</span><br><span class="line">  productId.value = to.params.id</span><br><span class="line">  await loadProductData()</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 选项式API示例 --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  beforeRouteEnter(to, from, next) &#123;</span><br><span class="line">    next(vm =&gt; &#123;</span><br><span class="line">      // 访问组件实例</span><br><span class="line">      vm.initData(to.params.id)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="完整示例场景"><a href="#完整示例场景" class="headerlink" title="完整示例场景"></a>完整示例场景</h4><h5 id="用户登录认证流程"><a href="#用户登录认证流程" class="headerlink" title="用户登录认证流程"></a>用户登录认证流程</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 登录页组件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleLogin</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> api.<span class="title function_">login</span>(username, password)</span><br><span class="line">  <span class="keyword">if</span> (res.<span class="property">success</span>) &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;token&#x27;</span>, res.<span class="property">token</span>)</span><br><span class="line">    router.<span class="title function_">push</span>(route.<span class="property">query</span>.<span class="property">redirect</span> || <span class="string">&#x27;/dashboard&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="敏感操作二次验证"><a href="#敏感操作二次验证" class="headerlink" title="敏感操作二次验证"></a>敏感操作二次验证</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 支付页面组件</span></span><br><span class="line"><span class="title function_">onBeforeRouteLeave</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (to.<span class="property">path</span> === <span class="string">&#x27;/payment/confirm&#x27;</span> &amp;&amp; !isVerified.<span class="property">value</span>) &#123;</span><br><span class="line">    <span class="title function_">showVerificationModal</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>()</span><br><span class="line">    &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="literal">false</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><ol>
<li><p>‌<strong>next()必须调用</strong>‌：每个守卫必须调用一次<code>next()</code></p>
</li>
<li><p>‌异步处理规范：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">beforeEach</span>(<span class="title function_">async</span> (to, <span class="keyword">from</span>, next) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">checkAuth</span>()</span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="title function_">next</span>(<span class="string">&#x27;/error&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>‌meta字段使用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/dashboard&#x27;</span>,</span><br><span class="line">  <span class="attr">meta</span>: &#123; </span><br><span class="line">    <span class="attr">requiresAuth</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">transition</span>: <span class="string">&#x27;fade&#x27;</span> </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="完整项目结构增强版"><a href="#完整项目结构增强版" class="headerlink" title="完整项目结构增强版"></a>完整项目结构增强版</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">├── router/</span><br><span class="line">│   ├── index.js</span><br><span class="line">│   └── guards/          // 路由守卫模块化</span><br><span class="line">│       ├── auth.js</span><br><span class="line">│       └── analytics.js</span><br><span class="line">├── views/</span><br><span class="line">│   ├── Login.vue</span><br><span class="line">│   ├── Dashboard.vue</span><br><span class="line">│   └── Admin/</span><br><span class="line">│       ├── index.vue</span><br><span class="line">│       └── Audit.vue</span><br><span class="line">└── App.vue</span><br></pre></td></tr></table></figure>

<h2 id="十六、Vuex"><a href="#十六、Vuex" class="headerlink" title="十六、Vuex"></a>十六、Vuex</h2><h3 id="Vuex定义与作用"><a href="#Vuex定义与作用" class="headerlink" title="Vuex定义与作用"></a>Vuex定义与作用</h3><p>Vuex是专为Vue.js设计的状态管理库，采用‌<strong>集中式存储</strong>‌管理应用所有组件的共享状态，解决多层级组件通信难题。核心价值体现在：</p>
<ul>
<li>‌<strong>数据归一化</strong>‌：跨组件共享数据（如用户信息、全局配置）</li>
<li>‌<strong>响应式同步</strong>‌：数据变更实时触发视图更新</li>
<li>‌<strong>操作规范化</strong>‌：强制采用mutation机制修改状态</li>
</ul>
<h3 id="核心概念详解"><a href="#核心概念详解" class="headerlink" title="核心概念详解"></a>核心概念详解</h3><h4 id="1-State（数据源）"><a href="#1-State（数据源）" class="headerlink" title="1. State（数据源）"></a>1. State（数据源）</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/index.js</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">userToken</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">cartItems</span>: []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>组件内访问：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useStore &#125; from &#x27;vuex&#x27;</span><br><span class="line">const store = useStore()</span><br><span class="line">console.log(store.state.userToken)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-Mutations（同步修改）"><a href="#2-Mutations（同步修改）" class="headerlink" title="2. Mutations（同步修改）"></a>2. Mutations（同步修改）</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">  <span class="title function_">SET_TOKEN</span>(<span class="params">state, payload</span>) &#123;</span><br><span class="line">    state.<span class="property">userToken</span> = payload</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">ADD_CART_ITEM</span>(<span class="params">state, item</span>) &#123;</span><br><span class="line">    state.<span class="property">cartItems</span>.<span class="title function_">push</span>(item)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>触发方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.<span class="title function_">commit</span>(<span class="string">&#x27;SET_TOKEN&#x27;</span>, <span class="string">&#x27;abc123&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="3-Actions（异步操作）"><a href="#3-Actions（异步操作）" class="headerlink" title="3. Actions（异步操作）"></a>3. Actions（异步操作）</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params">&#123; commit &#125;, credentials</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> api.<span class="title function_">login</span>(credentials)</span><br><span class="line">    <span class="title function_">commit</span>(<span class="string">&#x27;SET_TOKEN&#x27;</span>, res.<span class="property">token</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>触发方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.<span class="title function_">dispatch</span>(<span class="string">&#x27;login&#x27;</span>, &#123; <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span>, <span class="attr">password</span>: <span class="string">&#x27;123&#x27;</span> &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="4-Getters（计算属性）"><a href="#4-Getters（计算属性）" class="headerlink" title="4. Getters（计算属性）"></a>4. Getters（计算属性）</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">getters</span>: &#123;</span><br><span class="line">  <span class="attr">cartTotal</span>: <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> state.<span class="property">cartItems</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, item</span>) =&gt;</span> sum + item.<span class="property">price</span>, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>组件内使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;总价：&#123;&#123; $store.getters.cartTotal &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="5-Modules（模块化）"><a href="#5-Modules（模块化）" class="headerlink" title="5. Modules（模块化）"></a>5. Modules（模块化）</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/modules/user.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">state</span>: &#123; <span class="attr">profile</span>: <span class="literal">null</span> &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123; <span class="title function_">SET_PROFILE</span>(<span class="params">state, data</span>) &#123; ... &#125; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 主store</span></span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&#x27;./modules/user&#x27;</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123; user &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>组件访问：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">store.<span class="property">state</span>.<span class="property">user</span>.<span class="property">profile</span></span><br><span class="line">store.<span class="title function_">commit</span>(<span class="string">&#x27;user/SET_PROFILE&#x27;</span>, data)</span><br></pre></td></tr></table></figure>

<h3 id="完整示例场景-1"><a href="#完整示例场景-1" class="headerlink" title="完整示例场景"></a>完整示例场景</h3><h4 id="用户登录流程"><a href="#用户登录流程" class="headerlink" title="用户登录流程"></a>用户登录流程</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store配置</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">user</span>: <span class="literal">null</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">SET_USER</span>(<span class="params">state, user</span>) &#123;</span><br><span class="line">      state.<span class="property">user</span> = user</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;user&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(user))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params">&#123; commit &#125;, &#123; email, password &#125;</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> user = <span class="keyword">await</span> authService.<span class="title function_">login</span>(email, password)</span><br><span class="line">      <span class="title function_">commit</span>(<span class="string">&#x27;SET_USER&#x27;</span>, user)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 组件调用</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">handleLogin</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;login&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">email</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">email</span>,</span><br><span class="line">      <span class="attr">password</span>: <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">password</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h3><ol>
<li><p>‌<strong>数据操作规范</strong>‌：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误示例（直接修改state）</span></span><br><span class="line">store.<span class="property">state</span>.<span class="property">userToken</span> = <span class="string">&#x27;newToken&#x27;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确方式（通过mutation）</span></span><br><span class="line">store.<span class="title function_">commit</span>(<span class="string">&#x27;SET_TOKEN&#x27;</span>, <span class="string">&#x27;newToken&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>模块化开发结构</strong>‌：</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">├── store/</span><br><span class="line">│   ├── index.js</span><br><span class="line">│   ├── modules/</span><br><span class="line">│   │   ├── cart.js</span><br><span class="line">│   │   └── user.js</span><br><span class="line">│   └── types.js  # Mutation类型常量</span><br></pre></td></tr></table></figure>

<h3 id="搭配-LocalStorage-使用"><a href="#搭配-LocalStorage-使用" class="headerlink" title="搭配 LocalStorage 使用"></a>搭配 LocalStorage 使用</h3><h4 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h4><h5 id="1-安装依赖"><a href="#1-安装依赖" class="headerlink" title="1. 安装依赖"></a>1. 安装依赖</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex@4 vue@3</span><br></pre></td></tr></table></figure>

<h5 id="2-存储工具封装"><a href="#2-存储工具封装" class="headerlink" title="2. 存储工具封装"></a>2. 存储工具封装</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/storage.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params">key</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(key)</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(data)</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> data</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">set</span>(<span class="params">key, value</span>) &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(key, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(value))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Vuex-Store配置"><a href="#Vuex-Store配置" class="headerlink" title="Vuex Store配置"></a>Vuex Store配置</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> storage <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> userModule = &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">token</span>: storage.<span class="title function_">get</span>(<span class="string">&#x27;user_token&#x27;</span>) || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">profile</span>: storage.<span class="title function_">get</span>(<span class="string">&#x27;user_profile&#x27;</span>) || <span class="literal">null</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">SET_TOKEN</span>(<span class="params">state, token</span>) &#123;</span><br><span class="line">      state.<span class="property">token</span> = token</span><br><span class="line">      storage.<span class="title function_">set</span>(<span class="string">&#x27;user_token&#x27;</span>, token)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">SET_PROFILE</span>(<span class="params">state, profile</span>) &#123;</span><br><span class="line">      state.<span class="property">profile</span> = profile</span><br><span class="line">      storage.<span class="title function_">set</span>(<span class="string">&#x27;user_profile&#x27;</span>, profile)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params">&#123; commit &#125;, credentials</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> res = <span class="keyword">await</span> api.<span class="title function_">login</span>(credentials)</span><br><span class="line">      <span class="title function_">commit</span>(<span class="string">&#x27;SET_TOKEN&#x27;</span>, res.<span class="property">token</span>)</span><br><span class="line">      <span class="title function_">commit</span>(<span class="string">&#x27;SET_PROFILE&#x27;</span>, res.<span class="property">user</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">logout</span>(<span class="params">&#123; commit &#125;</span>) &#123;</span><br><span class="line">      <span class="title function_">commit</span>(<span class="string">&#x27;SET_TOKEN&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">      <span class="title function_">commit</span>(<span class="string">&#x27;SET_PROFILE&#x27;</span>, <span class="literal">null</span>)</span><br><span class="line">      storage.<span class="title function_">remove</span>(<span class="string">&#x27;user_token&#x27;</span>)</span><br><span class="line">      storage.<span class="title function_">remove</span>(<span class="string">&#x27;user_profile&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    <span class="attr">user</span>: userModule</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="自动持久化插件"><a href="#自动持久化插件" class="headerlink" title="自动持久化插件"></a>自动持久化插件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/plugins/persist.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store =&gt; &#123;</span><br><span class="line">  store.<span class="title function_">subscribe</span>(<span class="function">(<span class="params">mutation, state</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span>(mutation.<span class="property">type</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;user/SET_TOKEN&#x27;</span>:</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;vuex_token&#x27;</span>, state.<span class="property">user</span>.<span class="property">token</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;user/SET_PROFILE&#x27;</span>:</span><br><span class="line">        <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;vuex_profile&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(state.<span class="property">user</span>.<span class="property">profile</span>))</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// store/index.js中启用</span></span><br><span class="line"><span class="keyword">import</span> persist <span class="keyword">from</span> <span class="string">&#x27;./plugins/persist&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123; <span class="comment">/*...*/</span> &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [persist]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="组件使用示例"><a href="#组件使用示例" class="headerlink" title="组件使用示例"></a>组件使用示例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;当前Token: &#123;&#123; token &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;button @click=&quot;handleLogin&quot;&gt;登录&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useStore &#125; from &#x27;vuex&#x27;</span><br><span class="line"></span><br><span class="line">const store = useStore()</span><br><span class="line"></span><br><span class="line">// 获取状态</span><br><span class="line">const token = computed(() =&gt; store.state.user.token)</span><br><span class="line"></span><br><span class="line">// 修改状态</span><br><span class="line">const handleLogin = async () =&gt; &#123;</span><br><span class="line">  await store.dispatch(&#x27;user/login&#x27;, &#123;</span><br><span class="line">    username: &#x27;test&#x27;,</span><br><span class="line">    password: &#x27;123456&#x27;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="最佳实践建议-1"><a href="#最佳实践建议-1" class="headerlink" title="最佳实践建议"></a>最佳实践建议</h4><ol>
<li>‌<strong>数据规范</strong>‌：</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误示例（直接修改state）</span></span><br><span class="line">store.<span class="property">state</span>.<span class="property">user</span>.<span class="property">token</span> = <span class="string">&#x27;new_token&#x27;</span> <span class="comment">// 不会触发持久化</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确方式（通过mutation）</span></span><br><span class="line">store.<span class="title function_">commit</span>(<span class="string">&#x27;user/SET_TOKEN&#x27;</span>, <span class="string">&#x27;new_token&#x27;</span>) <span class="comment">// 触发自动存储</span></span><br></pre></td></tr></table></figure>

<ol>
<li>‌<strong>项目结构</strong>‌：</li>
</ol>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">├── store/</span><br><span class="line">│   ├── modules/</span><br><span class="line">│   │   ├── user.js</span><br><span class="line">│   │   └── cart.js</span><br><span class="line">│   ├── plugins/</span><br><span class="line">│   └── index.js</span><br><span class="line">└── utils/</span><br><span class="line">    └── storage.js</span><br></pre></td></tr></table></figure>

<h4 id="购物车模块示例"><a href="#购物车模块示例" class="headerlink" title="购物车模块示例"></a>购物车模块示例</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/modules/cart.js</span></span><br><span class="line"><span class="keyword">import</span> storage <span class="keyword">from</span> <span class="string">&#x27;@/utils/storage&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">items</span>: storage.<span class="title function_">get</span>(<span class="string">&#x27;cart_items&#x27;</span>) || []</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">ADD_ITEM</span>(<span class="params">state, product</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> existing = state.<span class="property">items</span>.<span class="title function_">find</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span> === product.<span class="property">id</span>)</span><br><span class="line">      existing ? existing.<span class="property">quantity</span>++ : state.<span class="property">items</span>.<span class="title function_">push</span>(&#123; ...product, <span class="attr">quantity</span>: <span class="number">1</span> &#125;)</span><br><span class="line">      storage.<span class="title function_">set</span>(<span class="string">&#x27;cart_items&#x27;</span>, state.<span class="property">items</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="attr">totalPrice</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">items</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, item</span>) =&gt;</span> </span><br><span class="line">      sum + item.<span class="property">price</span> * item.<span class="property">quantity</span>, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上代码实现了Vuex状态与localStorage的自动同步，遵循Vuex规范通过mutation修改状态并触发持久化存储，适用于需要长期保存的用户认证状态、购物车数据等场景</p>
<h2 id="十七、Pinia"><a href="#十七、Pinia" class="headerlink" title="十七、Pinia"></a>十七、Pinia</h2><h3 id="基础配置-1"><a href="#基础配置-1" class="headerlink" title="基础配置"></a>基础配置</h3><h4 id="1-安装依赖-1"><a href="#1-安装依赖-1" class="headerlink" title="1. 安装依赖"></a>1. 安装依赖</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pinia @vue/composition-api</span><br></pre></td></tr></table></figure>

<h4 id="2-初始化Pinia"><a href="#2-初始化Pinia" class="headerlink" title="2. 初始化Pinia"></a>2. 初始化Pinia</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">createPinia</span>())</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="核心Store定义"><a href="#核心Store定义" class="headerlink" title="核心Store定义"></a>核心Store定义</h3><h4 id="1-用户认证Store"><a href="#1-用户认证Store" class="headerlink" title="1. 用户认证Store"></a>1. 用户认证Store</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores/user.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// State</span></span><br><span class="line">  <span class="keyword">const</span> token = <span class="title function_">ref</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;user_token&#x27;</span>) || <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> profile = <span class="title function_">ref</span>(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;user_profile&#x27;</span>) || <span class="string">&#x27;null&#x27;</span>))</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Getters</span></span><br><span class="line">  <span class="keyword">const</span> isLoggedIn = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> !!token.<span class="property">value</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Actions</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">login</span>(<span class="params">credentials</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/login&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">      <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(credentials)</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>()</span><br><span class="line">    token.<span class="property">value</span> = data.<span class="property">token</span></span><br><span class="line">    profile.<span class="property">value</span> = data.<span class="property">user</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 持久化存储</span></span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;user_token&#x27;</span>, data.<span class="property">token</span>)</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;user_profile&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data.<span class="property">user</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">logout</span>(<span class="params"></span>) &#123;</span><br><span class="line">    token.<span class="property">value</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    profile.<span class="property">value</span> = <span class="literal">null</span></span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;user_token&#x27;</span>)</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;user_profile&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; token, profile, isLoggedIn, login, logout &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="组件中使用"><a href="#组件中使用" class="headerlink" title="组件中使用"></a>组件中使用</h3><h4 id="1-登录组件"><a href="#1-登录组件" class="headerlink" title="1. 登录组件"></a>1. 登录组件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- LoginForm.vue --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; useUserStore &#125; from &#x27;@/stores/user&#x27;</span><br><span class="line"></span><br><span class="line">const userStore = useUserStore()</span><br><span class="line">const form = ref(&#123; email: &#x27;&#x27;, password: &#x27;&#x27; &#125;)</span><br><span class="line"></span><br><span class="line">const handleSubmit = async () =&gt; &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    await userStore.login(form.value)</span><br><span class="line">    window.location.href = &#x27;/dashboard&#x27;</span><br><span class="line">  &#125; catch (error) &#123;</span><br><span class="line">    alert(&#x27;登录失败: &#x27; + error.message)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;form @submit.prevent=&quot;handleSubmit&quot;&gt;</span><br><span class="line">    &lt;input v-model=&quot;form.email&quot; type=&quot;email&quot; placeholder=&quot;邮箱&quot;&gt;</span><br><span class="line">    &lt;input v-model=&quot;form.password&quot; type=&quot;password&quot; placeholder=&quot;密码&quot;&gt;</span><br><span class="line">    &lt;button type=&quot;submit&quot;&gt;登录&lt;/button&gt;</span><br><span class="line">    &lt;p v-if=&quot;userStore.isLoggedIn&quot;&gt;已登录用户: &#123;&#123; userStore.profile?.name &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h3 id="进阶功能实现"><a href="#进阶功能实现" class="headerlink" title="进阶功能实现"></a>进阶功能实现</h3><h4 id="1-自动持久化插件"><a href="#1-自动持久化插件" class="headerlink" title="1. 自动持久化插件"></a>1. 自动持久化插件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// plugins/persist.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">persistPlugin</span> = (<span class="params">&#123; store &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 从localStorage加载初始状态</span></span><br><span class="line">  <span class="keyword">const</span> savedState = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(store.<span class="property">$id</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Object</span>.<span class="title function_">keys</span>(savedState).<span class="property">length</span>) &#123;</span><br><span class="line">    store.$patch(savedState)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 订阅状态变化</span></span><br><span class="line">  store.$subscribe(<span class="function">(<span class="params">mutation, state</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(store.<span class="property">$id</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(state))</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在main.js中注册</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line">pinia.<span class="title function_">use</span>(persistPlugin)</span><br></pre></td></tr></table></figure>

<h4 id="2-购物车Store示例"><a href="#2-购物车Store示例" class="headerlink" title="2. 购物车Store示例"></a>2. 购物车Store示例</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores/cart.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCartStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;cart&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">items</span>: [],</span><br><span class="line">    <span class="attr">lastUpdated</span>: <span class="literal">null</span></span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="attr">totalPrice</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> </span><br><span class="line">      state.<span class="property">items</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, item</span>) =&gt;</span> sum + item.<span class="property">price</span> * item.<span class="property">quantity</span>, <span class="number">0</span>)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">addItem</span>(<span class="params">product</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> existing = <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">find</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span> === product.<span class="property">id</span>)</span><br><span class="line">      <span class="keyword">if</span> (existing) &#123;</span><br><span class="line">        existing.<span class="property">quantity</span>++</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">push</span>(&#123; ...product, <span class="attr">quantity</span>: <span class="number">1</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">lastUpdated</span> = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>()</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">removeItem</span>(<span class="params">productId</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">items</span> = <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span> !== productId)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="组合式API最佳实践"><a href="#组合式API最佳实践" class="headerlink" title="组合式API最佳实践"></a>组合式API最佳实践</h3><h4 id="1-复杂状态管理"><a href="#1-复杂状态管理" class="headerlink" title="1. 复杂状态管理"></a>1. 复杂状态管理</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores/theme.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useThemeStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;theme&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> theme = <span class="title function_">ref</span>(<span class="string">&#x27;light&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> isDark = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> theme.<span class="property">value</span> === <span class="string">&#x27;dark&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">toggleTheme</span>(<span class="params"></span>) &#123;</span><br><span class="line">    theme.<span class="property">value</span> = theme.<span class="property">value</span> === <span class="string">&#x27;light&#x27;</span> ? <span class="string">&#x27;dark&#x27;</span> : <span class="string">&#x27;light&#x27;</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>, theme.<span class="property">value</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; theme, isDark, toggleTheme &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="2-跨Store调用"><a href="#2-跨Store调用" class="headerlink" title="2. 跨Store调用"></a>2. 跨Store调用</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores/checkout.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCheckoutStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;checkout&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">processOrder</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> user = <span class="title function_">useUserStore</span>()</span><br><span class="line">      <span class="keyword">const</span> cart = <span class="title function_">useCartStore</span>()</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span> (!user.<span class="property">isLoggedIn</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;需要登录&#x27;</span>)</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/orders&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">`Bearer <span class="subst">$&#123;user.token&#125;</span>`</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(cart.<span class="property">items</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">      </span><br><span class="line">      cart.<span class="title function_">clear</span>()</span><br><span class="line">      <span class="keyword">return</span> response.<span class="title function_">json</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="项目结构建议"><a href="#项目结构建议" class="headerlink" title="项目结构建议"></a>项目结构建议</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">├── stores/</span><br><span class="line">│   ├── user.js        # 用户认证</span><br><span class="line">│   ├── cart.js        # 购物车</span><br><span class="line">│   ├── theme.js       # 主题管理</span><br><span class="line">│   └── index.js       # Store聚合导出</span><br><span class="line">├── plugins/</span><br><span class="line">│   └── persist.js     # 持久化插件</span><br><span class="line">└── components/</span><br><span class="line">    └── User/</span><br><span class="line">        └── LoginForm.vue</span><br></pre></td></tr></table></figure>

<h3 id="TypeScript支持"><a href="#TypeScript支持" class="headerlink" title="TypeScript支持"></a>TypeScript支持</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores/types.ts</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">UserProfile</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">email</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">CartItem</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">price</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">quantity</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// stores/user.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">token</span>: <span class="string">&#x27;&#x27;</span> <span class="keyword">as</span> <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">profile</span>: <span class="literal">null</span> <span class="keyword">as</span> <span class="title class_">UserProfile</span> | <span class="literal">null</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// stores/cart.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCartStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;cart&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">items</span>: [] <span class="keyword">as</span> <span class="title class_">CartItem</span>[]</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="运行验证"><a href="#运行验证" class="headerlink" title="运行验证"></a>运行验证</h3><ol>
<li>在组件中测试状态响应性</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;购物车总价：&#123;&#123; cart.totalPrice &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;item in cart.items&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">      &#123;&#123; item.name &#125;&#125; × &#123;&#123; item.quantity &#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useCartStore &#125; from &#x27;@/stores/cart&#x27;</span><br><span class="line"></span><br><span class="line">const cart = useCartStore()</span><br><span class="line"></span><br><span class="line">// 添加测试商品</span><br><span class="line">cart.addItem(&#123;</span><br><span class="line">  id: 1,</span><br><span class="line">  name: &#x27;Vue3实战指南&#x27;,</span><br><span class="line">  price: 99.9</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>Pinia提供了更简洁的API和更好的TypeScript支持，通过组合式API可以轻松管理复杂状态逻辑。配合本地存储可实现状态持久化，建议通过插件机制统一处理存储逻辑，保持业务代码的纯净性</p>
<h3 id="搭配-LocalStorage-使用："><a href="#搭配-LocalStorage-使用：" class="headerlink" title="搭配 LocalStorage 使用："></a>搭配 LocalStorage 使用：</h3><h4 id="基础配置-2"><a href="#基础配置-2" class="headerlink" title="基础配置"></a>基础配置</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(pinia)</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="用户认证Store"><a href="#用户认证Store" class="headerlink" title="用户认证Store"></a>用户认证Store</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores/user.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useUserStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;user&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">token</span>: <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;user_token&#x27;</span>) || <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">profile</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;user_profile&#x27;</span>) || <span class="string">&#x27;null&#x27;</span>)</span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params">credentials</span>) &#123;</span><br><span class="line">      <span class="comment">// 模拟API请求</span></span><br><span class="line">      <span class="keyword">const</span> mockResponse = &#123;</span><br><span class="line">        <span class="attr">token</span>: <span class="string">&#x27;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9&#x27;</span>,</span><br><span class="line">        <span class="attr">user</span>: &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;示例用户&#x27;</span> &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">token</span> = mockResponse.<span class="property">token</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">profile</span> = mockResponse.<span class="property">user</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 持久化存储</span></span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;user_token&#x27;</span>, mockResponse.<span class="property">token</span>)</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;user_profile&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(mockResponse.<span class="property">user</span>))</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="title function_">logout</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">token</span> = <span class="literal">null</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">profile</span> = <span class="literal">null</span></span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;user_token&#x27;</span>)</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;user_profile&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="attr">isLoggedIn</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> !!state.<span class="property">token</span>,</span><br><span class="line">    <span class="attr">userName</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">profile</span>?.<span class="property">name</span> || <span class="string">&#x27;游客&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="组件实现"><a href="#组件实现" class="headerlink" title="组件实现"></a>组件实现</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- LoginForm.vue --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; useUserStore &#125; from &#x27;@/stores/user&#x27;</span><br><span class="line"></span><br><span class="line">const userStore = useUserStore()</span><br><span class="line">const form = ref(&#123; email: &#x27;test@example.com&#x27;, password: &#x27;123456&#x27; &#125;)</span><br><span class="line"></span><br><span class="line">const handleLogin = async () =&gt; &#123;</span><br><span class="line">  if (!form.value.email || !form.value.password) return</span><br><span class="line">  await userStore.login(form.value)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-if=&quot;!userStore.isLoggedIn&quot;&gt;</span><br><span class="line">    &lt;input v-model=&quot;form.email&quot; type=&quot;email&quot;&gt;</span><br><span class="line">    &lt;input v-model=&quot;form.password&quot; type=&quot;password&quot;&gt;</span><br><span class="line">    &lt;button @click=&quot;handleLogin&quot;&gt;登录&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;div v-else&gt;</span><br><span class="line">    &lt;p&gt;欢迎回来，&#123;&#123; userStore.userName &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;userStore.logout&quot;&gt;退出登录&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="自动持久化方案"><a href="#自动持久化方案" class="headerlink" title="自动持久化方案"></a>自动持久化方案</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// plugins/persist.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">piniaPersist</span> = (<span class="params">&#123; store &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 初始化时加载存储</span></span><br><span class="line">  <span class="keyword">const</span> savedState = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(store.<span class="property">$id</span>)</span><br><span class="line">  <span class="keyword">if</span> (savedState) &#123;</span><br><span class="line">    store.$patch(<span class="title class_">JSON</span>.<span class="title function_">parse</span>(savedState))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 订阅状态变化</span></span><br><span class="line">  store.$subscribe(<span class="function">(<span class="params">mutation, state</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(store.<span class="property">$id</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(state))</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js中注册</span></span><br><span class="line">pinia.<span class="title function_">use</span>(piniaPersist)</span><br></pre></td></tr></table></figure>

<h4 id="建议："><a href="#建议：" class="headerlink" title="建议："></a>建议：</h4><p>1.<strong>安全存储</strong>‌<br>敏感数据建议加密后存储：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/crypto.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">SECRET_KEY</span> = <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">VITE_STORAGE_KEY</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">encrypt</span> = (<span class="params">data</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">btoa</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">decrypt</span> = (<span class="params">ciphertext</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title function_">atob</span>(ciphertext))</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2‌.<strong>模块化结构</strong>‌<br>推荐按业务功能划分store模块：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">├── stores/</span><br><span class="line">│   ├── user.js     # 用户认证</span><br><span class="line">│   ├── cart.js     # 购物车数据</span><br><span class="line">│   └── theme.js    # 主题配置</span><br></pre></td></tr></table></figure>

<p>3.<strong>状态更新规范</strong>‌<br>必须通过actions修改状态保证追踪性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误方式</span></span><br><span class="line">userStore.<span class="property">token</span> = <span class="string">&#x27;new_token&#x27;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确方式</span></span><br><span class="line">userStore.$patch(&#123; <span class="attr">token</span>: <span class="string">&#x27;new_token&#x27;</span> &#125;)</span><br><span class="line"><span class="comment">// 或定义专用action</span></span><br></pre></td></tr></table></figure>

<h4 id="购物车示例"><a href="#购物车示例" class="headerlink" title="购物车示例"></a>购物车示例</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores/cart.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCartStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;cart&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">items</span>: <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;cart&#x27;</span>) || <span class="string">&#x27;[]&#x27;</span>)</span><br><span class="line">  &#125;),</span><br><span class="line"></span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">addItem</span>(<span class="params">product</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> existing = <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">find</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">id</span> === product.<span class="property">id</span>)</span><br><span class="line">      existing ? existing.<span class="property">quantity</span>++ : <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">push</span>(&#123; ...product, <span class="attr">quantity</span>: <span class="number">1</span> &#125;)</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;cart&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">items</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="attr">total</span>: <span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">items</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, item</span>) =&gt;</span> </span><br><span class="line">      sum + item.<span class="property">price</span> * item.<span class="property">quantity</span>, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/blog2025.github.io/2025/07/31/Rust/" rel="prev" title="Rust">
                  <i class="fa fa-angle-left"></i> Rust
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/blog2025.github.io/2025/07/31/Vue3%20%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E6%A8%A1%E6%9D%BF/" rel="next" title="Vue3 实际开发模板">
                  Vue3 实际开发模板 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    
    <!-- 去除心形图案
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    -->
    <span class="post-meta-divider">|</span>

    <span class="author" itemprop="copyrightHolder">lsdyun</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

<!--隐藏网页底部powered by Hexo 强力驱动-->
<!--
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>
-->

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script>
<script src="/blog2025.github.io/js/comments.js"></script><script src="/blog2025.github.io/js/utils.js"></script><script src="/blog2025.github.io/js/motion.js"></script><script src="/blog2025.github.io/js/sidebar.js"></script><script src="/blog2025.github.io/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/blog2025.github.io/js/third-party/search/local-search.js"></script>




  <script src="/blog2025.github.io/js/third-party/fancybox.js"></script>

  <script src="/blog2025.github.io/js/third-party/pace.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '64px',
  right: 'unset',
  left: '32px',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#100f2c',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script>

</body>
</html>
