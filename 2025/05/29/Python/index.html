<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/blog2025.github.io/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog2025.github.io/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog2025.github.io/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/blog2025.github.io/images/logo.svg" color="#222">

<link rel="stylesheet" href="/blog2025.github.io/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"lsdyun.github.io","root":"/blog2025.github.io/","images":"/blog2025.github.io/images","scheme":"Pisces","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/blog2025.github.io/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/blog2025.github.io/js/config.js"></script>

    <meta name="description" content="简介Python 是一种解释型、面向对象、动态数据类型的高级程序设计语言。  Python 是一种解释型语言： 这意味着开发过程中没有了编译这个环节。 Python 代码执行时通过解释器逐行转换为机器指令，无需预编译步骤。 Java 是编译+解释混合型，先将源代码编译为.class字节码文件，再由JVM解释或JIT动态编译为机器码。 12hello.py &#x3D;&gt; 机器码 &#x3D;&gt; 执行hel">
<meta property="og:type" content="article">
<meta property="og:title" content="Python">
<meta property="og:url" content="https://lsdyun.github.io/blog2025.github.io/2025/05/29/Python/index.html">
<meta property="og:site_name" content="记录博客">
<meta property="og:description" content="简介Python 是一种解释型、面向对象、动态数据类型的高级程序设计语言。  Python 是一种解释型语言： 这意味着开发过程中没有了编译这个环节。 Python 代码执行时通过解释器逐行转换为机器指令，无需预编译步骤。 Java 是编译+解释混合型，先将源代码编译为.class字节码文件，再由JVM解释或JIT动态编译为机器码。 12hello.py &#x3D;&gt; 机器码 &#x3D;&gt; 执行hel">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://lsdyun.github.io/blog2025.github.io/2025/05/29/Python/image-20250529113055264.png">
<meta property="og:image" content="https://lsdyun.github.io/blog2025.github.io/2025/05/29/Python/list_slicing1_new1.png">
<meta property="og:image" content="https://lsdyun.github.io/blog2025.github.io/2025/05/29/Python/image-20250529135501472.png">
<meta property="og:image" content="https://www.runoob.com/wp-content/uploads/2014/05/py-tup-10-26-1.png">
<meta property="og:image" content="https://www.runoob.com/wp-content/uploads/2024/03/decorators-python-1.png">
<meta property="og:image" content="https://www.runoob.com/wp-content/uploads/2024/03/decorators-python-2.png">
<meta property="og:image" content="https://www.runoob.com/wp-content/uploads/2014/05/types_namespace-1.png">
<meta property="og:image" content="https://www.runoob.com/wp-content/uploads/2014/05/1418490-20180906153626089-1835444372.png">
<meta property="og:image" content="https://www.runoob.com/wp-content/uploads/2013/11/Cgi01.png">
<meta property="og:image" content="https://lsdyun.github.io/blog2025.github.io/image-20250605113943344.png">
<meta property="og:image" content="https://lsdyun.github.io/blog2025.github.io/image-20250605113954591.png">
<meta property="og:image" content="https://lsdyun.github.io/blog2025.github.io/2025/05/29/Python/%E6%8E%88%E6%9D%83%E7%A0%81.png">
<meta property="og:image" content="https://www.runoob.com/wp-content/uploads/2016/04/json-dumps-loads.png">
<meta property="og:image" content="https://www.runoob.com/wp-content/uploads/2024/12/parsing-html-with-beautifulsoup-in-python-1.jpg">
<meta property="og:image" content="https://lsdyun.github.io/blog2025.github.io/2025/05/29/Python/image-20250608114918652.png">
<meta property="og:image" content="https://lsdyun.github.io/blog2025.github.io/2025/05/29/Python/image-20250608114805142.png">
<meta property="og:image" content="https://lsdyun.github.io/blog2025.github.io/2025/05/29/Python/image-20250608115601614.png">
<meta property="article:published_time" content="2025-05-29T02:22:14.934Z">
<meta property="article:modified_time" content="2025-06-08T04:07:25.421Z">
<meta property="article:author" content="lsdyun">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://lsdyun.github.io/blog2025.github.io/2025/05/29/Python/image-20250529113055264.png">


<link rel="canonical" href="https://lsdyun.github.io/blog2025.github.io/2025/05/29/Python/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://lsdyun.github.io/blog2025.github.io/2025/05/29/Python/","path":"2025/05/29/Python/","title":"Python"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Python | 记录博客</title>
  








  <noscript>
    <link rel="stylesheet" href="/blog2025.github.io/css/noscript.css">
  </noscript>
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog2025.github.io/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">记录博客</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/blog2025.github.io/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/blog2025.github.io/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-categories"><a href="/blog2025.github.io/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/blog2025.github.io/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BC%80%E5%A7%8B"><span class="nav-number">2.</span> <span class="nav-text">开始</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="nav-number">2.1.</span> <span class="nav-text">基础语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.2.</span> <span class="nav-text">基本数据类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E5%AD%97%EF%BC%88Number%EF%BC%89"><span class="nav-number">2.2.1.</span> <span class="nav-text">数字（Number）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%88String%EF%BC%89"><span class="nav-number">2.2.2.</span> <span class="nav-text">字符串（String）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#bool%EF%BC%88%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B%EF%BC%89"><span class="nav-number">2.2.3.</span> <span class="nav-text">bool（布尔类型）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#List%EF%BC%88%E5%88%97%E8%A1%A8%EF%BC%89"><span class="nav-number">2.2.4.</span> <span class="nav-text">List（列表）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tuple%EF%BC%88%E5%85%83%E7%BB%84%EF%BC%89"><span class="nav-number">2.2.5.</span> <span class="nav-text">Tuple（元组）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Set%EF%BC%88%E9%9B%86%E5%90%88%EF%BC%89"><span class="nav-number">2.2.6.</span> <span class="nav-text">Set（集合）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Dictionary%EF%BC%88%E5%AD%97%E5%85%B8%EF%BC%89"><span class="nav-number">2.2.7.</span> <span class="nav-text">Dictionary（字典）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="nav-number">2.3.</span> <span class="nav-text">Python数据类型转换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="nav-number">2.4.</span> <span class="nav-text">运算符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%8E%A7%E5%88%B6"><span class="nav-number">2.5.</span> <span class="nav-text">条件控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#if"><span class="nav-number">2.5.1.</span> <span class="nav-text">if</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#match%E2%80%A6case"><span class="nav-number">2.5.2.</span> <span class="nav-text">match…case</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#while"><span class="nav-number">2.5.3.</span> <span class="nav-text">while</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for"><span class="nav-number">2.5.4.</span> <span class="nav-text">for</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#break-%E5%92%8C-continue"><span class="nav-number">2.5.5.</span> <span class="nav-text">break 和 continue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pass"><span class="nav-number">2.5.6.</span> <span class="nav-text">pass</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python-%E6%8E%A8%E5%AF%BC%E5%BC%8F"><span class="nav-number">2.6.</span> <span class="nav-text">Python 推导式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Python3-%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8"><span class="nav-number">2.7.</span> <span class="nav-text">Python3 迭代器与生成器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="nav-number">2.7.1.</span> <span class="nav-text">迭代器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E5%99%A8"><span class="nav-number">2.7.2.</span> <span class="nav-text">生成器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">2.8.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0"><span class="nav-number">2.8.1.</span> <span class="nav-text">匿名函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-number">2.9.</span> <span class="nav-text">装饰器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-number">2.9.1.</span> <span class="nav-text">基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8-1"><span class="nav-number">2.9.2.</span> <span class="nav-text">装饰器@</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%A6%E5%8F%82%E6%95%B0%E7%9A%84%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-number">2.9.3.</span> <span class="nav-text">带参数的装饰器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-number">2.9.4.</span> <span class="nav-text">类装饰器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E7%BD%AE%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-number">2.9.5.</span> <span class="nav-text">内置装饰器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AA%E8%A3%85%E9%A5%B0%E5%99%A8%E7%9A%84%E5%A0%86%E5%8F%A0"><span class="nav-number">2.9.6.</span> <span class="nav-text">多个装饰器的堆叠</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97"><span class="nav-number">2.10.</span> <span class="nav-text">模块</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#import"><span class="nav-number">2.10.1.</span> <span class="nav-text">import</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#from-%E2%80%A6-import"><span class="nav-number">2.10.2.</span> <span class="nav-text">from … import</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%99%E6%A8%A1%E5%9D%97%E8%B5%B7%E5%88%AB%E5%90%8Das"><span class="nav-number">2.10.3.</span> <span class="nav-text">给模块起别名as</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#name-%E5%B1%9E%E6%80%A7"><span class="nav-number">2.10.4.</span> <span class="nav-text">__name__ 属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dir-%E5%87%BD%E6%95%B0"><span class="nav-number">2.10.5.</span> <span class="nav-text">dir() 函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E6%A8%A1%E5%9D%97%EF%BC%88%E5%BA%93%EF%BC%89"><span class="nav-number">2.10.6.</span> <span class="nav-text">标准模块（库）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85%EF%BC%88%E7%82%B9%E6%A8%A1%E5%9D%97%E5%90%8D%E7%A7%B0%EF%BC%89"><span class="nav-number">2.10.7.</span> <span class="nav-text">包（点模块名称）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E5%92%8C%E8%BE%93%E5%87%BA"><span class="nav-number">2.11.</span> <span class="nav-text">输入和输出</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%EF%BC%9A"><span class="nav-number">2.11.1.</span> <span class="nav-text">输出：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BE%93%E5%85%A5"><span class="nav-number">2.11.2.</span> <span class="nav-text">输入</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#File"><span class="nav-number">2.12.</span> <span class="nav-text">File</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%96%B9%E6%B3%95"><span class="nav-number">2.12.1.</span> <span class="nav-text">文件方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">2.12.2.</span> <span class="nav-text">文件对象的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pickle-%E6%A8%A1%E5%9D%97"><span class="nav-number">2.12.3.</span> <span class="nav-text">pickle 模块</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OS-%E6%96%87%E4%BB%B6-%E7%9B%AE%E5%BD%95%E6%96%B9%E6%B3%95"><span class="nav-number">2.13.</span> <span class="nav-text">OS 文件&#x2F;目录方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD"><span class="nav-number">2.13.1.</span> <span class="nav-text">常用功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E5%A4%9A%E6%96%B9%E6%B3%95"><span class="nav-number">2.13.2.</span> <span class="nav-text">更多方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%94%99%E8%AF%AF%E5%92%8C%E5%BC%82%E5%B8%B8"><span class="nav-number">2.14.</span> <span class="nav-text">错误和异常</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">2.14.1.</span> <span class="nav-text">异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#try-except"><span class="nav-number">2.14.1.1.</span> <span class="nav-text">try&#x2F;except</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#try-except%E2%80%A6else"><span class="nav-number">2.14.1.2.</span> <span class="nav-text">try&#x2F;except…else</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#try-finally"><span class="nav-number">2.14.1.3.</span> <span class="nav-text">try-finally</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8"><span class="nav-number">2.14.2.</span> <span class="nav-text">抛出异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8"><span class="nav-number">2.14.3.</span> <span class="nav-text">自定义异常</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%AD%E8%A8%80-assert"><span class="nav-number">2.14.4.</span> <span class="nav-text">断言 assert</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#with-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">2.14.5.</span> <span class="nav-text">with 关键字</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.15.</span> <span class="nav-text">面向对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB"><span class="nav-number">2.15.1.</span> <span class="nav-text">类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-init"><span class="nav-number">2.15.2.</span> <span class="nav-text">构造函数__init__</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">2.15.3.</span> <span class="nav-text">类的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%A7%E6%89%BF"><span class="nav-number">2.15.4.</span> <span class="nav-text">继承</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%B1%9E%E6%80%A7%E4%B8%8E%E6%96%B9%E6%B3%95"><span class="nav-number">2.15.5.</span> <span class="nav-text">类属性与方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%92%8C%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="nav-number">2.16.</span> <span class="nav-text">命名空间和作用域</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4-Namespace"><span class="nav-number">2.16.1.</span> <span class="nav-text">命名空间(Namespace)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="nav-number">2.16.2.</span> <span class="nav-text">作用域</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E5%92%8C%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="nav-number">2.16.3.</span> <span class="nav-text">全局变量和局部变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#global-%E5%92%8C-nonlocal%E5%85%B3%E9%94%AE%E5%AD%97"><span class="nav-number">2.16.4.</span> <span class="nav-text">global 和 nonlocal关键字</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E5%BA%93"><span class="nav-number">2.17.</span> <span class="nav-text">标准库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4"><span class="nav-number">2.17.1.</span> <span class="nav-text">日期和时间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0"><span class="nav-number">2.17.2.</span> <span class="nav-text">内置函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#urllib-%E5%BA%93"><span class="nav-number">2.17.3.</span> <span class="nav-text">urllib 库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#operator"><span class="nav-number">2.17.4.</span> <span class="nav-text">operator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#math"><span class="nav-number">2.17.5.</span> <span class="nav-text">math</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#requests"><span class="nav-number">2.17.6.</span> <span class="nav-text">requests</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#random"><span class="nav-number">2.17.7.</span> <span class="nav-text">random</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#statistics"><span class="nav-number">2.17.8.</span> <span class="nav-text">statistics</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#hashlib"><span class="nav-number">2.17.9.</span> <span class="nav-text">hashlib</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8F%E5%8C%96%E7%BB%98%E5%9B%BE%EF%BC%88%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%EF%BC%89"><span class="nav-number">2.17.10.</span> <span class="nav-text">量化绘图（数据可视化）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pyecharts%EF%BC%88%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%EF%BC%89"><span class="nav-number">2.17.11.</span> <span class="nav-text">pyecharts（数据可视化）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#selenium"><span class="nav-number">2.17.12.</span> <span class="nav-text">selenium</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sys-%E6%A8%A1%E5%9D%97"><span class="nav-number">2.17.13.</span> <span class="nav-text">sys 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pickle-%E6%A8%A1%E5%9D%97"><span class="nav-number">2.17.14.</span> <span class="nav-text">Pickle 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#subprocess-%E6%A8%A1%E5%9D%97"><span class="nav-number">2.17.15.</span> <span class="nav-text">subprocess 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#queue-%E6%A8%A1%E5%9D%97"><span class="nav-number">2.17.16.</span> <span class="nav-text">queue 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#StringIO-%E6%A8%A1%E5%9D%97"><span class="nav-number">2.17.17.</span> <span class="nav-text">StringIO 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#logging-%E6%A8%A1%E5%9D%97"><span class="nav-number">2.17.18.</span> <span class="nav-text">logging 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#datetime-%E6%A8%A1%E5%9D%97"><span class="nav-number">2.17.19.</span> <span class="nav-text">datetime 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#re-%E6%A8%A1%E5%9D%97"><span class="nav-number">2.17.20.</span> <span class="nav-text">re 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#csv-%E6%A8%A1%E5%9D%97"><span class="nav-number">2.17.21.</span> <span class="nav-text">csv 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#threading-%E6%A8%A1%E5%9D%97"><span class="nav-number">2.17.22.</span> <span class="nav-text">threading 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#asyncio-%E6%A8%A1%E5%9D%97"><span class="nav-number">2.17.23.</span> <span class="nav-text">asyncio 模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PyQt"><span class="nav-number">2.17.24.</span> <span class="nav-text">PyQt</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7"><span class="nav-number">3.</span> <span class="nav-text">高级</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number">3.1.</span> <span class="nav-text">正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#re-match"><span class="nav-number">3.1.1.</span> <span class="nav-text">re.match</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#re-search"><span class="nav-number">3.1.2.</span> <span class="nav-text">re.search</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#re-sub"><span class="nav-number">3.1.3.</span> <span class="nav-text">re.sub</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#re-compile"><span class="nav-number">3.1.4.</span> <span class="nav-text">re.compile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#re-findall"><span class="nav-number">3.1.5.</span> <span class="nav-text">re.findall</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#re-finditer"><span class="nav-number">3.1.6.</span> <span class="nav-text">re.finditer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#re-split"><span class="nav-number">3.1.7.</span> <span class="nav-text">re.split</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AF%B9%E8%B1%A1"><span class="nav-number">3.1.8.</span> <span class="nav-text">正则表达式对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#re-MatchObject"><span class="nav-number">3.1.8.1.</span> <span class="nav-text">re.MatchObject</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%BF%AE%E9%A5%B0%E7%AC%A6-%E5%8F%AF%E9%80%89%E6%A0%87%E5%BF%97"><span class="nav-number">3.1.9.</span> <span class="nav-text">正则表达式修饰符 - 可选标志</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%A8%A1%E5%BC%8F"><span class="nav-number">3.1.10.</span> <span class="nav-text">正则表达式模式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CGI%E7%BC%96%E7%A8%8B%EF%BC%88%E8%88%8D%E5%BC%83%EF%BC%89"><span class="nav-number">3.2.</span> <span class="nav-text">CGI编程（舍弃）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CGI%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="nav-number">3.2.1.</span> <span class="nav-text">CGI工作流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CGI%E6%9E%B6%E6%9E%84%E5%9B%BE"><span class="nav-number">3.2.2.</span> <span class="nav-text">CGI架构图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Web%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%94%AF%E6%8C%81%E5%8F%8A%E9%85%8D%E7%BD%AE"><span class="nav-number">3.2.3.</span> <span class="nav-text">Web服务器支持及配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AACGI%E7%A8%8B%E5%BA%8F"><span class="nav-number">3.2.4.</span> <span class="nav-text">第一个CGI程序</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#mysqldb-%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">3.3.</span> <span class="nav-text">mysqldb 连接数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#python-%E5%AE%89%E8%A3%85-mysql-connector"><span class="nav-number">3.3.1.</span> <span class="nav-text">python 安装 mysql-connector</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%93"><span class="nav-number">3.3.2.</span> <span class="nav-text">库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A8"><span class="nav-number">3.3.3.</span> <span class="nav-text">表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A2%9E"><span class="nav-number">3.3.4.</span> <span class="nav-text">增</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5"><span class="nav-number">3.3.5.</span> <span class="nav-text">查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0"><span class="nav-number">3.3.6.</span> <span class="nav-text">删</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%B9"><span class="nav-number">3.3.7.</span> <span class="nav-text">改</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PyMySQL-%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">3.4.</span> <span class="nav-text">PyMySQL 连接数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#PyMySQL-%E5%AE%89%E8%A3%85"><span class="nav-number">3.4.1.</span> <span class="nav-text">PyMySQL 安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">3.4.2.</span> <span class="nav-text">连接数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8"><span class="nav-number">3.4.3.</span> <span class="nav-text">创建数据库表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%92%E5%85%A5"><span class="nav-number">3.4.4.</span> <span class="nav-text">数据库插入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9F%A5%E8%AF%A2"><span class="nav-number">3.4.5.</span> <span class="nav-text">数据库查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9B%B4%E6%96%B0"><span class="nav-number">3.4.6.</span> <span class="nav-text">数据库更新</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4"><span class="nav-number">3.4.7.</span> <span class="nav-text">删除</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B"><span class="nav-number">3.5.</span> <span class="nav-text">网络编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-Socket"><span class="nav-number">3.5.1.</span> <span class="nav-text">什么是 Socket?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#socket-%E5%87%BD%E6%95%B0"><span class="nav-number">3.5.2.</span> <span class="nav-text">socket()函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Socket-%E5%AF%B9%E8%B1%A1-%E5%86%85%E5%BB%BA-%E6%96%B9%E6%B3%95"><span class="nav-number">3.5.3.</span> <span class="nav-text">Socket 对象(内建)方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E5%AE%9E%E4%BE%8B"><span class="nav-number">3.5.4.</span> <span class="nav-text">简单实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF-server-py"><span class="nav-number">3.5.4.1.</span> <span class="nav-text">服务端 server.py</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF-client-py"><span class="nav-number">3.5.4.2.</span> <span class="nav-text">客户端 client.py</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Python-Internet-%E6%A8%A1%E5%9D%97"><span class="nav-number">3.5.5.</span> <span class="nav-text">Python Internet 模块</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SMTP-%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6"><span class="nav-number">3.6.</span> <span class="nav-text">SMTP 发送邮件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%E7%A4%BA%E4%BE%8B%EF%BC%9A%EF%BC%88163%E9%82%AE%E7%AE%B1%EF%BC%89"><span class="nav-number">3.6.1.</span> <span class="nav-text">发送邮件示例：（163邮箱）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%87%E5%87%86%E7%A4%BA%E4%BE%8B%EF%BC%9AHTML%E3%80%81%E9%99%84%E4%BB%B6%E3%80%81%E5%9B%BE%E7%89%87"><span class="nav-number">3.6.2.</span> <span class="nav-text">标准示例：HTML、附件、图片</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="nav-number">3.7.</span> <span class="nav-text">多线程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E5%BC%8F%EF%BC%9A"><span class="nav-number">3.7.1.</span> <span class="nav-text">函数式：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="nav-number">3.7.1.1.</span> <span class="nav-text">构造函数参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E6%96%B9%E6%B3%95"><span class="nav-number">3.7.1.2.</span> <span class="nav-text">核心方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E5%B1%9E%E6%80%A7"><span class="nav-number">3.7.1.3.</span> <span class="nav-text">关键属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%BC%8F%EF%BC%9A"><span class="nav-number">3.7.2.</span> <span class="nav-text">类式：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%BC%8F-vs-%E5%87%BD%E6%95%B0%E5%BC%8F%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E5%AF%B9%E6%AF%94%EF%BC%9A"><span class="nav-number">3.7.3.</span> <span class="nav-text">类式 vs 函数式创建线程对比：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5"><span class="nav-number">3.7.4.</span> <span class="nav-text">线程同步</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%8C%E6%AD%A5%E6%9C%BA%E5%88%B6%E6%A6%82%E8%A7%88"><span class="nav-number">3.7.4.1.</span> <span class="nav-text">同步机制概览</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%81%BF%E5%85%8D%E6%AD%BB%E9%94%81%E7%A4%BA%E4%BE%8B%EF%BC%9A%E4%BD%BF%E7%94%A8%E9%94%81%E8%B6%85%E6%97%B6"><span class="nav-number">3.7.4.2.</span> <span class="nav-text">避免死锁示例：使用锁超时</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XML-%E8%A7%A3%E6%9E%90"><span class="nav-number">3.8.</span> <span class="nav-text">XML 解析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ElementTree-%E8%A7%A3%E6%9E%90-xml"><span class="nav-number">3.8.1.</span> <span class="nav-text">ElementTree 解析 xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SAX-%E8%A7%A3%E6%9E%90-xml"><span class="nav-number">3.8.2.</span> <span class="nav-text">SAX 解析 xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DOM%E8%A7%A3%E6%9E%90xml"><span class="nav-number">3.8.3.</span> <span class="nav-text">DOM解析xml</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSON-%E8%A7%A3%E6%9E%90"><span class="nav-number">3.9.</span> <span class="nav-text">JSON 解析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E6%9E%90-JSON-%E6%96%87%E4%BB%B6"><span class="nav-number">3.9.1.</span> <span class="nav-text">解析 JSON 文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%88%AC%E8%99%AB"><span class="nav-number">3.10.</span> <span class="nav-text">爬虫</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E7%A8%8B"><span class="nav-number">3.10.1.</span> <span class="nav-text">流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BeautifulSoup-%E5%BA%93"><span class="nav-number">3.10.2.</span> <span class="nav-text">BeautifulSoup 库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%88%AC%E5%8F%96%E6%A0%87%E5%87%86%E6%A8%A1%E6%9D%BF%EF%BC%9A"><span class="nav-number">3.10.3.</span> <span class="nav-text">爬取标准模板：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95"><span class="nav-number">3.10.4.</span> <span class="nav-text">高级用法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Scrapy%E5%BA%93"><span class="nav-number">3.10.5.</span> <span class="nav-text">Scrapy库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-Scrapy"><span class="nav-number">3.10.5.1.</span> <span class="nav-text">安装 Scrapy</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Scrapy-%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="nav-number">3.10.5.2.</span> <span class="nav-text">Scrapy 项目结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84-Scrapy-%E9%A1%B9%E7%9B%AE%EF%BC%9A"><span class="nav-number">3.10.5.3.</span> <span class="nav-text">创建一个新的 Scrapy 项目：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%88%AC%E5%8F%96%E7%BD%91%E9%A1%B5%EF%BC%9A"><span class="nav-number">3.10.5.4.</span> <span class="nav-text">爬取网页：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E7%88%AC%E8%99%AB%EF%BC%9A"><span class="nav-number">3.10.5.5.</span> <span class="nav-text">启动爬虫：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">3.10.5.6.</span> <span class="nav-text">常用方法</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="lsdyun"
      src="/blog2025.github.io/images/avatar.png">
  <p class="site-author-name" itemprop="name">lsdyun</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/blog2025.github.io/archives/">
          <span class="site-state-item-count">37</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/blog2025.github.io/categories/">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/lsdyun" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lsdyun" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://lsdyun.github.io/blog2025.github.io/2025/05/29/Python/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog2025.github.io/images/avatar.png">
      <meta itemprop="name" content="lsdyun">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="记录博客">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Python | 记录博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Python
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-05-29 10:22:14" itemprop="dateCreated datePublished" datetime="2025-05-29T10:22:14+08:00">2025-05-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-06-08 12:07:25" itemprop="dateModified" datetime="2025-06-08T12:07:25+08:00">2025-06-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/blog2025.github.io/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>


		<!--  设置置顶图标  -->
		        
		<!--  设置置顶图标  -->
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a><strong>简介</strong></h1><p><em><strong>Python 是一种解释型、面向对象、动态数据类型的高级程序设计语言。</strong></em></p>
<ul>
<li><p><strong>Python 是一种解释型语言： 这意味着开发过程中没有了编译这个环节。</strong></p>
<p><strong>Python 代码执行时通过解释器逐行转换为机器指令，无需预编译步骤。</strong></p>
<p><strong>Java 是编译+解释混合型，先将源代码编译为<code>.class</code>字节码文件，再由<code>JVM</code>解释或<code>JIT</code>动态编译为机器码。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello.py =&gt; 机器码 =&gt; 执行</span><br><span class="line">hello.java =&gt; hello.class =&gt; 机器码 =&gt; 执行</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><strong>特性</strong></th>
<th><strong>Python</strong></th>
<th><strong>Java</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>‌执行速度‌</strong></td>
<td><strong>解释执行效率较低（逐行翻译）</strong></td>
<td><strong><code>JIT</code>编译优化后接近原生性能，适合高性能场景</strong></td>
</tr>
<tr>
<td><strong>‌内存管理‌</strong></td>
<td><strong>自动垃圾回收，但内存占用较高</strong></td>
<td><strong>严格的<code>JVM</code>内存管理机制，适合处理大规模数据</strong></td>
</tr>
<tr>
<td><strong>‌典型应用场景‌</strong></td>
<td><strong>快速开发、脚本任务、数据分析&#x2F;ML</strong></td>
<td><strong>企业级应用、安卓开发、高并发服务器</strong></td>
</tr>
</tbody></table>
</li>
<li><p><strong>Python 是交互式语言： 这意味着，您可以在一个 Python 提示符 <code>&gt;&gt;&gt;</code> 后直接执行代码。</strong></p>
</li>
<li><p><strong>Python 是面向对象语言: 这意味着Python支持面向对象的风格或代码封装在对象的编程技术。</strong></p>
</li>
<li><p><strong>Python 是初学者的语言：Python 对初级程序员而言，是一种伟大的语言，它支持广泛的应用程序开发，从简单的文字处理到 WWW 浏览器再到游戏。</strong></p>
</li>
</ul>
<p><strong><em>Python</em> 常用文件扩展名为 .py。</strong></p>
<p><strong><em>Python</em> 特点：</strong></p>
<ul>
<li><strong>源代码是相当容易维护</strong></li>
<li><strong>可扩展：如果你需要一段运行很快的关键代码，或者是想要编写一些不愿开放的算法，你可以使用C或C++完成那部分程序，然后从你的Python程序中调用。</strong></li>
<li><strong>GUI编程：Python支持GUI可以创建和移植到许多系统调用。</strong></li>
<li><strong>可嵌入: 你可以将Python嵌入到C&#x2F;C++程序，让你的程序的用户获得”脚本化”的能力。</strong></li>
<li><strong>丰富的库，跨平台的，在UNIX，Windows和Macintosh兼容很好。</strong></li>
</ul>
<p><strong><img src="/blog2025.github.io/2025/05/29/Python/image-20250529113055264.png" alt="image-20250529113055264"></strong></p>
<hr>
<h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a><strong>开始</strong></h1><h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a><strong>基础语法</strong></h2><ol>
<li><p><strong><em>Python3</em> 源码文件以 UTF-8 编码</strong></p>
</li>
<li><p><strong>标识符：</strong></p>
<ul>
<li><p><strong>第一个字符必须以字母（a-z, A-Z）或下划线 _ 。</strong></p>
</li>
<li><p><strong>标识符的其他的部分由字母、数字和下划线组成。</strong></p>
</li>
<li><p><strong>标识符对大小写敏感，count 和 Count 是不同的标识符。</strong></p>
</li>
<li><p><strong>标识符对长度无硬性限制，但建议保持简洁（一般不超过 20 个字符）。</strong></p>
</li>
<li><p><strong>禁止使用保留关键字，如 if、for、class 等不能作为标识符。</strong></p>
</li>
</ul>
</li>
<li><p><strong><em>python</em> 保留字</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>类别</strong></th>
<th align="left"><strong>关键字</strong></th>
<th align="left"><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>逻辑值</strong></td>
<td align="left"><strong><code>True</code></strong></td>
<td align="left"><strong>布尔真值</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>False</code></strong></td>
<td align="left"><strong>布尔假值</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>None</code></strong></td>
<td align="left"><strong>表示空值或无值</strong></td>
</tr>
<tr>
<td align="left"><strong>逻辑运算</strong></td>
<td align="left"><strong><code>and</code></strong></td>
<td align="left"><strong>逻辑与运算</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>or</code></strong></td>
<td align="left"><strong>逻辑或运算</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>not</code></strong></td>
<td align="left"><strong>逻辑非运算</strong></td>
</tr>
<tr>
<td align="left"><strong>条件控制</strong></td>
<td align="left"><strong><code>if</code></strong></td>
<td align="left"><strong>条件判断语句</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>elif</code></strong></td>
<td align="left"><strong>否则如果（else if 的缩写）</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>else</code></strong></td>
<td align="left"><strong>否则分支</strong></td>
</tr>
<tr>
<td align="left"><strong>循环控制</strong></td>
<td align="left"><strong><code>for</code></strong></td>
<td align="left"><strong>迭代循环</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>while</code></strong></td>
<td align="left"><strong>条件循环</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>break</code></strong></td>
<td align="left"><strong>跳出循环</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>continue</code></strong></td>
<td align="left"><strong>跳过当前循环的剩余部分，进入下一次迭代</strong></td>
</tr>
<tr>
<td align="left"><strong>异常处理</strong></td>
<td align="left"><strong><code>try</code></strong></td>
<td align="left"><strong>尝试执行代码块</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>except</code></strong></td>
<td align="left"><strong>捕获异常</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>finally</code></strong></td>
<td align="left"><strong>无论是否发生异常都会执行的代码块</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>raise</code></strong></td>
<td align="left"><strong>抛出异常</strong></td>
</tr>
<tr>
<td align="left"><strong>函数定义</strong></td>
<td align="left"><strong><code>def</code></strong></td>
<td align="left"><strong>定义函数</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>return</code></strong></td>
<td align="left"><strong>从函数返回值</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>lambda</code></strong></td>
<td align="left"><strong>创建匿名函数</strong></td>
</tr>
<tr>
<td align="left"><strong>类与对象</strong></td>
<td align="left"><strong><code>class</code></strong></td>
<td align="left"><strong>定义类</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>del</code></strong></td>
<td align="left"><strong>删除对象引用</strong></td>
</tr>
<tr>
<td align="left"><strong>模块导入</strong></td>
<td align="left"><strong><code>import</code></strong></td>
<td align="left"><strong>导入模块</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>from</code></strong></td>
<td align="left"><strong>从模块导入特定部分</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>as</code></strong></td>
<td align="left"><strong>为导入的模块或对象创建别名</strong></td>
</tr>
<tr>
<td align="left"><strong>作用域</strong></td>
<td align="left"><strong><code>global</code></strong></td>
<td align="left"><strong>声明全局变量</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>nonlocal</code></strong></td>
<td align="left"><strong>声明非局部变量（用于嵌套函数）</strong></td>
</tr>
<tr>
<td align="left"><strong>异步编程</strong></td>
<td align="left"><strong><code>async</code></strong></td>
<td align="left"><strong>声明异步函数</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>await</code></strong></td>
<td align="left"><strong>等待异步操作完成</strong></td>
</tr>
<tr>
<td align="left"><strong>其他</strong></td>
<td align="left"><strong><code>assert</code></strong></td>
<td align="left"><strong>断言，用于测试条件是否为真</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>in</code></strong></td>
<td align="left"><strong>检查成员关系</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>is</code></strong></td>
<td align="left"><strong>检查对象身份（是否是同一个对象）</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>pass</code></strong></td>
<td align="left"><strong>空语句，用于占位</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>with</code></strong></td>
<td align="left"><strong>上下文管理器，用于资源管理</strong></td>
</tr>
<tr>
<td align="left"></td>
<td align="left"><strong><code>yield</code></strong></td>
<td align="left"><strong>从生成器函数返回值</strong></td>
</tr>
</tbody></table>
</li>
<li><p><strong>注释</strong></p>
<ul>
<li><p><strong>单行注释以 <code>#</code> 开头</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># TEST</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>多行注释可以用多个 <code>#</code> 号，还有 <code>&#39;&#39;&#39;</code> 和 <code>&quot;&quot;&quot;</code>：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一个注释</span></span><br><span class="line"><span class="comment"># 第二个注释</span></span><br><span class="line"> </span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">第三注释</span></span><br><span class="line"><span class="string">第四注释</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">第五注释</span></span><br><span class="line"><span class="string">第六注释</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>行与缩进</strong></p>
<p><strong><em>Python</em> 最具特色的就是使用缩进来表示代码块，不需要使用大括号 <code>&#123;&#125;</code> 。</strong></p>
<p><strong>同一个代码块的语句必须包含相同的缩进空格数。</strong></p>
</li>
<li><p><strong>多行语句</strong></p>
<p><strong><em>Python</em> 通常是一行写完一条语句，但如果语句很长，我们可以使用反斜杠 <code>\</code> 来实现多行语句</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myName = firstName + \</span><br><span class="line">		 lastName</span><br></pre></td></tr></table></figure>

<p><strong>在 [], {}, 或 () 中的多行语句，不需要使用反斜杠 <code>\</code></strong></p>
</li>
<li><p><strong>空行</strong></p>
<p><strong>函数之间或类的方法之间用空行分隔，表示一段新的代码的开始。</strong></p>
<p><strong>类和函数入口之间也用一行空行分隔，以突出函数入口的开始。</strong></p>
<p><strong>空行也是程序代码的一部分。书写时不插入空行，<em>Python</em> 解释器运行也不会出错。</strong></p>
</li>
<li><p><strong>等待用户输入</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">input</span>(<span class="string">&quot;按下 enter 键后退出。&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>同一行显示多条语句，语句之间使用分号 <code>;</code> 分割，</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys; x = <span class="string">&#x27;hello&#x27;</span>; sys.stdout.write(x + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="comment"># 输出 hello</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>多个语句构成代码组</strong></p>
<p><strong>缩进相同的一组语句构成一个代码块，我们称之代码组。</strong></p>
<p><strong>像if、while、def和class这样的复合语句，首行以关键字开始，以冒号( : )结束，该行之后的一行或多行代码构成代码组。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> a :</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;a&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> b :</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;b&quot;</span>)</span><br><span class="line"><span class="keyword">else</span> :</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;c&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>print 输出</strong></p>
<p><strong>默认输出是换行的，在变量末尾加上 <code>end=&quot;&quot;</code>实现不换行</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;world!&quot;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">输出</span></span><br><span class="line"><span class="string">hello</span></span><br><span class="line"><span class="string">world!</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>, end=<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;world!&quot;</span>)</span><br><span class="line"><span class="comment"># 输出 helloworld！</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>import 与 from…import</strong></p>
<ul>
<li><p><strong>将整个模块(<code>amodule</code>)导入</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> amodule</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>从某个模块中导入某个函数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> amodule <span class="keyword">import</span> firstfunction</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>从某个模块中导入多个函数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> amodule <span class="keyword">import</span> firstfunc, secondfunc, thirdfunc</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>end 关键字</strong></p>
<p><strong><code>end</code>的默认值为换行符<code>\n</code>，即每次<code>print()</code>输出后自动换行</strong></p>
<p><strong>通过修改<code>end</code>参数，可以指定输出末尾的字符（如逗号、空格等）而非换行</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello&quot;</span>, end=<span class="string">&quot;, &quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;World&quot;</span>, end=<span class="string">&quot;!&quot;</span>)</span><br><span class="line"><span class="comment"># 输出：Hello, World!</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>取消换行：<code>end=&quot;&quot;</code>会使多次<code>print()</code>输出在同一行</strong></p>
</li>
<li><p><strong>添加分隔符：如<code>end=&quot;|&quot;</code>会用竖线分隔输出项</strong></p>
</li>
<li><p><strong>斐波纳契数列</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 两个元素的总和确定了下一个数</span></span><br><span class="line">a, b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> b &lt; <span class="number">1000</span>:</span><br><span class="line">    <span class="built_in">print</span>(b, end=<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">    a, b = b, a+b</span><br><span class="line"><span class="comment">#输出 1,1,2,3,5,8,13,21,34,55,89,144,233,377,610,987,</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<hr>
<h2 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a><strong>基本数据类型</strong></h2><p><strong><em>Python</em> 中的变量不需要声明。每个变量在使用前都必须赋值，变量赋值以后该变量才会被创建。</strong></p>
<p><strong>在 Python 中，变量就是变量，它没有类型，我们所说的”类型”是变量所指的内存中对象的类型。</strong></p>
<table>
<thead>
<tr>
<th></th>
<th><strong>类型声明方式</strong></th>
<th><strong>类型灵活性</strong></th>
<th><strong>设计理念</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Java</strong></td>
<td><strong>需显式声明变量类型（如 <code>int x = 10;</code>），类型绑定后不可更改（静态类型）。</strong></td>
<td><strong>类型严格，不同类型运算需强制转换（如 <code>int</code> 与 <code>float</code> 相加需显式转型）。</strong></td>
<td><strong>强调类型安全与性能，通过编译期类型检查减少运行时错误。</strong></td>
</tr>
<tr>
<td><strong>Python</strong></td>
<td><strong>无需声明类型，直接赋值即可（如 <code>x = 10</code>），变量类型由赋值内容动态推断（动态类型）。</strong></td>
<td><strong>支持隐式类型转换（如 <code>int + float</code> 自动转为 <code>float</code>），但强类型特性禁止不合理的隐式转换（如 <code>str + int</code> 会报错）。</strong></td>
<td><strong>追求开发效率与简洁性，动态类型允许快速迭代，但需开发者自行保证类型逻辑正确。</strong></td>
</tr>
</tbody></table>
<hr>
<p><strong>变量的类型</strong></p>
<p><strong>type()</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10</span></span><br><span class="line">b = <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(a))</span><br><span class="line"><span class="comment"># 输出 &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(b))</span><br><span class="line"><span class="comment"># 输出 &lt;class &#x27;str&#x27;&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>isinstance()</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">100</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(a, <span class="built_in">int</span>))</span><br><span class="line"><span class="comment"># 输出 True</span></span><br></pre></td></tr></table></figure>

<p><strong><code>type()</code> 和 <code>isinstance()</code> 的区别主要体现在类型检查的严格性和继承关系的处理上，具体对比如下：</strong></p>
<ul>
<li><p><strong><code>type()</code>‌</strong></p>
<ul>
<li><p><strong>直接返回对象的‌精确类型‌，不考虑继承关系。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>: <span class="keyword">pass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>(<span class="title class_ inherited__">Animal</span>): <span class="keyword">pass</span></span><br><span class="line">d = Dog()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(d) == Dog)    <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(d) == Animal) <span class="comment"># False（严格匹配类型）</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>‌<code>isinstance()</code>‌</strong></p>
<ul>
<li><p><strong>检查对象是否为‌指定类或其子类的实例‌，支持继承链判断。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(d, Dog))    <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(d, Animal)) <span class="comment"># True（包含父类）</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<hr>
<p><strong>del：</strong></p>
<p><strong>用于‌删除对象的引用‌或‌移除容器中的元素‌，其核心作用包括：</strong></p>
<ul>
<li><strong>删除变量名（解除变量与对象的绑定）。</strong></li>
<li><strong>删除容器（如列表、字典）中的指定元素。</strong></li>
<li><strong>仅删除引用，不保证释放内存</strong></li>
<li><strong>不可删除不可变对象的元素，如字符串、元组等</strong></li>
</ul>
<p><strong>删除变量‌</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">10</span></span><br><span class="line"><span class="keyword">del</span> x  <span class="comment"># 删除变量 x</span></span><br><span class="line"><span class="built_in">print</span>(x)  <span class="comment"># 报错：NameError（x 未定义）</span></span><br></pre></td></tr></table></figure>

<p><strong>删除列表&#x2F;字典元素‌</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除列表元素</span></span><br><span class="line">lst = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">del</span> lst[<span class="number">1</span>]  <span class="comment"># 移除索引为 1 的元素</span></span><br><span class="line"><span class="built_in">print</span>(lst)  <span class="comment"># 输出 [1, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除字典键值对</span></span><br><span class="line">d = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">del</span> d[<span class="string">&#x27;a&#x27;</span>]  <span class="comment"># 移除键 &#x27;a&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(d)    <span class="comment"># 输出 &#123;&#x27;b&#x27;: 2&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>‌删除切片或范围‌</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">del</span> lst[<span class="number">1</span>:<span class="number">3</span>]  <span class="comment"># 删除索引 1 到 2 的元素</span></span><br><span class="line"><span class="built_in">print</span>(lst)    <span class="comment"># 输出 [1, 4, 5]</span></span><br></pre></td></tr></table></figure>

<p><strong>‌删除对象属性‌</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.value = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">obj = MyClass()</span><br><span class="line"><span class="keyword">del</span> obj.value  <span class="comment"># 删除对象的属性</span></span><br><span class="line"><span class="built_in">print</span>(obj.value)  <span class="comment"># 报错：AttributeError</span></span><br></pre></td></tr></table></figure>

<hr>
<p><strong>标准数据类型</strong></p>
<p><strong><em>Python3</em> 中常见的数据类型有：</strong></p>
<ul>
<li><strong>Number（数字）</strong></li>
<li><strong>String（字符串）</strong></li>
<li><strong>bool（布尔类型）</strong></li>
<li><strong>List（列表）</strong></li>
<li><strong>Tuple（元组）</strong></li>
<li><strong>Set（集合）</strong></li>
<li><strong>Dictionary（字典）</strong></li>
</ul>
<p><strong><em>Python3</em> 的六个标准数据类型中：</strong></p>
<ul>
<li><strong>不可变数据（3 个）：Number（数字）、String（字符串）、Tuple（元组）；</strong></li>
<li><strong>可变数据（3 个）：List（列表）、Dictionary（字典）、Set（集合）。</strong></li>
</ul>
<p><strong>此外还有一些高级的数据类型，如: 字节数组类型(bytes)。</strong></p>
<hr>
<h3 id="数字（Number）"><a href="#数字（Number）" class="headerlink" title="数字（Number）"></a><strong>数字（Number）</strong></h3><p><strong>整数、布尔型、浮点数和复数。</strong></p>
<ul>
<li><strong>int （整数），没有 python2 中的 Long</strong></li>
<li><strong>bool （布尔）</strong></li>
<li><strong>float （浮点数）</strong></li>
<li><strong>complex （复数） - 复数由实部和虚部组成，形式为 <code>a + bj</code> 或<code>complex(a,b)</code> 。</strong></li>
</ul>
<p><strong>注意：</strong></p>
<ul>
<li><p><strong>数值的除法包含两个运算符：<code>/</code> 返回一个浮点数，<code>//</code> 返回一个整数。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">2</span> / <span class="number">4</span>)</span><br><span class="line"><span class="comment"># 输出0.5</span></span><br><span class="line"><span class="built_in">print</span>(<span class="number">2</span> // <span class="number">4</span>)</span><br><span class="line"><span class="comment"># 输出 0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>幂次</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="number">2</span> ** <span class="number">5</span>)</span><br><span class="line"><span class="comment"># 输出 32</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>在混合计算时，Python会把整型转换成为浮点数。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10</span></span><br><span class="line">b = <span class="number">3.0</span></span><br><span class="line"><span class="built_in">print</span>(a + b)</span><br><span class="line"><span class="comment"># 输出 13.0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><font color="red"><em>Python</em> 数字数据类型是不允许改变的</font></strong></p>
</li>
<li><p><strong>常见方法</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>函数</strong></th>
<th align="left"><strong>返回值 ( 描述 )</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>abs(x)</strong></td>
<td align="left"><strong>返回数字的绝对值，如abs(-10) 返回 10</strong></td>
</tr>
<tr>
<td align="left"><strong>ceil(x)</strong></td>
<td align="left"><strong>返回数字的上入整数，如math.ceil(4.1) 返回 5</strong></td>
</tr>
<tr>
<td align="left"><strong>cmp(x, y)</strong></td>
<td align="left"><strong>如果 x &lt; y 返回 -1, 如果 x &#x3D;&#x3D; y 返回 0, 如果 x &gt; y 返回 1。 Python 3 已废弃，使用 (x&gt;y)-(x&lt;y) 替换。</strong></td>
</tr>
<tr>
<td align="left"><strong>exp(x)</strong></td>
<td align="left"><strong>返回e的x次幂(ex),如math.exp(1) 返回2.718281828459045</strong></td>
</tr>
<tr>
<td align="left"><strong>fabs(x)</strong></td>
<td align="left"><strong>以浮点数形式返回数字的绝对值，如math.fabs(-10) 返回10.0</strong></td>
</tr>
<tr>
<td align="left"><strong>floor(x)</strong></td>
<td align="left"><strong>返回数字的下舍整数，如math.floor(4.9)返回 4</strong></td>
</tr>
<tr>
<td align="left"><strong>log(x)</strong></td>
<td align="left"><strong>如math.log(math.e)返回1.0,math.log(100,10)返回2.0</strong></td>
</tr>
<tr>
<td align="left"><strong>log10(x)</strong></td>
<td align="left"><strong>返回以10为基数的x的对数，如math.log10(100)返回 2.0</strong></td>
</tr>
<tr>
<td align="left"><strong>max(x1, x2,…))</strong></td>
<td align="left"><strong>返回给定参数的最大值，参数可以为序列。</strong></td>
</tr>
<tr>
<td align="left"><strong>min(x1, x2,…)</strong></td>
<td align="left"><strong>返回给定参数的最小值，参数可以为序列。</strong></td>
</tr>
<tr>
<td align="left"><strong>modf(x)</strong></td>
<td align="left"><strong>返回x的整数部分与小数部分，两部分的数值符号与x相同，整数部分以浮点型表示。</strong></td>
</tr>
<tr>
<td align="left"><strong>pow(x, y)</strong></td>
<td align="left"><strong>x</strong>y 运算后的值。**</td>
</tr>
<tr>
<td align="left"><strong>round(x [,n])</strong></td>
<td align="left"><strong>返回浮点数 x 的四舍五入值，如给出 n 值，则代表舍入到小数点后的位数。其实准确的说是保留值将保留到离上一位更近的一端。</strong></td>
</tr>
<tr>
<td align="left"><strong>sqrt(x)</strong></td>
<td align="left"><strong>返回数字x的平方根。</strong></td>
</tr>
<tr>
<td align="left"><strong>随机数函数</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><strong>choice(seq)</strong></td>
<td align="left"><strong>从序列的元素中随机挑选一个元素，比如random.choice(range(10))，从0到9中随机挑选一个整数。</strong></td>
</tr>
<tr>
<td align="left"><strong>randrange ([start,] stop [,step])</strong></td>
<td align="left"><strong>从指定范围内，按指定基数递增的集合中获取一个随机数，基数默认值为 1</strong></td>
</tr>
<tr>
<td align="left"><strong>random()</strong></td>
<td align="left"><strong>随机生成下一个实数，它在[0,1)范围内。</strong></td>
</tr>
<tr>
<td align="left"><strong>seed([x])</strong></td>
<td align="left"><strong>改变随机数生成器的种子seed。如果你不了解其原理，你不必特别去设定seed，Python会帮你选择seed。</strong></td>
</tr>
<tr>
<td align="left"><strong>shuffle(lst)</strong></td>
<td align="left"><strong>将序列的所有元素随机排序</strong></td>
</tr>
<tr>
<td align="left"><strong>uniform(x, y)</strong></td>
<td align="left"><strong>随机生成下一个实数，它在[x,y]范围内。</strong></td>
</tr>
<tr>
<td align="left"><strong>三角函数</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><strong>acos(x)</strong></td>
<td align="left"><strong>返回x的反余弦弧度值。</strong></td>
</tr>
<tr>
<td align="left"><strong>asin(x)</strong></td>
<td align="left"><strong>返回x的反正弦弧度值。</strong></td>
</tr>
<tr>
<td align="left"><strong>atan(x)</strong></td>
<td align="left"><strong>返回x的反正切弧度值。</strong></td>
</tr>
<tr>
<td align="left"><strong>atan2(y, x)</strong></td>
<td align="left"><strong>返回给定的 X 及 Y 坐标值的反正切值。</strong></td>
</tr>
<tr>
<td align="left"><strong>cos(x)</strong></td>
<td align="left"><strong>返回x的弧度的余弦值。</strong></td>
</tr>
<tr>
<td align="left"><strong>hypot(x, y)</strong></td>
<td align="left"><strong>返回欧几里德范数 sqrt(x<em>x + y</em>y)。</strong></td>
</tr>
<tr>
<td align="left"><strong>sin(x)</strong></td>
<td align="left"><strong>返回的x弧度的正弦值。</strong></td>
</tr>
<tr>
<td align="left"><strong>tan(x)</strong></td>
<td align="left"><strong>返回x弧度的正切值。</strong></td>
</tr>
<tr>
<td align="left"><strong>degrees(x)</strong></td>
<td align="left"><strong>将弧度转换为角度,如degrees(math.pi&#x2F;2) ， 返回90.0</strong></td>
</tr>
<tr>
<td align="left"><strong>radians(x)</strong></td>
<td align="left"><strong>将角度转换为弧度</strong></td>
</tr>
<tr>
<td align="left"><strong>数学常量</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><strong>pi</strong></td>
<td align="left"><strong>数学常量 pi（圆周率，一般以π来表示）</strong></td>
</tr>
<tr>
<td align="left"><strong>e</strong></td>
<td align="left"><strong>数学常量 e，e即自然常数（自然常数）。</strong></td>
</tr>
</tbody></table>
</li>
</ul>
<hr>
<h3 id="字符串（String）"><a href="#字符串（String）" class="headerlink" title="字符串（String）"></a><strong>字符串（String）</strong></h3><ul>
<li><p><strong><em>Python</em> 中单引号 <code>&#39;</code> 和双引号 <code>&quot;</code> 使用完全相同。</strong></p>
</li>
<li><p><strong>使用三引号(<code>&#39;&#39;&#39;</code> 或 <code>&quot;&quot;&quot;</code>)可以指定一个多行字符串。</strong></p>
</li>
<li><p><strong>转义符 <code>\</code>。<a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-string.html">更多转义字符</a></strong></p>
</li>
<li><p><strong>反斜杠可以用来转义，使用 <code>r</code> 可以让反斜杠不发生转义。 如 <code>r&quot;this is a line with \n&quot;</code> 则 <code>\n</code> 会显示，并不是换行。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;this is a line with \n yourname&quot;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">输出</span></span><br><span class="line"><span class="string">this is a line with </span></span><br><span class="line"><span class="string">yourname</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">r&quot;this is a line with \n yourname&quot;</span>)</span><br><span class="line"><span class="comment"># 输出 this is a line with \n yourname</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>按字面意义级联字符串，如 “this “ “is “ “string” 会被自动转换为 this is string</strong></p>
</li>
<li><p><strong>字符串可以用 <code>+</code> 运算符连接在一起，用 <code>*</code> 运算符重复。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;helloworld&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span> * <span class="number">2</span>)</span><br><span class="line"><span class="comment"># 输出 helloworldhelloworld</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><em>Python</em> 中的字符串有两种索引方式，从左往右以 0 开始，从右往左以 -1 开始。</strong></p>
</li>
<li><p><strong>字符串切片 <code>str[start:end]</code>，其中 start（包含）是切片开始的索引，end（不包含）是切片结束的索引。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;helloworld&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>[<span class="number">2</span>:<span class="number">5</span>])	<span class="comment"># 输出第2位到第5-1位的元素</span></span><br><span class="line"><span class="comment"># 输出 llo</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>[<span class="number">0</span>:-<span class="number">1</span>]) <span class="comment"># 输出第0位到第-1-1位的元素</span></span><br><span class="line"><span class="comment"># 输出 helloworl</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>字符串的切片可以加上步长参数 step，语法格式如下：<code>str[start:end:step]</code></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;helloworld&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>[<span class="number">1</span>:<span class="number">5</span>:<span class="number">2</span>]) <span class="comment"># 输出第1位到第5-1位中每隔一个的字符（步长为2）的元素,</span></span><br><span class="line"><span class="comment"># 输出el</span></span><br><span class="line"><span class="comment">#e l(跳过) l o(跳过)</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><strong>0</strong></th>
<th><strong>1</strong></th>
<th><strong>2</strong></th>
<th><strong>3</strong></th>
<th><strong>4</strong></th>
<th><strong>5</strong></th>
<th><strong>6</strong></th>
<th><strong>7</strong></th>
<th><strong>8</strong></th>
<th><strong>9</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>h</strong></td>
<td><strong>e</strong></td>
<td><strong>l</strong></td>
<td><strong>l</strong></td>
<td><strong>o</strong></td>
<td><strong>w</strong></td>
<td><strong>o</strong></td>
<td><strong>r</strong></td>
<td><strong>l</strong></td>
<td><strong>d</strong></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><strong>-10</strong></th>
<th><strong>-9</strong></th>
<th><strong>-8</strong></th>
<th><strong>-7</strong></th>
<th><strong>-6</strong></th>
<th><strong>-5</strong></th>
<th><strong>-4</strong></th>
<th><strong>-3</strong></th>
<th><strong>-2</strong></th>
<th><strong>-1</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>h</strong></td>
<td><strong>e</strong></td>
<td><strong>l</strong></td>
<td><strong>l</strong></td>
<td><strong>o</strong></td>
<td><strong>w</strong></td>
<td><strong>o</strong></td>
<td><strong>r</strong></td>
<td><strong>l</strong></td>
<td><strong>d</strong></td>
</tr>
</tbody></table>
</li>
<li><p><strong><font color="red"><em>Python</em> 中的字符串不能改变。</font></strong></p>
<p><strong>比如向一个索引位置赋值，比如 <code>word[0] = &#39;m&#39;</code> 会导致错误。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="string">&#x27;helloworld&#x27;</span></span><br><span class="line"><span class="built_in">str</span>[<span class="number">0</span>] = <span class="string">&#x27;g&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">str[0] = &#x27;g&#x27;</span></span><br><span class="line"><span class="string">    ~~~^^^</span></span><br><span class="line"><span class="string">TypeError: &#x27;str&#x27; object does not support item assignment</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><em>Python</em> 没有单独的字符类型，一个字符就是长度为 1 的字符串。</strong></p>
</li>
</ul>
<hr>
<ul>
<li><p><strong>字符串运算符</strong></p>
<p><strong>变量 a 值为字符串 “Hello”，b 变量值为 “Python”：</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>操作符</strong></th>
<th align="left"><strong>描述</strong></th>
<th align="left"><strong>实例</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>+</strong></td>
<td align="left"><strong>字符串连接</strong></td>
<td align="left"><strong>a + b 输出结果： HelloPython</strong></td>
</tr>
<tr>
<td align="left">*****</td>
<td align="left"><strong>重复输出字符串</strong></td>
<td align="left"><strong>a*2 输出结果：HelloHello</strong></td>
</tr>
<tr>
<td align="left"><strong>[]</strong></td>
<td align="left"><strong>通过索引获取字符串中字符</strong></td>
<td align="left"><strong>a[1] 输出结果 e</strong></td>
</tr>
<tr>
<td align="left"><strong>[ : ]</strong></td>
<td align="left"><strong>截取字符串中的一部分，遵循左闭右开原则，str[0:2] 是不包含第 3 个字符的。</strong></td>
<td align="left"><strong>a[1:4] 输出结果 ell</strong></td>
</tr>
<tr>
<td align="left"><strong>in</strong></td>
<td align="left"><strong>成员运算符 - 如果字符串中包含给定的字符返回 True</strong></td>
<td align="left"><strong>‘H’ in a 输出结果 True</strong></td>
</tr>
<tr>
<td align="left"><strong>not in</strong></td>
<td align="left"><strong>成员运算符 - 如果字符串中不包含给定的字符返回 True</strong></td>
<td align="left"><strong>‘M’ not in a 输出结果 True</strong></td>
</tr>
<tr>
<td align="left"><strong>r&#x2F;R</strong></td>
<td align="left"><strong>原始字符串 - 原始字符串：所有的字符串都是直接按照字面的意思来使用，没有转义特殊或不能打印的字符。 原始字符串除在字符串的第一个引号前加上字母 r（可以大小写）以外，与普通字符串有着几乎完全相同的语法。</strong></td>
<td align="left"><strong><code>print( r&#39;\n&#39; ) print( R&#39;\n&#39; )</code></strong></td>
</tr>
<tr>
<td align="left"><strong>%</strong></td>
<td align="left"><strong>格式字符串</strong></td>
<td align="left"></td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 格式字符串</span></span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;我叫 %s 今年 %d 岁!&quot;</span> % (<span class="string">&#x27;小明&#x27;</span>, <span class="number">10</span>))</span><br><span class="line"><span class="comment"># 输出：我叫 小明 今年 10 岁!</span></span><br></pre></td></tr></table></figure>

<p><strong>python字符串格式化符号:</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>符  号</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>%c</strong></td>
<td align="left"><strong>格式化字符及其ASCII码</strong></td>
</tr>
<tr>
<td align="left"><strong>%s</strong></td>
<td align="left"><strong>格式化字符串</strong></td>
</tr>
<tr>
<td align="left"><strong>%d</strong></td>
<td align="left"><strong>格式化整数</strong></td>
</tr>
<tr>
<td align="left"><strong>%u</strong></td>
<td align="left"><strong>格式化无符号整型</strong></td>
</tr>
<tr>
<td align="left"><strong>%o</strong></td>
<td align="left"><strong>格式化无符号八进制数</strong></td>
</tr>
<tr>
<td align="left"><strong>%x</strong></td>
<td align="left"><strong>格式化无符号十六进制数</strong></td>
</tr>
<tr>
<td align="left"><strong>%X</strong></td>
<td align="left"><strong>格式化无符号十六进制数（大写）</strong></td>
</tr>
<tr>
<td align="left"><strong>%f</strong></td>
<td align="left"><strong>格式化浮点数字，可指定小数点后的精度</strong></td>
</tr>
<tr>
<td align="left"><strong>%e</strong></td>
<td align="left"><strong>用科学计数法格式化浮点数</strong></td>
</tr>
<tr>
<td align="left"><strong>%E</strong></td>
<td align="left"><strong>作用同%e，用科学计数法格式化浮点数</strong></td>
</tr>
<tr>
<td align="left"><strong>%g</strong></td>
<td align="left"><strong>%f和%e的简写</strong></td>
</tr>
<tr>
<td align="left"><strong>%G</strong></td>
<td align="left"><strong>%f 和 %E 的简写</strong></td>
</tr>
<tr>
<td align="left"><strong>%p</strong></td>
<td align="left"><strong>用十六进制数格式化变量的地址</strong></td>
</tr>
</tbody></table>
<p><strong>格式化操作符辅助指令:</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>符号</strong></th>
<th align="left"><strong>功能</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left">*****</td>
<td align="left"><strong>定义宽度或者小数点精度</strong></td>
</tr>
<tr>
<td align="left"><strong>-</strong></td>
<td align="left"><strong>用做左对齐</strong></td>
</tr>
<tr>
<td align="left"><strong>+</strong></td>
<td align="left"><strong>在正数前面显示加号( + )</strong></td>
</tr>
<tr>
<td align="left"><strong><code>&lt;sp&gt;</code></strong></td>
<td align="left"><strong>在正数前面显示空格</strong></td>
</tr>
<tr>
<td align="left"><strong>#</strong></td>
<td align="left"><strong>在八进制数前面显示零(‘0’)，在十六进制前面显示’0x’或者’0X’(取决于用的是’x’还是’X’)</strong></td>
</tr>
<tr>
<td align="left"><strong>0</strong></td>
<td align="left"><strong>显示的数字前面填充’0’而不是默认的空格</strong></td>
</tr>
<tr>
<td align="left"><strong>%</strong></td>
<td align="left"><strong>‘%%’输出一个单一的’%’</strong></td>
</tr>
<tr>
<td align="left"><strong>(var)</strong></td>
<td align="left"><strong>映射变量(字典参数)</strong></td>
</tr>
<tr>
<td align="left"><strong>m.n.</strong></td>
<td align="left"><strong>m 是显示的最小总宽度,n 是小数点后的位数(如果可用的话)</strong></td>
</tr>
</tbody></table>
</li>
<li><p><strong><font color="red">f-string 字面量格式化字符串：代替%格式化字符串</font></strong></p>
<p><strong>f-string 格式化字符串以 <code>f</code> 开头，后面跟着字符串，字符串中的表达式用大括号 <code>&#123;&#125;</code> 包起来，它会将变量或表达式计算后的值替换进去，</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 原来使用 % 格式化字符串</span></span><br><span class="line">name = <span class="string">&#x27;张三&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Hello %s&#x27;</span> % name)</span><br><span class="line"><span class="comment"># 输出 Hello 张三</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用f-string 格式化字符串</span></span><br><span class="line">name = <span class="string">&#x27;张三&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Hello <span class="subst">&#123;name&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>再如：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;<span class="number">1</span>+<span class="number">1</span>&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 输出2</span></span><br><span class="line">a = &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;word&#x27;</span>: <span class="string">&#x27;你好&#x27;</span>&#125;</span><br><span class="line">b = <span class="string">f&#x27;<span class="subst">&#123;a[<span class="string">&quot;name&quot;</span>]&#125;</span>: <span class="subst">&#123;a[<span class="string">&quot;word&quot;</span>]&#125;</span>&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="comment"># 输出 张三: 你好</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>三引号</strong></p>
<p><strong><em>Python</em> 三引号允许一个字符串跨多行，字符串中可以包含换行符、制表符以及其他特殊字符。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">para_str = <span class="string">&quot;&quot;&quot;这是一个多行字符串的实例</span></span><br><span class="line"><span class="string">多行字符串可以使用制表符</span></span><br><span class="line"><span class="string">TAB ( \t )。</span></span><br><span class="line"><span class="string">也可以使用换行符 [ \n ]。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span> (para_str)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">这是一个多行字符串的实例</span><br><span class="line">多行字符串可以使用制表符</span><br><span class="line">TAB (    )。</span><br><span class="line">也可以使用换行符 [ </span><br><span class="line"> ]。</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<ul>
<li><p><strong>字符串内部函数</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>方法</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>capitalize()</strong></td>
<td align="left"><strong>将字符串的第一个字符转换为大写</strong></td>
</tr>
<tr>
<td align="left"><strong>center(width, fillchar)</strong></td>
<td align="left"><strong>返回一个指定的宽度 width 居中的字符串，fillchar 为填充的字符，默认为空格。</strong></td>
</tr>
<tr>
<td align="left"><strong>count(str, beg&#x3D; 0,end&#x3D;len(string))</strong></td>
<td align="left"><strong>返回 str 在 string 里面出现的次数，如果 beg 或者 end 指定则返回指定范围内 str 出现的次数</strong></td>
</tr>
<tr>
<td align="left"><strong>bytes.decode(encoding&#x3D;”utf-8”, errors&#x3D;”strict”)</strong></td>
<td align="left"><strong>Python3 中没有 decode 方法，但我们可以使用 bytes 对象的 decode() 方法来解码给定的 bytes 对象，这个 bytes 对象可以由 str.encode() 来编码返回。</strong></td>
</tr>
<tr>
<td align="left"><strong>encode(encoding&#x3D;’UTF-8’,errors&#x3D;’strict’)</strong></td>
<td align="left"><strong>以 encoding 指定的编码格式编码字符串，如果出错默认报一个ValueError 的异常，除非 errors 指定的是’ignore’或者’replace’</strong></td>
</tr>
<tr>
<td align="left"><strong>endswith(suffix, beg&#x3D;0, end&#x3D;len(string))</strong></td>
<td align="left"><strong>检查字符串是否以 suffix 结束，如果 beg 或者 end 指定则检查指定的范围内是否以 suffix 结束，如果是，返回 True,否则返回 False。</strong></td>
</tr>
<tr>
<td align="left"><strong>expandtabs(tabsize&#x3D;8)</strong></td>
<td align="left"><strong>把字符串 string 中的 tab 符号转为空格，tab 符号默认的空格数是 8 。</strong></td>
</tr>
<tr>
<td align="left"><strong>find(str, beg&#x3D;0, end&#x3D;len(string))</strong></td>
<td align="left"><strong>检测 str 是否包含在字符串中，如果指定范围 beg 和 end ，则检查是否包含在指定范围内，如果包含返回开始的索引值，否则返回-1</strong></td>
</tr>
<tr>
<td align="left"><strong>index(str, beg&#x3D;0, end&#x3D;len(string))</strong></td>
<td align="left"><strong>跟find()方法一样，只不过如果str不在字符串中会报一个异常。</strong></td>
</tr>
<tr>
<td align="left"><strong>isalnum()</strong></td>
<td align="left"><strong>检查字符串是否由字母和数字组成，即字符串中的所有字符都是字母或数字。如果字符串至少有一个字符，并且所有字符都是字母或数字，则返回 True；否则返回 False。</strong></td>
</tr>
<tr>
<td align="left"><strong>isalpha()</strong></td>
<td align="left"><strong>如果字符串至少有一个字符并且所有字符都是字母或中文字则返回 True, 否则返回 False</strong></td>
</tr>
<tr>
<td align="left"><strong>isdigit()</strong></td>
<td align="left"><strong>如果字符串只包含数字则返回 True 否则返回 False..</strong></td>
</tr>
<tr>
<td align="left"><strong>islower()</strong></td>
<td align="left"><strong>如果字符串中包含至少一个区分大小写的字符，并且所有这些(区分大小写的)字符都是小写，则返回 True，否则返回 False</strong></td>
</tr>
<tr>
<td align="left"><strong>isnumeric()</strong></td>
<td align="left"><strong>如果字符串中只包含数字字符，则返回 True，否则返回 False</strong></td>
</tr>
<tr>
<td align="left"><strong>isspace()</strong></td>
<td align="left"><strong>如果字符串中只包含空白，则返回 True，否则返回 False.</strong></td>
</tr>
<tr>
<td align="left"><strong>istitle()</strong></td>
<td align="left"><strong>如果字符串是标题化的(见 title())则返回 True，否则返回 False</strong></td>
</tr>
<tr>
<td align="left"><strong>isupper()</strong></td>
<td align="left"><strong>如果字符串中包含至少一个区分大小写的字符，并且所有这些(区分大小写的)字符都是大写，则返回 True，否则返回 False</strong></td>
</tr>
<tr>
<td align="left"><strong>join(seq)</strong></td>
<td align="left"><strong>以指定字符串作为分隔符，将 seq 中所有的元素(的字符串表示)合并为一个新的字符串</strong></td>
</tr>
<tr>
<td align="left"><strong>len(string)</strong></td>
<td align="left"><strong>返回字符串长度</strong></td>
</tr>
<tr>
<td align="left"><strong>ljust(width[, fillchar])</strong></td>
<td align="left"><strong>返回一个原字符串左对齐,并使用 fillchar 填充至长度 width 的新字符串，fillchar 默认为空格。</strong></td>
</tr>
<tr>
<td align="left"><strong>lower()</strong></td>
<td align="left"><strong>转换字符串中所有大写字符为小写.</strong></td>
</tr>
<tr>
<td align="left"><strong>lstrip()</strong></td>
<td align="left"><strong>截掉字符串左边的空格或指定字符。</strong></td>
</tr>
<tr>
<td align="left"><strong>maketrans()</strong></td>
<td align="left"><strong>创建字符映射的转换表，对于接受两个参数的最简单的调用方式，第一个参数是字符串，表示需要转换的字符，第二个参数也是字符串表示转换的目标。</strong></td>
</tr>
<tr>
<td align="left"><strong>max(str)</strong></td>
<td align="left"><strong>返回字符串 str 中最大的字母。</strong></td>
</tr>
<tr>
<td align="left"><strong>min(str)</strong></td>
<td align="left"><strong>返回字符串 str 中最小的字母。</strong></td>
</tr>
<tr>
<td align="left"><strong>replace(old, new [, max])</strong></td>
<td align="left"><strong>把 将字符串中的 old 替换成 new,如果 max 指定，则替换不超过 max 次。</strong></td>
</tr>
<tr>
<td align="left"><strong>rfind(str, beg&#x3D;0,end&#x3D;len(string))</strong></td>
<td align="left"><strong>类似于 find()函数，不过是从右边开始查找.</strong></td>
</tr>
<tr>
<td align="left"><strong>rindex( str, beg&#x3D;0, end&#x3D;len(string))</strong></td>
<td align="left"><strong>类似于 index()，不过是从右边开始.</strong></td>
</tr>
<tr>
<td align="left"><strong>rjust(width,[, fillchar])</strong></td>
<td align="left"><strong>返回一个原字符串右对齐,并使用fillchar(默认空格）填充至长度 width 的新字符串</strong></td>
</tr>
<tr>
<td align="left"><strong>rstrip()</strong></td>
<td align="left"><strong>删除字符串末尾的空格或指定字符。</strong></td>
</tr>
<tr>
<td align="left"><strong>split(str&#x3D;””, num&#x3D;string.count(str))</strong></td>
<td align="left"><strong>以 str 为分隔符截取字符串，如果 num 有指定值，则仅截取 num+1 个子字符串</strong></td>
</tr>
<tr>
<td align="left"><strong>splitlines([keepends])</strong></td>
<td align="left"><strong>按照行(‘\r’, ‘\r\n’, \n’)分隔，返回一个包含各行作为元素的列表，如果参数 keepends 为 False，不包含换行符，如果为 True，则保留换行符。</strong></td>
</tr>
<tr>
<td align="left"><strong>startswith(substr, beg&#x3D;0,end&#x3D;len(string))</strong></td>
<td align="left"><strong>检查字符串是否是以指定子字符串 substr 开头，是则返回 True，否则返回 False。如果beg 和 end 指定值，则在指定范围内检查。</strong></td>
</tr>
<tr>
<td align="left"><strong>strip([chars])</strong></td>
<td align="left"><strong>在字符串上执行 lstrip()和 rstrip()</strong></td>
</tr>
<tr>
<td align="left"><strong>swapcase()</strong></td>
<td align="left"><strong>将字符串中大写转换为小写，小写转换为大写</strong></td>
</tr>
<tr>
<td align="left"><strong>title()</strong></td>
<td align="left"><strong>返回”标题化”的字符串,就是说所有单词都是以大写开始，其余字母均为小写(见 istitle())</strong></td>
</tr>
<tr>
<td align="left"><strong>translate(table, deletechars&#x3D;””)</strong></td>
<td align="left"><strong>根据 table 给出的表(包含 256 个字符)转换 string 的字符, 要过滤掉的字符放到 deletechars 参数中</strong></td>
</tr>
<tr>
<td align="left"><strong>upper()</strong></td>
<td align="left"><strong>转换字符串中的小写字母为大写</strong></td>
</tr>
<tr>
<td align="left"><strong>zfill (width)</strong></td>
<td align="left"><strong>返回长度为 width 的字符串，原字符串右对齐，前面填充0</strong></td>
</tr>
<tr>
<td align="left"><strong>isdecimal()</strong></td>
<td align="left"><strong>检查字符串是否只包含十进制字符，如果是返回 true，否则返回 false。</strong></td>
</tr>
</tbody></table>
</li>
</ul>
<hr>
<h3 id="bool（布尔类型）"><a href="#bool（布尔类型）" class="headerlink" title="bool（布尔类型）"></a><strong>bool（布尔类型）</strong></h3><ul>
<li><p><strong>布尔类型只有两个值：True 和 False。</strong></p>
</li>
<li><p><strong>bool 是 int 的子类，因此布尔值可以被看作整数来使用，其中 True 等价于 1。</strong></p>
</li>
<li><p><strong>可以使用 <code>bool()</code> 函数将其他类型的值转换为布尔值。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 以下值在转化为布尔值时为False，其他为True</span></span><br><span class="line"><span class="literal">None</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line">零 (<span class="number">0</span>、<span class="number">0.0</span>、<span class="number">0j</span>)</span><br><span class="line">空序列（如 <span class="string">&#x27;&#x27;</span>、()、[]）</span><br><span class="line">空映射（如 &#123;&#125;）</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>布尔逻辑运算</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="literal">True</span> <span class="keyword">and</span> <span class="literal">False</span>)  <span class="comment"># False</span></span><br><span class="line"><span class="built_in">print</span>(<span class="literal">True</span> <span class="keyword">or</span> <span class="literal">False</span>)   <span class="comment"># True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="keyword">not</span> <span class="literal">True</span>)        <span class="comment"># False</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="List（列表）"><a href="#List（列表）" class="headerlink" title="List（列表）"></a><strong>List（列表）</strong></h3><ul>
<li><p><strong>列表中元素的类型可以不相同，它支持数字，字符串甚至可以包含列表（所谓嵌套）。</strong></p>
</li>
<li><p><strong>列表是写在方括号 <code>[]</code> 之间、用逗号分隔开的元素列表。</strong></p>
</li>
<li><p><strong>列表可以被索引和截取，列表被截取后返回一个包含所需元素的新列表。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">变量[头下标:尾下标]</span><br><span class="line"><span class="built_in">list</span> = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>索引值以 0 为开始值，-1 为从末尾的开始位置。</strong></p>
<p><strong><img src="/blog2025.github.io/2025/05/29/Python/list_slicing1_new1.png" alt="list_slicing1_new1"></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span> = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>[<span class="number">1</span>:<span class="number">3</span>])</span><br><span class="line"><span class="comment"># 输出 [&#x27;b&#x27;, &#x27;c&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>[<span class="number">1</span>:<span class="number">4</span>:<span class="number">2</span>]) <span class="comment"># 第三个参数截取步长，每隔2个取值</span></span><br><span class="line"><span class="comment"># 输出 [&#x27;b&#x27;, &#x27;d&#x27;]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>加号 + 是列表连接运算符，星号 * 是复制操作。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>]</span><br><span class="line">b = [<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(a + b)</span><br><span class="line"><span class="comment"># 输出 [&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;e&#x27;]</span></span><br><span class="line"><span class="built_in">print</span>(a * <span class="number">2</span>)</span><br><span class="line"><span class="comment"># 输出 [&#x27;a&#x27;,&#x27;b&#x27;,&#x27;a&#x27;,&#x27;b&#x27;]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><font color="red">列表中的元素是可以改变的：</font></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>]</span><br><span class="line">a[<span class="number">2</span>] = <span class="string">&#x27;c&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 报错 越域</span></span><br><span class="line"><span class="string">a[2] = &#x27;c&#x27;</span></span><br><span class="line"><span class="string">    ~^^^</span></span><br><span class="line"><span class="string">IndexError: list assignment index out of range</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">a = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;&#x27;</span>]</span><br><span class="line">a[<span class="number">2</span>] = <span class="string">&#x27;c&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 输出 [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>内置方法</strong></p>
<p><strong>添加元素</strong></p>
<ul>
<li><p><strong>‌<code>append(x)</code>‌</strong><br><strong>在列表末尾添加元素 <code>x</code>（单元素操作）。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">lst.append(<span class="number">3</span>)  <span class="comment"># 结果：[1, 2, 3]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>extend(iterable)</code>‌</strong><br><strong>将可迭代对象（如列表、元组）的元素逐个追加到列表末尾。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">lst.extend([<span class="number">4</span>, <span class="number">5</span>])  <span class="comment"># 结果：[1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>‌<code>insert(index, x)</code>‌</strong><br><strong>在指定索引位置插入元素 <code>x</code>。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">lst.insert(<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>)  <span class="comment"># 结果：[1, &#x27;a&#x27;, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>删除元素</strong></p>
<ul>
<li><p><strong><code>del</code></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">del</span> lst[<span class="number">1</span>]</span><br><span class="line"><span class="built_in">print</span>(lst)</span><br><span class="line"><span class="comment"># 输出 [1, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># del lst[1:3]  # 删除索引 1 到 2 的元素</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>‌<code>remove(x)</code>‌</strong><br><strong>删除列表中第一个匹配的元素 <code>x</code>，若不存在则报错。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">lst.remove(<span class="string">&#x27;a&#x27;</span>)  <span class="comment"># 结果：[1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>‌<code>pop([index])</code>‌</strong><br><strong>删除并返回指定索引的元素（默认删除末尾元素）。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">lst.pop(<span class="number">0</span>)  <span class="comment"># 返回 1，列表变为 [2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>‌<code>clear()</code>‌</strong><br><strong>清空列表所有元素。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">1</span>, <span class="string">&#x27;a&#x27;</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">lst.clear()  <span class="comment"># 结果：[]</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>查找与统计</strong></p>
<ul>
<li><p><strong>‌<code>index(x[, start[, end]])</code>‌</strong><br><strong>返回元素 <code>x</code> 的首次出现索引，可指定搜索范围。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">lst.index(<span class="number">2</span>)  <span class="comment"># 返回 1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>‌<code>count(x)</code>‌</strong><br><strong>统计元素 <code>x</code> 的出现次数。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">lst.count(<span class="number">2</span>)  <span class="comment"># 返回 2</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>排序与反转</strong></p>
<ul>
<li><p><strong>‌<code>sort(key=None, reverse=False)</code>‌</strong><br><strong>原地排序列表（默认升序），支持自定义排序规则。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>]</span><br><span class="line">lst.sort()  <span class="comment"># 结果：[1, 3, 4]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>‌<code>reverse()</code>‌</strong><br><strong>反转列表元素的顺序。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lst = [<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>]</span><br><span class="line">lst.reverse()  <span class="comment"># 结果：[4, 1, 3]</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>复制与合并</strong></p>
<ul>
<li><p><strong><code>copy()</code>‌</strong><br><strong>返回列表的浅拷贝。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new_lst = lst.copy()  <span class="comment"># 新列表与原列表独立</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>‌<code>+</code> 或 <code>extend()</code>‌</strong><br><strong>合并列表（<code>+</code> 生成新列表，<code>extend()</code> 修改原列表）</strong></p>
</li>
</ul>
<p> <strong>其他操作‌</strong></p>
<ul>
<li><p><strong>‌<code>len()</code>‌</strong><br><strong>返回列表长度（非方法，是内置函数）。</strong></p>
</li>
<li><p><strong>‌<code>max()</code></strong></p>
<p><strong>返回列表元素最大值</strong></p>
</li>
<li><p><strong><code>min(list)</code></strong><br><strong>返回列表元素最小值</strong></p>
</li>
<li><p><strong><code>list(seq)</code></strong></p>
<p><strong>元组转换为列表</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><p><strong>嵌套列表</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">n = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">x = [a, n]</span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"><span class="built_in">print</span>(x[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(x[<span class="number">0</span>][<span class="number">1</span>])</span><br><span class="line"><span class="built_in">print</span>(x[<span class="number">1</span>][<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">输出</span></span><br><span class="line"><span class="string">[[&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;], [1, 2, 3]]</span></span><br><span class="line"><span class="string">[&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br><span class="line"><span class="string">b</span></span><br><span class="line"><span class="string">2</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>列表比较</strong></p>
<p><strong>列表比较需要引入 <code>operator</code> 模块的 <code>eq</code> 方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入 operator 模块</span></span><br><span class="line"><span class="keyword">import</span> operator</span><br><span class="line"></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">b = [<span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">c = [<span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;a和b是否相同: &quot;</span>, operator.eq(a,b))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;c和b是否相同: &quot;</span>, operator.eq(c,b))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">a和b是否相同:  False</span></span><br><span class="line"><span class="string">c和b是否相同:  True</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="Tuple（元组）"><a href="#Tuple（元组）" class="headerlink" title="Tuple（元组）"></a><strong>Tuple（元组）</strong></h3><ul>
<li><p><strong><font color="red">元组的元素不能修改。</font></strong></p>
<p><strong>所谓元组的不可变指的是元组所指向的内存中的内容不可变。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tuple</span> = (<span class="string">&#x27;a&#x27;</span>, <span class="number">10</span>)</span><br><span class="line"><span class="built_in">tuple</span>[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">tuple</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 报错</span></span><br><span class="line"><span class="string">tuple[0] = 1</span></span><br><span class="line"><span class="string">    ~~~~~^^^</span></span><br><span class="line"><span class="string">TypeError: &#x27;tuple&#x27; object does not support item assignment</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>元组写在小括号 <code>()</code> 里，元素之间用逗号隔开。</strong></p>
</li>
<li><p><strong>元组中的元素类型也可以不相同</strong></p>
<p><strong><img src="/blog2025.github.io/2025/05/29/Python/image-20250529135501472.png" alt="image-20250529135501472"></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tuple</span> = (<span class="string">&#x27;a&#x27;</span>, <span class="number">10</span>, <span class="number">33</span>, <span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">tuple</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">tuple</span>[<span class="number">1</span>:<span class="number">3</span>]) <span class="comment"># 输出(10, 33)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">tuple</span> * <span class="number">2</span>) <span class="comment"># 输出(&#x27;a&#x27;, 10, 33, &#x27;hello&#x27;, &#x27;a&#x27;, 10, 33, &#x27;hello&#x27;)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">tuple</span>[<span class="number">1</span>:<span class="number">3</span>:<span class="number">2</span>]) <span class="comment"># 输出(10, ) 第三个参数为步长</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>元组中只有个一个元素时，需要最后加个逗号，防止未识别为元组</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tupleA = (<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(tupleA))</span><br><span class="line"><span class="comment"># 输出 &lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line">tupleB = (<span class="string">&#x27;a&#x27;</span>,)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(tupleB))</span><br><span class="line"><span class="comment"># 输出 &lt;class &#x27;tuple&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>删除元组</strong></p>
<p><strong>元组中的元素值是不允许删除的，但我们可以使用<code>del</code>语句来删除整个元组</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tuple</span> = (<span class="string">&#x27;a&#x27;</span>, <span class="number">10</span>, <span class="number">33</span>, <span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> <span class="built_in">tuple</span>[<span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">tuple</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">del tuple[3]</span></span><br><span class="line"><span class="string">        ~~~~~^^^</span></span><br><span class="line"><span class="string">TypeError: &#x27;tuple&#x27; object doesn&#x27;t support item deletion</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> <span class="built_in">tuple</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">tuple</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">&lt;class &#x27;tuple&#x27;&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>元组内置函数</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>方法</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>len(tuple)</strong></td>
<td align="left"><strong>计算元组元素个数。</strong></td>
</tr>
<tr>
<td align="left"><strong>max(tuple)</strong></td>
<td align="left"><strong>返回元组中元素最大值。</strong></td>
</tr>
<tr>
<td align="left"><strong>min(tuple)</strong></td>
<td align="left"><strong>返回元组中元素最小值。</strong></td>
</tr>
<tr>
<td align="left"><strong>tuple(iterable)</strong></td>
<td align="left"><strong>将可迭代系列转换为元组。</strong></td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">list1= [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>]</span><br><span class="line">tuple1=<span class="built_in">tuple</span>(list1)</span><br><span class="line"><span class="built_in">print</span>(tuple1)</span><br><span class="line"><span class="comment"># 输出(&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;)</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="Set（集合）"><a href="#Set（集合）" class="headerlink" title="Set（集合）"></a><strong>Set（集合）</strong></h3><ul>
<li><p><strong><em>Python</em> 中的集合（Set）是一种无序、可变的数据类型，用于存储唯一的元素。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">2</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 输出 &#123;1, 2, 3, 4&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>set集合没有索引（因为无序），无法通过下标访问元素</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">2</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">4</span>]) </span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 报错</span></span><br><span class="line"><span class="string">print(a[4])</span></span><br><span class="line"><span class="string">          ~^^^</span></span><br><span class="line"><span class="string">TypeError: &#x27;set&#x27; object is not subscriptable</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>集合中的元素不会重复，并且可以进行交集、并集、差集等常见的集合操作。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">2</span>&#125;</span><br><span class="line">b = &#123;<span class="string">&#x27;value1&#x27;</span>, <span class="string">&#x27;value2&#x27;</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(a - b) <span class="comment"># 输出差集 &#123;1, 2, 4&#125;</span></span><br><span class="line"><span class="built_in">print</span>(a | b) <span class="comment"># 输出并集 &#123;&#x27;value1&#x27;, 1, 2, 3, 4, &#x27;value2&#x27;&#125;</span></span><br><span class="line"><span class="built_in">print</span>(a &amp; b) <span class="comment"># 输出交集&#123;3&#125;</span></span><br><span class="line"><span class="built_in">print</span>(a ^ b) <span class="comment"># 输出不同时存在的元素 &#123;1, 2, 4, &#x27;value1&#x27;, &#x27;value2&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>集合使用大括号 <code>&#123;&#125;</code> 表示，元素之间用逗号 <code>,</code> 分隔</strong></p>
</li>
<li><p><strong>必须使用 <code>set()</code> 函数创建集合。因为 <code>&#123; &#125;</code> 是用来创建一个空字典。</strong></p>
</li>
<li><p><strong>创建一个空集合必须用 <code>set()</code> 而不是 <code>&#123; &#125;</code>，因为 <code>&#123; &#125;</code> 是用来创建一个空字典。</strong></p>
</li>
<li><p><strong>格式：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;<span class="string">&#x27;value1&#x27;</span>, <span class="string">&#x27;value2&#x27;</span>, <span class="string">&#x27;value3&#x27;</span>, <span class="string">&#x27;...&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">set</span>(a)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 每次输出的结构，集合内的元素顺序都不一样</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>基本操作</strong></p>
<ul>
<li><p><strong><code>add( x )</code>添加元素</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">2</span>&#125;</span><br><span class="line">a.add(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 输出 &#123;1, 2, 3, 4, 10&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>update( x )</code>添加元素，参数可以是列表，集合，元组，字典（只存键）等，</strong></p>
<p><strong>当使用<code>update()</code>方法向集合（set）添加字典时，实际上只会将字典的‌键<code>（key）</code>‌添加到集合中，而不会包含字典的值<code>（value）</code>。这是因为集合的设计初衷是存储唯一元素，且其内部实现基于哈希表，仅能处理可哈希对象（如字符串、数字等不可变类型）</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">2</span>&#125;</span><br><span class="line">a.update([<span class="string">&quot;列表&quot;</span>,<span class="string">&quot;100&quot;</span>]) <span class="comment"># 列表</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 输出 &#123;1, 2, 3, 4, &#x27;100&#x27;, &#x27;列表&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line">a.update(&#123;<span class="number">111</span>,<span class="number">333</span>&#125;) <span class="comment"># 集合</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 输出 &#123;1, 2, 3, 4, 333, 111&#125;</span></span><br><span class="line"></span><br><span class="line">a.update((<span class="number">100</span>,<span class="number">222</span>)) <span class="comment"># 元组</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 输出 &#123;1, 2, 3, 100, 4, 222&#125;</span></span><br><span class="line"></span><br><span class="line">a.update(&#123;<span class="string">&quot;firstname&quot;</span>: <span class="string">&quot;张&quot;</span>, <span class="string">&quot;lastname&quot;</span>: <span class="string">&quot;三&quot;</span>&#125;) <span class="comment"># 字典</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 输出 &#123;1, 2, 3, 4, &#x27;firstname&#x27;, &#x27;lastname&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>remove( x )</code>移除元素</strong></p>
<p><strong>删除不存在的元素时候会报错</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">&quot;haha&quot;</span>&#125;</span><br><span class="line">a.remove(<span class="string">&quot;haha&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 输出 &#123;1, 2, 3, 4&#125;</span></span><br><span class="line"></span><br><span class="line">a.remove(<span class="string">&#x27;aaa&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">a.remove(&#x27;aaa&#x27;)</span></span><br><span class="line"><span class="string">    ~~~~~~~~^^^^^^^</span></span><br><span class="line"><span class="string">KeyError: &#x27;aaa&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>discard( x )</code>移除集合中的元素</strong></p>
<p><strong>如果元素不存在，不会发生错误。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">&quot;haha&quot;</span>&#125;</span><br><span class="line">a.discard(<span class="string">&#x27;aaa&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 输出 &#123;1, 2, 3, 4, &#x27;haha&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>pop()</code> 随机删除集合中的一个元素</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">&quot;haha&quot;</span>&#125;</span><br><span class="line">a.pop()</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 输出 &#123;2, 3, 4, &#x27;haha&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>len(s)</code>计算集合元素个数</strong></p>
</li>
<li><p><strong><code>clear()</code> 清空集合</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">&quot;haha&quot;</span>&#125;</span><br><span class="line">a.clear()</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 输出 set()</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>x in s</code>判断元素是否在集合中存在，返回true或false</strong></p>
</li>
<li><p><strong>更多方法</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>方法</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>copy()</strong></td>
<td align="left"><strong>拷贝一个集合</strong></td>
</tr>
<tr>
<td align="left"><strong>difference()</strong></td>
<td align="left"><strong>返回多个集合的差集</strong></td>
</tr>
<tr>
<td align="left"><strong>difference_update()</strong></td>
<td align="left"><strong>移除集合中的元素，该元素在指定的集合也存在。</strong></td>
</tr>
<tr>
<td align="left"><strong>intersection()</strong></td>
<td align="left"><strong>返回集合的交集</strong></td>
</tr>
<tr>
<td align="left"><strong>intersection_update()</strong></td>
<td align="left"><strong>返回集合的交集。</strong></td>
</tr>
<tr>
<td align="left"><strong>isdisjoint()</strong></td>
<td align="left"><strong>判断两个集合是否包含相同的元素，如果没有返回 True，否则返回 False。</strong></td>
</tr>
<tr>
<td align="left"><strong>issubset()</strong></td>
<td align="left"><strong>判断指定集合是否为该方法参数集合的子集。</strong></td>
</tr>
<tr>
<td align="left"><strong>issuperset()</strong></td>
<td align="left"><strong>判断该方法的参数集合是否为指定集合的子集</strong></td>
</tr>
<tr>
<td align="left"><strong>symmetric_difference()</strong></td>
<td align="left"><strong>返回两个集合中不重复的元素集合。</strong></td>
</tr>
<tr>
<td align="left"><strong>symmetric_difference_update()</strong></td>
<td align="left"><strong>移除当前集合中在另外一个指定集合相同的元素，并将另外一个指定集合中不同的元素插入到当前集合中。</strong></td>
</tr>
<tr>
<td align="left"><strong>union()</strong></td>
<td align="left"><strong>返回两个集合的并集</strong></td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="Dictionary（字典）"><a href="#Dictionary（字典）" class="headerlink" title="Dictionary（字典）"></a><strong>Dictionary（字典）</strong></h3><ul>
<li><p><strong>列表是有序的对象集合，字典是无序的对象集合。</strong></p>
<p><strong>两者之间的区别在于：字典当中的元素是通过键来存取的，而不是通过偏移存取。</strong></p>
</li>
<li><p><strong>字典是一种映射类型，字典用 <code>&#123; &#125;</code> 标识，它是一个无序的 <code>键(key) : 值(value)</code> 的集合。（有点像 Java 中的 Map）</strong></p>
<p><strong>键(key)必须使用不可变类型。【Number（数字）、String（字符串）、Tuple（元组）】，键唯一</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;key1 : value1, key2 : value2, key3 : value3 &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>在同一个字典中，键(key)必须是唯一的。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">dictionary = &#123;&#125;</span><br><span class="line">dictionary[<span class="number">1</span>] = <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="built_in">print</span>(dictionary[<span class="number">1</span>])</span><br><span class="line"><span class="comment"># 输出 hello</span></span><br><span class="line">dictionary[<span class="string">&quot;text&quot;</span>] = <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="built_in">print</span>(dictionary[<span class="string">&quot;text&quot;</span>])</span><br><span class="line"><span class="comment"># 输出 hello</span></span><br><span class="line"></span><br><span class="line">dicA = &#123;<span class="string">&quot;firstname&quot;</span>: <span class="string">&quot;zhang&quot;</span>, <span class="string">&quot;lastname&quot;</span>: <span class="string">&quot;san&quot;</span>, <span class="string">&quot;class&quot;</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(dicA.keys())</span><br><span class="line"><span class="comment"># 输出 dict_keys([&#x27;firstname&#x27;, &#x27;lastname&#x27;, &#x27;class&#x27;])</span></span><br><span class="line"><span class="built_in">print</span>(dicA.values())</span><br><span class="line"><span class="comment"># 输出 dict_values([&#x27;zhang&#x27;, &#x27;san&#x27;, 1])</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(dicA[<span class="string">&#x27;firstname&#x27;</span>]) <span class="comment"># 输出 zhang</span></span><br><span class="line"><span class="built_in">print</span>(dicA[<span class="string">&#x27;class&#x27;</span>])	<span class="comment"># 输出 1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>dict()</code> 函数构建字典</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;方法1&#x27;&#x27;&#x27;</span></span><br><span class="line">A = [(<span class="string">&#x27;apple&#x27;</span>,<span class="string">&#x27;red&#x27;</span>), (<span class="string">&#x27;book&#x27;</span>,<span class="number">10</span>), (<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;张三&#x27;</span>)]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dict</span>(A))</span><br><span class="line"><span class="comment"># 输出 &#123;&#x27;apple&#x27;: &#x27;red&#x27;, &#x27;book&#x27;: 10, &#x27;name&#x27;: &#x27;张三&#x27;&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;方法2&#x27;&#x27;&#x27;</span></span><br><span class="line">B = <span class="built_in">dict</span>(apple=<span class="string">&quot;red&quot;</span>, book=<span class="number">10</span>, name=<span class="string">&quot;张三&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(B)</span><br><span class="line"><span class="comment"># 输出 &#123;&#x27;apple&#x27;: &#x27;red&#x27;, &#x27;book&#x27;: 10, &#x27;name&#x27;: &#x27;张三&#x27;&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;方法3&#x27;&#x27;&#x27;</span></span><br><span class="line">B = &#123;<span class="string">&#x27;apple&#x27;</span>: <span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;book&#x27;</span>: <span class="number">10</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;张三&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(B)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>修改字典</strong></p>
<p><strong>向字典添加新内容的方法是增加新的键&#x2F;值对，修改或删除已有键&#x2F;值对如下实例:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dicA = &#123;<span class="string">&quot;firstname&quot;</span>: <span class="string">&quot;zhang&quot;</span>, <span class="string">&quot;lastname&quot;</span>: <span class="string">&quot;san&quot;</span>, <span class="string">&quot;class&quot;</span>: <span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line">dicA[<span class="string">&quot;class&quot;</span>] = <span class="number">10</span></span><br><span class="line">dicA[<span class="string">&quot;firstname&quot;</span>] = <span class="string">&#x27;张&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(dicA)</span><br><span class="line"><span class="comment"># 输出 &#123;&#x27;firstname&#x27;: &#x27;张&#x27;, &#x27;lastname&#x27;: &#x27;san&#x27;, &#x27;class&#x27;: 10&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>删除字典元素</strong></p>
<p><strong>能删单一的元素也能清空字典，清空只需一项操作。</strong></p>
<p><strong>显式删除一个字典用del命令，如下实例：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">dicA = &#123;<span class="string">&quot;firstname&quot;</span>: <span class="string">&quot;zhang&quot;</span>, <span class="string">&quot;lastname&quot;</span>: <span class="string">&quot;san&quot;</span>, <span class="string">&quot;class&quot;</span>: <span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">del</span> dicA[<span class="string">&#x27;lastname&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(dicA)</span><br><span class="line"><span class="comment"># 输出 &#123;&#x27;firstname&#x27;: &#x27;zhang&#x27;, &#x27;class&#x27;: 1&#125;</span></span><br><span class="line">dicA.clear()</span><br><span class="line"><span class="built_in">print</span>(dicA)</span><br><span class="line"><span class="comment"># 输出 &#123;&#125;</span></span><br><span class="line"><span class="keyword">del</span> dicA</span><br><span class="line"><span class="built_in">print</span>(dicA)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">print(dicA)</span></span><br><span class="line"><span class="string">          ^^^^</span></span><br><span class="line"><span class="string">NameError: name &#x27;dicA&#x27; is not defined. Did you mean: &#x27;dict&#x27;?</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>字典内置方法</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>序号</strong></th>
<th align="left"><strong>函数及描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>len(dict)</strong></td>
<td align="left"><strong>计算字典元素个数，即键的总数。</strong></td>
</tr>
<tr>
<td align="left"><strong>str(dict)</strong></td>
<td align="left"><strong>输出字典，可以打印的字符串表示。</strong></td>
</tr>
<tr>
<td align="left"><strong>type(variable)</strong></td>
<td align="left"><strong>返回输入的变量类型，如果变量是字典就返回字典类型。</strong></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left"><strong>函数</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>dict.clear()</strong></td>
<td><strong>删除字典内所有元素</strong></td>
</tr>
<tr>
<td align="left"><strong>dict.copy()</strong></td>
<td><strong>返回一个字典的浅复制</strong></td>
</tr>
<tr>
<td align="left"><strong>dict.fromkeys()</strong></td>
<td><strong>创建一个新字典，以序列seq中元素做字典的键，val为字典所有键对应的初始值</strong></td>
</tr>
<tr>
<td align="left"><strong>dict.get(key, default&#x3D;None)</strong></td>
<td><strong>返回指定键的值，如果键不在字典中返回 default 设置的默认值</strong></td>
</tr>
<tr>
<td align="left"><strong>key in dict</strong></td>
<td><strong>如果键在字典dict里返回true，否则返回false</strong></td>
</tr>
<tr>
<td align="left"><strong>dict.items()</strong></td>
<td><strong>以列表返回一个视图对象</strong></td>
</tr>
<tr>
<td align="left"><strong>dict.keys()</strong></td>
<td><strong>返回一个视图对象</strong></td>
</tr>
<tr>
<td align="left"><strong>dict.setdefault(key, default&#x3D;None)</strong></td>
<td><strong>和get()类似, 但如果键不存在于字典中，将会添加键并将值设为default</strong></td>
</tr>
<tr>
<td align="left"><strong>dict.update(dict2)</strong></td>
<td><strong>把字典dict2的键&#x2F;值对更新到dict里</strong></td>
</tr>
<tr>
<td align="left"><strong>dict.values()</strong></td>
<td><strong>返回一个视图对象</strong></td>
</tr>
<tr>
<td align="left"><strong>dict.pop(key[,default])</strong></td>
<td><strong>删除字典 key（键）所对应的值，返回被删除的值。</strong></td>
</tr>
<tr>
<td align="left"><strong>dict.popitem()</strong></td>
<td><strong>返回并删除字典中的最后一对键和值。</strong></td>
</tr>
</tbody></table>
</li>
</ul>
<hr>
<p><strong>bytes 类型</strong></p>
<ul>
<li><p><strong>bytes 类型表示的是不可变的二进制序列（byte sequence）。</strong></p>
</li>
<li><p><strong>bytes 类型中的元素是整数值（0 到 255 之间的整数），而不是 Unicode 字符。</strong></p>
</li>
<li><p><strong>bytes 类型通常用于处理二进制数据，比如图像文件、音频文件、视频文件等等。</strong></p>
</li>
<li><p><strong>在网络编程中，也经常使用 bytes 类型来传输二进制数据。</strong></p>
</li>
<li><p><strong>创建 bytes 对象的方式：</strong></p>
<ul>
<li><p><strong>使用 b 前缀</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="string">b&quot;hello&quot;</span></span><br><span class="line"><span class="built_in">print</span>(x)</span><br><span class="line"><span class="comment"># 输出 b&#x27;hello&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(x))</span><br><span class="line"><span class="comment"># 输出 &lt;class &#x27;bytes&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用 bytes() 函数将其他类型的对象转换为 bytes 类型</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bytes</span>(要转换的对象, 编码方式)</span><br><span class="line"><span class="comment"># 编码方式如果省略的话，默认采用UTF-8编码</span></span><br><span class="line">x = <span class="built_in">bytes</span>(<span class="string">&quot;hello&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>bytes 类型也支持许多操作和方法，如切片、拼接、查找、替换等等</strong></p>
</li>
<li><p><strong><font color="red">bytes 类型是不可变的</font>，在进行修改操作时需要创建一个新的 bytes 对象</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="string">b&quot;hello&quot;</span></span><br><span class="line">y = x[<span class="number">1</span>:<span class="number">3</span>]  <span class="comment"># 切片操作，得到 b&quot;el&quot;</span></span><br><span class="line">z = x + <span class="string">b&quot;world&quot;</span>  <span class="comment"># 拼接操作，得到 b&quot;helloworld&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>比较操作</strong></p>
<p><strong>bytes 类型中的元素是整数值，因此在进行比较操作时需要使用相应的整数值。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="string">b&quot;hello&quot;</span></span><br><span class="line"><span class="keyword">if</span> x[<span class="number">0</span>] == <span class="built_in">ord</span>(<span class="string">&quot;h&quot;</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;The first element is &#x27;h&#x27;&quot;</span>)</span><br><span class="line"><span class="comment"># ord() 函数用于将字符转换为相应的整数值。</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="Python数据类型转换"><a href="#Python数据类型转换" class="headerlink" title="Python数据类型转换"></a><strong><em>Python</em>数据类型转换</strong></h2><ul>
<li><p><strong>隐式类型转换</strong></p>
<p><strong>在隐式类型转换中，Python 会自动将一种数据类型转换为另一种数据类型，不需要我们去干预。</strong></p>
<p><strong>Python 会将较小的数据类型转换为较大的数据类型，以避免数据丢失。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">num_int = <span class="number">123</span></span><br><span class="line">num_flo = <span class="number">1.23</span></span><br><span class="line"></span><br><span class="line">num_new = num_int + num_flo</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num_int 数据类型为:&quot;</span>,<span class="built_in">type</span>(num_int))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num_flo 数据类型为:&quot;</span>,<span class="built_in">type</span>(num_flo))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num_new 值为:&quot;</span>,num_new)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num_new 数据类型为:&quot;</span>,<span class="built_in">type</span>(num_new))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">num_int 数据类型为: &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"><span class="string">num_flo 数据类型为: &lt;class &#x27;float&#x27;&gt;</span></span><br><span class="line"><span class="string">num_new: 值为: 124.23</span></span><br><span class="line"><span class="string">num_new 数据类型为: &lt;class &#x27;float&#x27;&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>显式类型转换（强转）</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>函数</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>int(x [,base])</strong></td>
<td align="left"><strong>将x转换为一个整数</strong></td>
</tr>
<tr>
<td align="left"><strong>float(x)</strong></td>
<td align="left"><strong>将x转换到一个浮点数</strong></td>
</tr>
<tr>
<td align="left"><strong>complex(real [,imag])</strong></td>
<td align="left"><strong>创建一个复数</strong></td>
</tr>
<tr>
<td align="left"><strong>str(x)</strong></td>
<td align="left"><strong>将对象 x 转换为字符串</strong></td>
</tr>
<tr>
<td align="left"><strong>repr(x)</strong></td>
<td align="left"><strong>将对象 x 转换为表达式字符串</strong></td>
</tr>
<tr>
<td align="left"><strong>eval(str)</strong></td>
<td align="left"><strong>用来计算在字符串中的有效Python表达式,并返回一个对象</strong></td>
</tr>
<tr>
<td align="left"><strong>tuple(s)</strong></td>
<td align="left"><strong>将序列 s 转换为一个元组</strong></td>
</tr>
<tr>
<td align="left"><strong>list(s)</strong></td>
<td align="left"><strong>将序列 s 转换为一个列表</strong></td>
</tr>
<tr>
<td align="left"><strong>set(s)</strong></td>
<td align="left"><strong>转换为可变集合</strong></td>
</tr>
<tr>
<td align="left"><strong>dict(d)</strong></td>
<td align="left"><strong>创建一个字典。d 必须是一个 (key, value)元组序列。</strong></td>
</tr>
<tr>
<td align="left"><strong>frozenset(s)</strong></td>
<td align="left"><strong>转换为不可变集合</strong></td>
</tr>
<tr>
<td align="left"><strong>chr(x)</strong></td>
<td align="left"><strong>将一个整数转换为一个字符</strong></td>
</tr>
<tr>
<td align="left"><strong>ord(x)</strong></td>
<td align="left"><strong>将一个字符转换为它的整数值</strong></td>
</tr>
<tr>
<td align="left"><strong>hex(x)</strong></td>
<td align="left"><strong>将一个整数转换为一个十六进制字符串</strong></td>
</tr>
<tr>
<td align="left"><strong>oct(x)</strong></td>
<td align="left"><strong>将一个整数转换为一个八进制字符串</strong></td>
</tr>
</tbody></table>
<ul>
<li><p><strong><code>int()</code> 强制转换为整型：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">int</span>(<span class="number">1</span>)   <span class="comment"># x 输出结果为 1</span></span><br><span class="line">y = <span class="built_in">int</span>(<span class="number">2.8</span>) <span class="comment"># y 输出结果为 2</span></span><br><span class="line">z = <span class="built_in">int</span>(<span class="string">&quot;3&quot;</span>) <span class="comment"># z 输出结果为 3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>float()</code> 强制转换为浮点型：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">float</span>(<span class="number">1</span>)     <span class="comment"># x 输出结果为 1.0</span></span><br><span class="line">y = <span class="built_in">float</span>(<span class="number">2.8</span>)   <span class="comment"># y 输出结果为 2.8</span></span><br><span class="line">z = <span class="built_in">float</span>(<span class="string">&quot;3&quot;</span>)   <span class="comment"># z 输出结果为 3.0</span></span><br><span class="line">w = <span class="built_in">float</span>(<span class="string">&quot;4.2&quot;</span>) <span class="comment"># w 输出结果为 4.2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>str()</code> 强制转换为字符串类型：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="built_in">str</span>(<span class="string">&quot;s1&quot;</span>) <span class="comment"># x 输出结果为 &#x27;s1&#x27;</span></span><br><span class="line">y = <span class="built_in">str</span>(<span class="number">2</span>)    <span class="comment"># y 输出结果为 &#x27;2&#x27;</span></span><br><span class="line">z = <span class="built_in">str</span>(<span class="number">3.0</span>)  <span class="comment"># z 输出结果为 &#x27;3.0&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>整型和字符串类型进行运算</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">num_int = <span class="number">123</span></span><br><span class="line">num_str = <span class="string">&quot;456&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num_int 数据类型为:&quot;</span>,<span class="built_in">type</span>(num_int))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;类型转换前，num_str 数据类型为:&quot;</span>,<span class="built_in">type</span>(num_str))</span><br><span class="line"></span><br><span class="line">num_str = <span class="built_in">int</span>(num_str)    <span class="comment"># 强制转换为整型</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;类型转换后，num_str 数据类型为:&quot;</span>,<span class="built_in">type</span>(num_str))</span><br><span class="line"></span><br><span class="line">num_sum = num_int + num_str</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;num_int 与 num_str 相加结果为:&quot;</span>,num_sum)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;sum 数据类型为:&quot;</span>,<span class="built_in">type</span>(num_sum))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">num_int 数据类型为: &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"><span class="string">类型转换前，num_str 数据类型为: &lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line"><span class="string">类型转换后，num_str 数据类型为: &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"><span class="string">num_int 与 num_str 相加结果为: 579</span></span><br><span class="line"><span class="string">sum 数据类型为: &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<hr>
<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a><strong>运算符</strong></h2><p><strong>算术运算符</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>运算符</strong></th>
<th align="left"><strong>描述</strong></th>
<th align="left"><strong>实例</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>+</strong></td>
<td align="left"><strong>加 - 两个对象相加</strong></td>
<td align="left"><strong>a + b 输出结果 31</strong></td>
</tr>
<tr>
<td align="left"><strong>-</strong></td>
<td align="left"><strong>减 - 得到负数或是一个数减去另一个数</strong></td>
<td align="left"><strong>a - b 输出结果 -11</strong></td>
</tr>
<tr>
<td align="left">*****</td>
<td align="left"><strong>乘 - 两个数相乘或是返回一个被重复若干次的字符串</strong></td>
<td align="left"><strong>a * b 输出结果 210</strong></td>
</tr>
<tr>
<td align="left"><strong>&#x2F;</strong></td>
<td align="left"><strong>除 - x 除以 y</strong></td>
<td align="left"><strong>b &#x2F; a 输出结果 2.1</strong></td>
</tr>
<tr>
<td align="left"><strong>%</strong></td>
<td align="left"><strong>取模 - 返回除法的余数</strong></td>
<td align="left"><strong>b % a 输出结果 1</strong></td>
</tr>
<tr>
<td align="left">******</td>
<td align="left"><strong>幂 - 返回x的y次幂</strong></td>
<td align="left"><strong>a</strong>b 为10的21次方**</td>
</tr>
<tr>
<td align="left"><strong>&#x2F;&#x2F;</strong></td>
<td align="left"><strong>取整除 - 往小的方向取整数</strong></td>
<td align="left"><strong><code>&gt;&gt;&gt; 9//2 4 </code><br /><code>&gt;&gt;&gt; -9//2 -5</code></strong></td>
</tr>
</tbody></table>
<hr>
<p><strong>比较运算符</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>运算符</strong></th>
<th align="left"><strong>描述</strong></th>
<th align="left"><strong>实例</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>&#x3D;&#x3D;</strong></td>
<td align="left"><strong>等于 - 比较对象是否相等</strong></td>
<td align="left"><strong>(a &#x3D;&#x3D; b) 返回 False。</strong></td>
</tr>
<tr>
<td align="left"><strong>!&#x3D;</strong></td>
<td align="left"><strong>不等于 - 比较两个对象是否不相等</strong></td>
<td align="left"><strong>(a !&#x3D; b) 返回 True。</strong></td>
</tr>
<tr>
<td align="left"><strong>&gt;</strong></td>
<td align="left"><strong>大于 - 返回x是否大于y</strong></td>
<td align="left"><strong>(a &gt; b) 返回 False。</strong></td>
</tr>
<tr>
<td align="left"><strong>&lt;</strong></td>
<td align="left"><strong>小于 - 返回x是否小于y。所有比较运算符返回1表示真，返回0表示假。这分别与特殊的变量True和False等价。注意，这些变量名的大写。</strong></td>
<td align="left"><strong>(a &lt; b) 返回 True。</strong></td>
</tr>
<tr>
<td align="left"><strong>&gt;&#x3D;</strong></td>
<td align="left"><strong>大于等于 - 返回x是否大于等于y。</strong></td>
<td align="left"><strong>(a &gt;&#x3D; b) 返回 False。</strong></td>
</tr>
<tr>
<td align="left"><strong>&lt;&#x3D;</strong></td>
<td align="left"><strong>小于等于 - 返回x是否小于等于y。</strong></td>
<td align="left"><strong>(a &lt;&#x3D; b) 返回 True。</strong></td>
</tr>
</tbody></table>
<hr>
<p><strong>赋值运算符</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>运算符</strong></th>
<th align="left"><strong>描述</strong></th>
<th align="left"><strong>实例</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>&#x3D;</strong></td>
<td align="left"><strong>简单的赋值运算符</strong></td>
<td align="left"><strong>c &#x3D; a + b 将 a + b 的运算结果赋值为 c</strong></td>
</tr>
<tr>
<td align="left"><strong>+&#x3D;</strong></td>
<td align="left"><strong>加法赋值运算符</strong></td>
<td align="left"><strong>c +&#x3D; a 等效于 c &#x3D; c + a</strong></td>
</tr>
<tr>
<td align="left"><strong>-&#x3D;</strong></td>
<td align="left"><strong>减法赋值运算符</strong></td>
<td align="left"><strong>c -&#x3D; a 等效于 c &#x3D; c - a</strong></td>
</tr>
<tr>
<td align="left">***&#x3D;**</td>
<td align="left"><strong>乘法赋值运算符</strong></td>
<td align="left">*<em>c <em>&#x3D; a 等效于 c &#x3D; c * a</em></em></td>
</tr>
<tr>
<td align="left"><strong>&#x2F;&#x3D;</strong></td>
<td align="left"><strong>除法赋值运算符</strong></td>
<td align="left"><strong>c &#x2F;&#x3D; a 等效于 c &#x3D; c &#x2F; a</strong></td>
</tr>
<tr>
<td align="left"><strong>%&#x3D;</strong></td>
<td align="left"><strong>取模赋值运算符</strong></td>
<td align="left"><strong>c %&#x3D; a 等效于 c &#x3D; c % a</strong></td>
</tr>
<tr>
<td align="left">****&#x3D;**</td>
<td align="left"><strong>幂赋值运算符</strong></td>
<td align="left"><strong>c &#x3D; a 等效于 c &#x3D; c  a</strong></td>
</tr>
<tr>
<td align="left"><strong>&#x2F;&#x2F;&#x3D;</strong></td>
<td align="left"><strong>取整除赋值运算符</strong></td>
<td align="left"><strong>c &#x2F;&#x2F;&#x3D; a 等效于 c &#x3D; c &#x2F;&#x2F; a</strong></td>
</tr>
<tr>
<td align="left"><strong>:&#x3D;</strong></td>
<td align="left"><strong>海象运算符，这个运算符的主要目的是在表达式中同时进行赋值和返回赋值的值。Python3.8 版本新增运算符。</strong></td>
<td align="left"></td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 海象运算符 :=</span></span><br><span class="line"><span class="comment"># 传统写法</span></span><br><span class="line">n = <span class="number">10</span></span><br><span class="line"><span class="keyword">if</span> n &gt; <span class="number">5</span>:</span><br><span class="line">    <span class="built_in">print</span>(n)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用海象运算符</span></span><br><span class="line"><span class="keyword">if</span> (n := <span class="number">10</span>) &gt; <span class="number">5</span>:</span><br><span class="line">    <span class="built_in">print</span>(n)</span><br></pre></td></tr></table></figure>

<p><strong>海象运算符的优点：</strong></p>
<ul>
<li><strong>海象运算符（<code>:=</code>）允许在表达式内部进行赋值，这可以减少代码的重复，提高代码的可读性和简洁性。</strong></li>
<li><strong>在上述例子中，传统写法需要单独一行来赋值 <code>n</code>，然后在 <code>if</code> 语句中进行条件检查。而使用海象运算符的写法可以在 <code>if</code> 语句中直接进行赋值和条件检查。</strong></li>
</ul>
<hr>
<p><strong>位运算符</strong></p>
<p><strong>按位运算符是把数字看作二进制来进行计算的。下表中变量 a 为 60，b 为 13二进制格式如下：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">a = 0011 <span class="number">1100</span></span><br><span class="line"></span><br><span class="line">b = <span class="number">0000</span> <span class="number">1101</span></span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">a&amp;b = <span class="number">0000</span> <span class="number">1100</span></span><br><span class="line"></span><br><span class="line">a|b = 0011 <span class="number">1101</span></span><br><span class="line"></span><br><span class="line">a^b = 0011 0001</span><br><span class="line"></span><br><span class="line">~a  = <span class="number">1100</span> 0011</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left"><strong>运算符</strong></th>
<th align="left"><strong>描述</strong></th>
<th align="left"><strong>实例</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>&amp;</strong></td>
<td align="left"><strong>按位与运算符：参与运算的两个值,如果两个相应位都为1,则该位的结果为1,否则为0</strong></td>
<td align="left"><strong>(a &amp; b) 输出结果 12 ，二进制解释： 0000 1100</strong></td>
</tr>
<tr>
<td align="left"><strong>|</strong></td>
<td align="left"><strong>按位或运算符：只要对应的二个二进位有一个为1时，结果位就为1。</strong></td>
<td align="left"><strong>(a | b) 输出结果 61 ，二进制解释： 0011 1101</strong></td>
</tr>
<tr>
<td align="left"><strong>^</strong></td>
<td align="left"><strong>按位异或运算符：当两对应的二进位相异时，结果为1</strong></td>
<td align="left"><strong>(a ^ b) 输出结果 49 ，二进制解释： 0011 0001</strong></td>
</tr>
<tr>
<td align="left"><strong>~</strong></td>
<td align="left"><strong>按位取反运算符：对数据的每个二进制位取反,即把1变为0,把0变为1。~x 类似于 -x-1</strong></td>
<td align="left"><strong>(~a ) 输出结果 -61 ，二进制解释： 1100 0011， 在一个有符号二进制数的补码形式。</strong></td>
</tr>
<tr>
<td align="left"><strong>&lt;&lt;</strong></td>
<td align="left"><strong>左移动运算符：运算数的各二进位全部左移若干位，由”&lt;&lt;”右边的数指定移动的位数，高位丢弃，低位补0。</strong></td>
<td align="left"><strong>a &lt;&lt; 2 输出结果 240 ，二进制解释： 1111 0000</strong></td>
</tr>
<tr>
<td align="left"><strong>&gt;&gt;</strong></td>
<td align="left"><strong>右移动运算符：把”&gt;&gt;”左边的运算数的各二进位全部右移若干位，”&gt;&gt;”右边的数指定移动的位数</strong></td>
<td align="left"><strong>a &gt;&gt; 2 输出结果 15 ，二进制解释： 0000 1111</strong></td>
</tr>
</tbody></table>
<hr>
<p><strong>逻辑运算符</strong></p>
<p><strong>假设变量 a 为 10, b为 20:</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>运算符</strong></th>
<th align="left"><strong>逻辑表达式</strong></th>
<th align="left"><strong>描述</strong></th>
<th align="left"><strong>实例</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>and</strong></td>
<td align="left"><strong>x and y</strong></td>
<td align="left"><strong>布尔”与” - 如果 x 为 False，x and y 返回 x 的值，否则返回 y 的计算值。</strong></td>
<td align="left"><strong>(a and b) 返回 20。</strong></td>
</tr>
<tr>
<td align="left"><strong>or</strong></td>
<td align="left"><strong>x or y</strong></td>
<td align="left"><strong>布尔”或” - 如果 x 是 True，它返回 x 的值，否则它返回 y 的计算值。</strong></td>
<td align="left"><strong>(a or b) 返回 10。</strong></td>
</tr>
<tr>
<td align="left"><strong>not</strong></td>
<td align="left"><strong>not x</strong></td>
<td align="left"><strong>布尔”非” - 如果 x 为 True，返回 False 。如果 x 为 False，它返回 True。</strong></td>
<td align="left"><strong>not(a and b) 返回 False</strong></td>
</tr>
</tbody></table>
<hr>
<p><strong>成员运算符</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>运算符</strong></th>
<th align="left"><strong>描述</strong></th>
<th align="left"><strong>实例</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>in</strong></td>
<td align="left"><strong>如果在指定的序列中找到值返回 True，否则返回 False。</strong></td>
<td align="left"><strong>x 在 y 序列中 , 如果 x 在 y 序列中返回 True。</strong></td>
</tr>
<tr>
<td align="left"><strong>not in</strong></td>
<td align="left"><strong>如果在指定的序列中没有找到值返回 True，否则返回 False。</strong></td>
<td align="left"><strong>x 不在 y 序列中 , 如果 x 不在 y 序列中返回 True。</strong></td>
</tr>
</tbody></table>
<hr>
<p><strong>身份运算符</strong></p>
<p><strong>身份运算符用于比较两个对象的存储单元</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>运算符</strong></th>
<th align="left"><strong>描述</strong></th>
<th align="left"><strong>实例</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>is</strong></td>
<td align="left"><strong>is 是判断两个标识符是不是引用自一个对象</strong></td>
<td align="left"><strong>x is y, 类似 id(x) &#x3D;&#x3D; id(y) , 如果引用的是同一个对象则返回 True，否则返回 False</strong></td>
</tr>
<tr>
<td align="left"><strong>is not</strong></td>
<td align="left"><strong>is not 是判断两个标识符是不是引用自不同对象</strong></td>
<td align="left"><strong>x is not y ， 类似 id(x) !&#x3D; id(y)。如果引用的不是同一个对象则返回结果 True，否则返回 False。</strong></td>
</tr>
</tbody></table>
<p><strong>注： <code>id()</code> 函数用于获取对象内存地址。</strong></p>
<p><strong>is 与 &#x3D;&#x3D; 区别：</strong></p>
<p><strong>is 用于判断两个变量引用对象是否为同一个， &#x3D;&#x3D; 用于判断引用变量的值是否相等。</strong></p>
<hr>
<h2 id="条件控制"><a href="#条件控制" class="headerlink" title="条件控制"></a><strong>条件控制</strong></h2><h3 id="if"><a href="#if" class="headerlink" title="if"></a><strong>if</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition_1:</span><br><span class="line">    statement_block_1</span><br><span class="line"><span class="keyword">elif</span> condition_2:</span><br><span class="line">    statement_block_2</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    statement_block_3</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用缩进来划分语句块</strong></li>
<li><strong><code>elif</code> 代替了 <code>else if</code></strong></li>
</ul>
<table>
<thead>
<tr>
<th align="left"><strong>操作符</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong><code>&lt;</code></strong></td>
<td align="left"><strong>小于</strong></td>
</tr>
<tr>
<td align="left"><strong><code>&lt;=</code></strong></td>
<td align="left"><strong>小于或等于</strong></td>
</tr>
<tr>
<td align="left"><strong><code>&gt;</code></strong></td>
<td align="left"><strong>大于</strong></td>
</tr>
<tr>
<td align="left"><strong><code>&gt;=</code></strong></td>
<td align="left"><strong>大于或等于</strong></td>
</tr>
<tr>
<td align="left"><strong><code>==</code></strong></td>
<td align="left"><strong>等于，比较两个值是否相等</strong></td>
</tr>
<tr>
<td align="left"><strong><code>!=</code></strong></td>
<td align="left"><strong>不等于</strong></td>
</tr>
</tbody></table>
<ul>
<li><p><strong>if 嵌套</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> 表达式<span class="number">1</span>:</span><br><span class="line">    语句</span><br><span class="line">    <span class="keyword">if</span> 表达式<span class="number">2</span>:</span><br><span class="line">        语句</span><br><span class="line">    <span class="keyword">elif</span> 表达式<span class="number">3</span>:</span><br><span class="line">        语句</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        语句</span><br><span class="line"><span class="keyword">elif</span> 表达式<span class="number">4</span>:</span><br><span class="line">    语句</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    语句</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="match…case"><a href="#match…case" class="headerlink" title="match…case"></a><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-match-case.html">match…case</a></strong></h3><p><strong>类似于  switch…case 语句</strong></p>
<p><strong>match 后的对象会依次与 case 后的内容进行匹配，如果匹配成功，则执行匹配到的表达式，否则直接跳过，_ 可以匹配一切。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">match</span> subject:</span><br><span class="line">    <span class="keyword">case</span> &lt;pattern_1&gt;:</span><br><span class="line">        &lt;action_1&gt;</span><br><span class="line">    <span class="keyword">case</span> &lt;pattern_2&gt;:</span><br><span class="line">        &lt;action_2&gt;</span><br><span class="line">    <span class="keyword">case</span> &lt;pattern_3&gt;:</span><br><span class="line">        &lt;action_3&gt;</span><br><span class="line">    <span class="keyword">case</span> _:</span><br><span class="line">        &lt;action_wildcard&gt;</span><br></pre></td></tr></table></figure>

<p><strong><code>case _:</code> 类似于 C 和 Java 中的 <code>default:</code>，当其他 case 都无法匹配时，匹配这条，保证永远会匹配成功。</strong></p>
<p><strong>例：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">http_error</span>(<span class="params">status</span>):</span><br><span class="line">    <span class="keyword">match</span> status:</span><br><span class="line">        <span class="keyword">case</span> <span class="number">400</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Bad request&quot;</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Not found&quot;</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">418</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;I&#x27;m a teapot&quot;</span></span><br><span class="line">        <span class="keyword">case</span> _:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Something&#x27;s wrong with the internet&quot;</span></span><br><span class="line"></span><br><span class="line">mystatus=<span class="number">400</span></span><br><span class="line"><span class="built_in">print</span>(http_error(<span class="number">400</span>))</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一个 case 也可以设置多个匹配条件，条件使用 ｜ 隔开，例如：</span></span><br><span class="line">...</span><br><span class="line">    <span class="keyword">case</span> <span class="number">401</span>|<span class="number">403</span>|<span class="number">404</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Not allowed&quot;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="while"><a href="#while" class="headerlink" title="while"></a><strong>while</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> 判断条件(condition)：</span><br><span class="line">    执行语句(statements)……</span><br></pre></td></tr></table></figure>

<p><strong><font color="red">在 Python 中没有 do..while 循环。</font></strong></p>
<p><strong>例：使用了 while 来计算 1 到 100 的总和</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">100</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">counter = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> counter &lt;= n:</span><br><span class="line">    <span class="built_in">sum</span> = <span class="built_in">sum</span> + counter</span><br><span class="line">    counter += <span class="number">1</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;1 到 %d 之和为: %d&quot;</span> % (n,<span class="built_in">sum</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出 1 到 100 之和为: 5050</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>无限循环</strong></p>
<p><strong>设置条件表达式永远不为 false 来实现无限循环</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> var == <span class="number">1</span> :  <span class="comment"># 表达式永远为 true</span></span><br><span class="line">   num = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;输入一个数字  :&quot;</span>))</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;你输入的数字是: &quot;</span>, num)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;Good bye!&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>while 循环使用 else 语句</strong></p>
<p><strong>如果 while 后面的条件语句为 false 时，则执行 else 的语句块。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> &lt;expr&gt;:</span><br><span class="line">    &lt;statement(s)&gt;</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    &lt;additional_statement(s)&gt;</span><br></pre></td></tr></table></figure>

<p><strong>例：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt; <span class="number">5</span>:</span><br><span class="line">   <span class="built_in">print</span> (count, <span class="string">&quot; 小于 5&quot;</span>)</span><br><span class="line">   count = count + <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">   <span class="built_in">print</span> (count, <span class="string">&quot; 大于或等于 5&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>while 简写</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">flag = <span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> (flag): <span class="built_in">print</span> (<span class="string">&#x27;测试&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;Good bye!&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="for"><a href="#for" class="headerlink" title="for"></a><strong>for</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &lt;variable&gt; <span class="keyword">in</span> &lt;sequence&gt;:</span><br><span class="line">    &lt;statements&gt;</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    &lt;statements&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>for 循环遍历列表</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sites = [<span class="string">&quot;Baidu&quot;</span>, <span class="string">&quot;Google&quot;</span>,<span class="string">&quot;Runoob&quot;</span>,<span class="string">&quot;Taobao&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> site <span class="keyword">in</span> sites:</span><br><span class="line">    <span class="built_in">print</span>(site)    </span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">Baidu</span></span><br><span class="line"><span class="string">Google</span></span><br><span class="line"><span class="string">Runoob</span></span><br><span class="line"><span class="string">Taobao</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span> </span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>for 循环遍历字符串</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">word = <span class="string">&#x27;helloworld&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> letter <span class="keyword">in</span> word:</span><br><span class="line">    <span class="built_in">print</span>(letter)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>for 搭配<a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-func-range.html"><code>range()</code></a>函数遍历</strong></p>
<p><strong><code>range()</code>函数会生成数列</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">     <span class="built_in">print</span>(i)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">0</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">2</span></span><br><span class="line"><span class="string">3</span></span><br><span class="line"><span class="string">4</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong><code>range()</code> 指定区间的值</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  1 到 5 的所有数字：</span></span><br><span class="line"><span class="keyword">for</span> number <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">6</span>):</span><br><span class="line">    <span class="built_in">print</span>(number)</span><br></pre></td></tr></table></figure>

<p><strong><code>range()</code> 指定不同的增量（甚至可以是负数，有时这也叫做’步长’）：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">10</span>, <span class="number">3</span>) :</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">0</span></span><br><span class="line"><span class="string">3</span></span><br><span class="line"><span class="string">6</span></span><br><span class="line"><span class="string">9</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong><code>range()</code> 和 <code>len()</code> 函数以遍历一个序列的索引</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;Baidu&#x27;</span>, <span class="string">&#x27;Runoob&#x27;</span>, <span class="string">&#x27;Taobao&#x27;</span>, <span class="string">&#x27;QQ&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(a)):</span><br><span class="line">     <span class="built_in">print</span>(i, a[i])</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">0 Google</span></span><br><span class="line"><span class="string">1 Baidu</span></span><br><span class="line"><span class="string">2 Runoob</span></span><br><span class="line"><span class="string">3 Taobao</span></span><br><span class="line"><span class="string">4 QQ</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span> </span><br></pre></td></tr></table></figure>

<p><strong>使用 <code>range()</code> 函数来创建一个列表</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 输出 [0, 1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line">a = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">5</span>))</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 输出 [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>for…else</strong></p>
<p><strong>for…else 语句用于在循环结束后执行一段代码。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> iterable:</span><br><span class="line">    <span class="comment"># 循环主体</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># 循环结束后执行的代码</span></span><br></pre></td></tr></table></figure>

<p><strong>break 语句，break 语句用于跳出当前循环体，不会执行 else 子句</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">sites = [<span class="string">&quot;Baidu&quot;</span>, <span class="string">&quot;Google&quot;</span>,<span class="string">&quot;Runoob&quot;</span>,<span class="string">&quot;Taobao&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> site <span class="keyword">in</span> sites:</span><br><span class="line">    <span class="keyword">if</span> site == <span class="string">&quot;Runoob&quot;</span>:		<span class="comment"># 循环到site == Runoob</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;菜鸟教程!&quot;</span>)		  <span class="comment"># 3</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;循环数据 &quot;</span> + site)     <span class="comment"># 第1、2个执行</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;没有循环数据!&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;完成循环!&quot;</span>)				  <span class="comment"># 4</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">循环数据 Baidu</span></span><br><span class="line"><span class="string">循环数据 Google</span></span><br><span class="line"><span class="string">菜鸟教程!</span></span><br><span class="line"><span class="string">完成循环!</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">sites = [<span class="string">&quot;Baidu&quot;</span>, <span class="string">&quot;Google&quot;</span>,<span class="string">&quot;Runoob&quot;</span>,<span class="string">&quot;Taobao&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> site <span class="keyword">in</span> sites:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;循环数据 &quot;</span> + site)    <span class="comment"># 1 2 3</span></span><br><span class="line">    <span class="keyword">if</span> site == <span class="string">&quot;Runoob&quot;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;菜鸟教程!&quot;</span>)       <span class="comment"># 4</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;没有循环数据!&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;完成循环!&quot;</span>)               <span class="comment"># 5</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">循环数据 Baidu</span></span><br><span class="line"><span class="string">循环数据 Google</span></span><br><span class="line"><span class="string">循环数据 Runoob</span></span><br><span class="line"><span class="string">菜鸟教程!</span></span><br><span class="line"><span class="string">完成循环!</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="break-和-continue"><a href="#break-和-continue" class="headerlink" title="break 和 continue"></a><strong>break 和 continue</strong></h3><p><strong>break 语句可以跳出 for 和 while 的循环体，如果你从 for 或 while 循环中终止，任何对应的循环 else 块将不执行。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">5</span></span><br><span class="line"><span class="keyword">while</span> n &gt; <span class="number">0</span>:</span><br><span class="line">    n -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="built_in">print</span>(n)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;循环结束。&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">4</span></span><br><span class="line"><span class="string">3</span></span><br><span class="line"><span class="string">循环结束。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>continue 语句被用来告诉 Python 跳过当前循环块中的剩余语句，然后继续进行下一轮循环。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">n = <span class="number">5</span></span><br><span class="line"><span class="keyword">while</span> n &gt; <span class="number">0</span>:</span><br><span class="line">    n -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="built_in">print</span>(n)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;循环结束。&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">4</span></span><br><span class="line"><span class="string">3</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">0</span></span><br><span class="line"><span class="string">循环结束。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="pass"><a href="#pass" class="headerlink" title="pass"></a><strong>pass</strong></h3><p><strong>在<em>Python</em>中，<code>pass</code>是一个空操作语句，主要用途是作为语法占位符。</strong></p>
<ul>
<li><p><strong>空代码块占位‌：当语法要求必须有语句但不需要实际操作时（如if&#x2F;for&#x2F;while&#x2F;函数&#x2F;类定义中）</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition:</span><br><span class="line">    <span class="keyword">pass</span>  <span class="comment"># 暂时不处理</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>开发时标记待实现功能‌：作为临时占位符，保持代码结构完整</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">future_feature</span>():</span><br><span class="line">    <span class="keyword">pass</span>  <span class="comment"># <span class="doctag">TODO:</span> 后续实现</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>‌抽象类&#x2F;接口定义‌：在父类中声明方法但不提供实现</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">required_method</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span>  <span class="comment"># 由子类具体实现</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="Python-推导式"><a href="#Python-推导式" class="headerlink" title="Python 推导式"></a><strong>Python 推导式</strong></h2><p><strong>Python 推导式是一种独特的数据处理方式，可以从一个数据序列构建另一个新的数据序列的结构体。</strong></p>
<p><strong>适用于生成列表、字典、集合和生成器。</strong></p>
<ul>
<li><p><strong>列表(list)推导式</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[expression <span class="keyword">for</span> item <span class="keyword">in</span> iterable]</span><br><span class="line">或</span><br><span class="line">[表达式 <span class="keyword">for</span> 变量 <span class="keyword">in</span> 列表 <span class="keyword">if</span> 条件]</span><br><span class="line">[expression <span class="keyword">for</span> item <span class="keyword">in</span> iterable <span class="keyword">if</span> condition]</span><br></pre></td></tr></table></figure>

<p><strong>快速生成有规律的列表，比传统循环更简洁</strong></p>
<p><strong>支持嵌套循环和条件过滤</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成0-10的偶数平方列表</span></span><br><span class="line">squares = [x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">11</span>) <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span>]  </span><br><span class="line"><span class="comment"># 输出[0, 4, 16, 36, 64, 100]</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 过滤掉长度小于或等于3的字符串列表，并将剩下的转换成大写字母：</span></span><br><span class="line">names = [<span class="string">&#x27;Bob&#x27;</span>,<span class="string">&#x27;Tom&#x27;</span>,<span class="string">&#x27;alice&#x27;</span>,<span class="string">&#x27;Jerry&#x27;</span>,<span class="string">&#x27;Wendy&#x27;</span>,<span class="string">&#x27;Smith&#x27;</span>]</span><br><span class="line">new_names = [name.upper()<span class="keyword">for</span> name <span class="keyword">in</span> names <span class="keyword">if</span> <span class="built_in">len</span>(name)&gt;<span class="number">3</span>]</span><br><span class="line"><span class="built_in">print</span>(new_names)</span><br><span class="line"><span class="comment"># 输出[&#x27;ALICE&#x27;, &#x27;JERRY&#x27;, &#x27;WENDY&#x27;, &#x27;SMITH&#x27;]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>字典(dict)推导式</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;key: value for item in iterable&#125;</span><br><span class="line">或</span><br><span class="line">&#123; key: value for item in iterable if condition &#125;</span><br></pre></td></tr></table></figure>

<p><strong>合并两个列表为字典</strong></p>
<p><strong>反转字典键值对</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">keys = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]; values = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">dict_merge = &#123;k:v <span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">zip</span>(keys, values)&#125; </span><br><span class="line"><span class="comment"># &#123;&#x27;a&#x27;:1, &#x27;b&#x27;:2&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 提供三个数字，以三个数字为键，三个数字的平方为值来创建字典：</span></span><br><span class="line">dic = &#123;x: x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> (<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>)&#125;</span><br><span class="line"><span class="built_in">print</span>(dic)</span><br><span class="line"><span class="comment"># 输出&#123;2: 4, 4: 16, 6: 36&#125;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(dic))</span><br><span class="line"><span class="comment"># 输出&lt;class &#x27;dict&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>集合(set)推导式</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;expression <span class="keyword">for</span> item <span class="keyword">in</span> iterable&#125;</span><br><span class="line">或</span><br><span class="line">&#123; expression <span class="keyword">for</span> item <span class="keyword">in</span> <span class="type">Sequence</span> <span class="keyword">if</span> condition &#125;</span><br></pre></td></tr></table></figure>

<p><strong>自动去重，适用于需要唯一值的场景</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">words = [<span class="string">&#x27;hello&#x27;</span>, <span class="string">&#x27;world&#x27;</span>, <span class="string">&#x27;python&#x27;</span>]</span><br><span class="line">unique_chars = &#123;ch <span class="keyword">for</span> word <span class="keyword">in</span> words <span class="keyword">for</span> ch <span class="keyword">in</span> word&#125;  </span><br><span class="line"><span class="comment"># 输出&#123;&#x27;p&#x27;, &#x27;o&#x27;, &#x27;l&#x27;, &#x27;y&#x27;, &#x27;n&#x27;, &#x27;h&#x27;, &#x27;w&#x27;, &#x27;d&#x27;, &#x27;e&#x27;, &#x27;r&#x27;, &#x27;t&#x27;&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 判断不是 abc 的字母并输出：</span></span><br><span class="line">a = &#123;x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="string">&#x27;abracadabra&#x27;</span> <span class="keyword">if</span> x <span class="keyword">not</span> <span class="keyword">in</span> <span class="string">&#x27;abc&#x27;</span>&#125;</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># 输出&#123;&#x27;d&#x27;, &#x27;r&#x27;&#125;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(a))</span><br><span class="line"><span class="comment"># 输出&lt;class &#x27;set&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>元组(tuple)推导式（生成器表达式）</strong></p>
<p><strong>元组推导式可以利用 range 区间、元组、列表、字典和集合等数据类型，快速生成一个满足指定需求的元组。</strong></p>
<p><strong>元组推导式和列表推导式的用法也完全相同</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(expression <span class="keyword">for</span> item <span class="keyword">in</span> iterable)</span><br><span class="line">或</span><br><span class="line">(expression <span class="keyword">for</span> item <span class="keyword">in</span> <span class="type">Sequence</span> <span class="keyword">if</span> condition)</span><br></pre></td></tr></table></figure>

<p><strong>惰性计算，节省内存</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gen = (x*<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)) </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">tuple</span>(gen))</span><br><span class="line"><span class="comment"># 输出(0, 2, 4, 6, 8)</span></span><br><span class="line"><span class="comment"># 使用时通过next()或循环调用</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="Python3-迭代器与生成器"><a href="#Python3-迭代器与生成器" class="headerlink" title="Python3 迭代器与生成器"></a><strong><em>Python3</em> 迭代器与生成器</strong></h2><h3 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a><strong>迭代器</strong></h3><p><strong>迭代器有两个基本的方法：<code>iter()</code> 和 <code>next()</code>。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">it = <span class="built_in">iter</span>(<span class="built_in">list</span>)	<span class="comment"># 创建迭代器对象</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(it))	<span class="comment"># 输出迭代器的下一个元素</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(it))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">2</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>迭代器搭配 for 循环</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">it = <span class="built_in">iter</span>(<span class="built_in">list</span>)	<span class="comment"># 创建迭代器对象</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> it:</span><br><span class="line">    <span class="built_in">print</span>(x,end=<span class="string">&quot; &quot;</span>)</span><br><span class="line"><span class="comment"># 输出 1 2 3 4</span></span><br></pre></td></tr></table></figure>

<p><strong>迭代器搭配 while 循环</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys         <span class="comment"># 引入 sys 模块</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">list</span>=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">it = <span class="built_in">iter</span>(<span class="built_in">list</span>)	<span class="comment"># 创建迭代器对象</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">next</span>(it))</span><br><span class="line">    <span class="keyword">except</span> StopIteration:</span><br><span class="line">        sys.exit()</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">2</span></span><br><span class="line"><span class="string">3</span></span><br><span class="line"><span class="string">4</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<p><strong>在<em>Python</em>中使类成为迭代器需要实现<code>__iter__()</code>和<code>__next__()</code>两个方法</strong></p>
<ul>
<li><strong><code>__iter__()</code>方法‌</strong><ul>
<li><strong>必须返回迭代器对象本身（即<code>self</code>）</strong></li>
<li><strong>通常在此方法中初始化迭代计数器</strong></li>
</ul>
</li>
<li><strong>‌<code>__next__()</code>方法‌</strong><ul>
<li><strong>负责返回下一个元素</strong></li>
<li><strong>需在元素耗尽时抛出<code>StopIteration</code>异常</strong></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NumberIterator</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, max_num</span>):</span><br><span class="line">        <span class="variable language_">self</span>.<span class="built_in">max</span> = max_num</span><br><span class="line">        <span class="variable language_">self</span>.current = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>  <span class="comment"># 返回迭代器对象本身</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.current &lt; <span class="variable language_">self</span>.<span class="built_in">max</span>:</span><br><span class="line">            <span class="variable language_">self</span>.current += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.current</span><br><span class="line">        <span class="keyword">raise</span> StopIteration  <span class="comment"># 终止迭代</span></span><br><span class="line">    </span><br><span class="line">myclass = NumberIterator(<span class="number">5</span>)</span><br><span class="line">myiter = <span class="built_in">iter</span>(myclass)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(myiter))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(myiter))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(myiter))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(myiter))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(myiter))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">2</span></span><br><span class="line"><span class="string">3</span></span><br><span class="line"><span class="string">4</span></span><br><span class="line"><span class="string">5</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 简化</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NumberIterator</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, max_num</span>):</span><br><span class="line">        <span class="variable language_">self</span>.<span class="built_in">max</span> = max_num</span><br><span class="line">        <span class="variable language_">self</span>.current = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.current &gt;= <span class="variable language_">self</span>.<span class="built_in">max</span>:</span><br><span class="line">            <span class="keyword">raise</span> StopIteration</span><br><span class="line">        <span class="variable language_">self</span>.current += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.current</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接使用类实例作为迭代器（无需显式调用iter()）</span></span><br><span class="line">nums = NumberIterator(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> nums:</span><br><span class="line">    <span class="built_in">print</span>(num)</span><br></pre></td></tr></table></figure>

<p><strong><code>StopIteration</code></strong></p>
<p><strong><code>StopIteration</code> 异常用于标识迭代的完成，防止出现无限循环的情况，在 <code>__next__()</code> 方法中我们可以设置在完成指定循环次数后触发 <code>StopIteration</code> 异常来结束迭代。</strong></p>
<hr>
<h3 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a><strong>生成器</strong></h3><p><strong>在 <em>Python</em> 中，使用了 <code>yield</code> 的函数被称为生成器（generator）</strong></p>
<p><strong><code>yield</code> 是一个关键字，用于定义生成器函数，生成器函数是一种特殊的函数，可以<font color="red">在迭代过程中逐步产生值，而不是一次性返回所有结果。</font></strong></p>
<p><strong>生成器是一个返回迭代器的函数，只能用于迭代操作，更简单点理解生成器就是一个迭代器。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">countdown</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">while</span> n &gt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">yield</span> n</span><br><span class="line">        n -= <span class="number">1</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 创建生成器对象</span></span><br><span class="line">generator = countdown(<span class="number">5</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 通过迭代生成器获取值</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(generator))  <span class="comment"># 输出: 5</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(generator))  <span class="comment"># 输出: 4</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(generator))  <span class="comment"># 输出: 3</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 使用 for 循环迭代生成器</span></span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> generator:</span><br><span class="line">    <span class="built_in">print</span>(value)  <span class="comment"># 输出: 2 1</span></span><br></pre></td></tr></table></figure>

<p><strong>解释：</strong></p>
<ul>
<li><strong>使用 <code>yield</code> 语句逐步产生从 n 到 1 的倒数数字。</strong></li>
<li><strong>在每次调用 yield 语句时，函数会返回当前的倒数值，<font color="red">并在下一次调用时从上次暂停的地方继续执行。</font></strong></li>
<li><strong>生成器函数的优势是它们可以按需生成值，避免一次性生成大量数据并占用大量内存。</strong></li>
<li><strong>通过<code>yield</code>暂停函数状态，每次调用<code>next()</code>恢复执行至下一个<code>yield</code>：</strong></li>
</ul>
<hr>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a><strong>函数</strong></h2><p><strong>定义函数</strong></p>
<p><strong><img src="https://www.runoob.com/wp-content/uploads/2014/05/py-tup-10-26-1.png" alt="img"></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">函数名</span>（参数列表）:</span><br><span class="line">    函数体</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>函数调用</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">函数名(参数)</span><br></pre></td></tr></table></figure>

<hr>
<p><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-function.html">参数传递</a></strong></p>
<ul>
<li><p><strong>不可变：参数传递过去后，改变的是值和对应内存位置</strong></p>
<ul>
<li><strong>整数、字符串、元组等</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">change</span>(<span class="params">a</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;a2的内存位置:&quot;</span>,<span class="built_in">id</span>(a),<span class="string">&quot;|a2的值为:&quot;</span>,a)</span><br><span class="line">    </span><br><span class="line">a = <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;a1的内存位置:&quot;</span>,<span class="built_in">id</span>(a),<span class="string">&quot;|a1的值为:&quot;</span>,a)</span><br><span class="line"></span><br><span class="line">a = <span class="number">2</span></span><br><span class="line">change(a)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">a1的内存位置: 140710071575464 |a1的值为: 1</span></span><br><span class="line"><span class="string">a2的内存位置: 140710071575496 |a2的值为: 2</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>可变类型：参数传递过去后，改变的仅仅是值，不改变内存位置</strong></p>
<ul>
<li><strong>列表，字典等</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">change</span>(<span class="params"><span class="built_in">list</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;列表2内存地址为:&quot;</span>,<span class="built_in">id</span>(<span class="built_in">list</span>),<span class="string">&quot;列表2的内容为:&quot;</span>,<span class="built_in">list</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">list</span>=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;列表1内存地址为:&quot;</span>,<span class="built_in">id</span>(<span class="built_in">list</span>),<span class="string">&quot;列表1的内容为:&quot;</span>,<span class="built_in">list</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">list</span>.append([<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>])</span><br><span class="line">change(<span class="built_in">list</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">列表1内存地址为: 2358936971968 列表1的内容为: [1, 2, 3, 4]</span></span><br><span class="line"><span class="string">列表2内存地址为: 2358936971968 列表2的内容为: [1, 2, 3, 4, [5, 6, 7, 8]]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<p><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-function.html">参数</a></strong></p>
<ul>
<li><p><strong>必需参数</strong></p>
<p><strong>必需参数须以正确的顺序传入函数。调用时的数量必须和声明时的一样。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">name, age</span>):  <span class="comment"># name和age是必需参数</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Hello <span class="subst">&#123;name&#125;</span>, you are <span class="subst">&#123;age&#125;</span> years old&quot;</span>)</span><br><span class="line"></span><br><span class="line">greet(<span class="string">&quot;Alice&quot;</span>, <span class="number">25</span>)  <span class="comment"># 正确调用</span></span><br><span class="line">greet(<span class="number">25</span>, <span class="string">&quot;Alice&quot;</span>)  <span class="comment"># 错误：参数顺序不对</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>关键字参数</strong></p>
<p><strong>函数调用使用关键字参数来确定传入的参数值。</strong></p>
<p><strong>使用关键字参数允许函数调用时参数的顺序与声明时不一致</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">show_info</span>(<span class="params">name, age</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Name:<span class="subst">&#123;name&#125;</span>, Age:<span class="subst">&#123;age&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">show_info(age=<span class="number">30</span>, name=<span class="string">&quot;Bob&quot;</span>)  <span class="comment"># 使用关键字参数</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>默认参数</strong></p>
<p><strong>调用函数时，如果没有传递参数，则会使用默认参数。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">power</span>(<span class="params">base, exponent=<span class="number">2</span></span>):  <span class="comment"># exponent有默认值2</span></span><br><span class="line">    <span class="keyword">return</span> base ** exponent</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(power(<span class="number">3</span>))    <span class="comment"># 使用默认值，输出9</span></span><br><span class="line"><span class="built_in">print</span>(power(<span class="number">3</span>, <span class="number">3</span>)) <span class="comment"># 覆盖默认值，输出27</span></span><br></pre></td></tr></table></figure>

<p><strong><font color="red">默认参数必须放在非默认参数之后</font></strong></p>
</li>
<li><p><strong>不定长参数</strong></p>
<p><strong>函数能处理比当初声明时更多的参数</strong></p>
<p><strong>分为两种形式：</strong></p>
<ul>
<li><strong><code>*args</code>：接收任意数量的位置参数，组成元组</strong></li>
<li><strong><code>**kwargs</code>：接收任意数量的关键字参数，组成字典</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">print_args</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;位置参数:&quot;</span>, args)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;关键字参数:&quot;</span>, kwargs)</span><br><span class="line"></span><br><span class="line">print_args(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, name=<span class="string">&quot;Alice&quot;</span>, age=<span class="number">25</span>)</span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line"><span class="comment"># 位置参数: (1, 2, 3)</span></span><br><span class="line"><span class="comment"># 关键字参数: &#123;&#x27;name&#x27;: &#x27;Alice&#x27;, &#x27;age&#x27;: 25&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong><font color="red"><code>*args</code>必须放在普通参数之后，<code>**kwargs</code>必须放在最后</font></strong></p>
</li>
</ul>
<hr>
<h3 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-lambda.html">匿名函数</a></strong></h3><p><strong><em>Python</em> 使用 lambda 来创建匿名函数。</strong></p>
<p><strong>所谓匿名，意即不再使用 <code>def</code> 语句这样标准的形式定义一个函数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lambda</span> [arg1 [,arg2,.....argn]]:expression</span><br><span class="line"><span class="comment"># 简单些</span></span><br><span class="line"><span class="comment">#lambda 参数列表: 表达式</span></span><br><span class="line"><span class="keyword">lambda</span> arguments: expression</span><br></pre></td></tr></table></figure>

<p><strong>例：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="keyword">lambda</span> a : a + <span class="number">10</span></span><br><span class="line"><span class="built_in">print</span>(x(<span class="number">5</span>))</span><br><span class="line"><span class="comment"># 15</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可写函数说明</span></span><br><span class="line"><span class="built_in">sum</span> = <span class="keyword">lambda</span> arg1, arg2: arg1 + arg2</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 调用sum函数</span></span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;相加后的值为 : &quot;</span>, <span class="built_in">sum</span>( <span class="number">10</span>, <span class="number">20</span> ))</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;相加后的值为 : &quot;</span>, <span class="built_in">sum</span>( <span class="number">20</span>, <span class="number">20</span> ))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">相加后的值为 :  30</span></span><br><span class="line"><span class="string">相加后的值为 :  40</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>将匿名函数封装在一个函数内，来创建多个匿名函数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">myfunc</span>(<span class="params">n</span>):</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">lambda</span> a : a * n</span><br><span class="line"> </span><br><span class="line">mydoubler = myfunc(<span class="number">2</span>)</span><br><span class="line">mytripler = myfunc(<span class="number">3</span>)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(mydoubler(<span class="number">11</span>))</span><br><span class="line"><span class="built_in">print</span>(mytripler(<span class="number">11</span>))</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">22</span></span><br><span class="line"><span class="string">33</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>lambda 函数通常与内置函数如 map()、filter() 和 reduce() 一起使用，以便在集合上执行操作。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">squared = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x: x**<span class="number">2</span>, numbers))</span><br><span class="line"><span class="built_in">print</span>(squared)  </span><br><span class="line"><span class="comment"># 输出: [1, 4, 9, 16, 25]</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line">even_numbers = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x: x % <span class="number">2</span> == <span class="number">0</span>, numbers))</span><br><span class="line"><span class="built_in">print</span>(even_numbers) </span><br><span class="line"><span class="comment"># 输出：[2, 4, 6, 8]</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"> </span><br><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 使用 reduce() 和 lambda 函数计算乘积</span></span><br><span class="line">product = reduce(<span class="keyword">lambda</span> x, y: x * y, numbers)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(product)  </span><br><span class="line"><span class="comment"># 输出：120</span></span><br></pre></td></tr></table></figure>

<hr>
<p><strong>return 语句</strong></p>
<p><strong>用于退出函数，不带参数值的 return 语句返回 None。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可写函数说明</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sum</span>(<span class="params"> arg1, arg2 </span>):</span><br><span class="line">   <span class="comment"># 返回2个参数的和.&quot;</span></span><br><span class="line">   total = arg1 + arg2</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;函数内 : &quot;</span>, total)</span><br><span class="line">   <span class="keyword">return</span> total</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 调用sum函数</span></span><br><span class="line">total = <span class="built_in">sum</span>( <span class="number">10</span>, <span class="number">20</span> )</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;函数外 : &quot;</span>, total)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">函数内 :  30</span></span><br><span class="line"><span class="string">函数外 :  30</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<p><strong>强制位置参数<code>/</code></strong></p>
<p><strong>函数形参必须使用指定位置参数，不能使用关键字参数（顺序不一致）的形式。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">a, b, /, c, d, *, e, f</span>):</span><br><span class="line">    <span class="built_in">print</span>(a, b, c, d, e, f)</span><br></pre></td></tr></table></figure>

<p><strong>形参 a 和 b 必须使用指定位置参数，c 或 d 可以是位置形参或关键字形参，而 e 和 f 要求为关键字形参:</strong></p>
<hr>
<h2 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a><strong>装饰器</strong></h2><p><strong>动态地修改函数或类的行为。</strong></p>
<p><strong>装饰器是一种函数，它接受一个函数作为参数，并返回一个新的函数或修改原来的函数。</strong></p>
<p><strong><img src="https://www.runoob.com/wp-content/uploads/2024/03/decorators-python-1.png" alt="img"></strong></p>
<p><strong>装饰器的语法使用 <code>@decorator_name</code> 来应用在<em>函数或方法</em>上。</strong></p>
<p><strong>装饰器的应用场景：</strong></p>
<ul>
<li><strong>日志记录: 装饰器可用于记录函数的调用信息、参数和返回值。</strong></li>
<li><strong>性能分析: 可以使用装饰器来测量函数的执行时间。</strong></li>
<li><strong>权限控制: 装饰器可用于限制对某些函数的访问权限。</strong></li>
<li><strong>缓存: 装饰器可用于实现函数结果的缓存，以提高性能。</strong></li>
</ul>
<hr>
<h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a><strong>基本语法</strong></h3><p><strong><em>Python</em> 装饰器允许在不修改原有函数代码的基础上，动态地增加或修改函数的功能，装饰器本质上是一个接收函数作为输入并返回一个新的包装过后的函数的对象。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">decorator_function</span>(<span class="params">original_function</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="comment"># 这里是在调用原始函数前添加的新功能</span></span><br><span class="line">        before_call_code()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 执行原函数</span></span><br><span class="line">        result = original_function(*args, **kwargs)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 这里是在调用原始函数后添加的新功能</span></span><br><span class="line">        after_call_code()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用装饰器</span></span><br><span class="line"><span class="meta">@decorator_function</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">target_function</span>(<span class="params">arg1, arg2</span>):</span><br><span class="line">    <span class="keyword">pass</span>  <span class="comment"># 原始函数的实现</span></span><br></pre></td></tr></table></figure>

<p><strong>执行流程示例‌</strong><br><strong>当调用<code>target_function(arg1, arg2)</code>时：</strong><br><strong>① 先执行<code>before_call_code()</code>（如日志记录&#x2F;权限校验）</strong><br><strong>② 再执行原始<code>target_function</code>逻辑</strong><br><strong>③ 最后执行<code>after_call_code()</code>（如资源清理&#x2F;结果处理）</strong><br><strong>④ 返回原函数的执行结果</strong></p>
<p><strong>典型应用场景包括：</strong></p>
<ul>
<li><strong>日志记录（记录函数调用参数和耗时）</strong></li>
<li><strong>权限校验（拦截未授权访问）</strong></li>
<li><strong>性能监控（统计函数执行时间）</strong></li>
<li><strong>事务管理（自动提交&#x2F;回滚）</strong></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timing_decorator</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        start_time = time.time()</span><br><span class="line">        result = func(*args, **kwargs)</span><br><span class="line">        end_time = time.time()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;函数 <span class="subst">&#123;func.__name__&#125;</span> 执行耗时: <span class="subst">&#123;end_time - start_time:<span class="number">.4</span>f&#125;</span>秒&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@timing_decorator</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">calculate_sum</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span>(<span class="built_in">range</span>(n+<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line"><span class="built_in">print</span>(calculate_sum(<span class="number">1000000</span>))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">函数 calculate_sum 执行耗时: 0.0110秒</span></span><br><span class="line"><span class="string">500000500000</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="装饰器-1"><a href="#装饰器-1" class="headerlink" title="装饰器@"></a><strong>装饰器<code>@</code></strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@time_logger</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">target_function</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="comment"># 等同于</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">target_function</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">target_function = time_logger(target_function)</span><br><span class="line"><span class="comment"># 这会将 target_function 函数传递给 decorator 装饰器，并将返回的函数重新赋值给 target_function。从而，每次调用 target_function 时，实际上是调用了经过装饰器处理后的函数。</span></span><br></pre></td></tr></table></figure>

<p><strong>通过装饰器，开发者可以在保持代码整洁的同时，灵活且高效地扩展程序的功能。</strong></p>
<p><strong>示例：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">my_decorator</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;在原函数之前执行&quot;</span>)</span><br><span class="line">        func()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;在原函数之后执行&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@my_decorator</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello!&quot;</span>)</span><br><span class="line"></span><br><span class="line">say_hello()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">在原函数之前执行</span></span><br><span class="line"><span class="string">Hello!</span></span><br><span class="line"><span class="string">在原函数之后执行</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="带参数的装饰器"><a href="#带参数的装饰器" class="headerlink" title="带参数的装饰器"></a><strong>带参数的装饰器</strong></h3><p><strong>如果原函数需要参数，可以在装饰器的 wrapper 函数中传递参数：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">my_decorator</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;在原函数之前执行&quot;</span>)</span><br><span class="line">        func(*args, **kwargs)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;在原函数之后执行&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@my_decorator</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Hello, <span class="subst">&#123;name&#125;</span>!&quot;</span>)</span><br><span class="line"></span><br><span class="line">greet(<span class="string">&quot;Alice&quot;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">在原函数之前执行</span></span><br><span class="line"><span class="string">Hello, Alice!</span></span><br><span class="line"><span class="string">在原函数之后执行</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>装饰器本身也可以接受参数，此时需要额外定义一个外层函数：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">repeat</span>(<span class="params">num_times</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decorator</span>(<span class="params">func</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_times):</span><br><span class="line">                func(*args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"><span class="meta">@repeat(<span class="params"><span class="number">3</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello!&quot;</span>)</span><br><span class="line"></span><br><span class="line">say_hello()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">Hello!</span></span><br><span class="line"><span class="string">Hello!</span></span><br><span class="line"><span class="string">Hello!</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># repeat 函数是一个装饰器工厂，它接受一个参数 num_times，返回一个装饰器 decorator。decorator 接受一个函数 func，并返回一个 wrapper 函数。wrapper 函数会调用 func 函数 num_times 次。使用 @repeat(3) 装饰s ay_hell 函数后，调用 say_hello 会打印 &quot;Hello!&quot; 三次。</span></span><br></pre></td></tr></table></figure>

<p><strong><img src="https://www.runoob.com/wp-content/uploads/2024/03/decorators-python-2.png" alt="img"></strong></p>
<hr>
<h3 id="类装饰器"><a href="#类装饰器" class="headerlink" title="类装饰器"></a><strong>类装饰器</strong></h3><p><strong>用于动态修改类行为的装饰器，它接收一个类作为参数，并返回一个新的类或修改后的类。</strong></p>
<p><strong>类装饰器可以用于：</strong></p>
<ul>
<li><strong>添加&#x2F;修改类的方法或属性</strong></li>
<li><strong>拦截实例化过程</strong></li>
<li><strong>实现单例模式、日志记录、权限检查等功能</strong></li>
</ul>
<p><strong>类装饰器有两种常见形式：</strong></p>
<ul>
<li><strong>函数形式的类装饰器（接收类作为参数，返回新类）</strong></li>
<li><strong>类形式的类装饰器（实现 <code>__call__</code> 方法，使其可调用）</strong></li>
</ul>
<p><strong>函数形式的类装饰器</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">log_class</span>(<span class="params">cls</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;类装饰器，在调用方法前后打印日志&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Wrapper</span>:</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">            <span class="variable language_">self</span>.wrapped = cls(*args, **kwargs)  <span class="comment"># 实例化原始类</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">__getattr__</span>(<span class="params">self, name</span>):</span><br><span class="line">            <span class="string">&quot;&quot;&quot;拦截未定义的属性访问，转发给原始类&quot;&quot;&quot;</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">getattr</span>(<span class="variable language_">self</span>.wrapped, name)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">display</span>(<span class="params">self</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;调用 <span class="subst">&#123;cls.__name__&#125;</span>.display() 前&quot;</span>)</span><br><span class="line">            <span class="variable language_">self</span>.wrapped.display()</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;调用 <span class="subst">&#123;cls.__name__&#125;</span>.display() 后&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> Wrapper  <span class="comment"># 返回包装后的类</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@log_class</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">display</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;这是 MyClass 的 display 方法&quot;</span>)</span><br><span class="line"></span><br><span class="line">obj = MyClass()</span><br><span class="line">obj.display()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">调用 MyClass.display() 前</span></span><br><span class="line"><span class="string">这是 MyClass 的 display 方法</span></span><br><span class="line"><span class="string">调用 MyClass.display() 后</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<p><strong>类形式的类装饰器（实现 <code>__call__</code> 方法）</strong></p>
<p><strong>单例模式（Singleton）：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SingletonDecorator</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;类装饰器，使目标类变成单例模式&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, cls</span>):</span><br><span class="line">        <span class="variable language_">self</span>.cls = cls</span><br><span class="line">        <span class="variable language_">self</span>.instance = <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;拦截实例化过程，确保只创建一个实例&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.instance <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="variable language_">self</span>.instance = <span class="variable language_">self</span>.cls(*args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.instance</span><br><span class="line"></span><br><span class="line"><span class="meta">@SingletonDecorator</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Database</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Database 初始化&quot;</span>)</span><br><span class="line"></span><br><span class="line">db1 = Database()</span><br><span class="line">db2 = Database()</span><br><span class="line"><span class="built_in">print</span>(db1 <span class="keyword">is</span> db2)  <span class="comment"># True，说明是同一个实例</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">Database 初始化</span></span><br><span class="line"><span class="string">True</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="内置装饰器"><a href="#内置装饰器" class="headerlink" title="内置装饰器"></a><strong>内置装饰器</strong></h3><p><strong>Python 提供了一些内置的装饰器，例如：</strong></p>
<ul>
<li><strong><code>@staticmethod</code>: 将方法定义为静态方法，不需要实例化类即可调用。</strong></li>
<li><strong><code>@classmethod</code>: 将方法定义为类方法，第一个参数是类本身（通常命名为 <code>cls</code>）。</strong></li>
<li><strong><code>@property</code>: 将方法转换为属性，使其可以像属性一样访问。</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">static_method</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;This is a static method.&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">class_method</span>(<span class="params">cls</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;This is a class method of <span class="subst">&#123;cls.__name__&#125;</span>.&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">name</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>._name</span><br><span class="line"></span><br><span class="line"><span class="meta">    @name.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">name</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="variable language_">self</span>._name = value</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line">MyClass.static_method()</span><br><span class="line">MyClass.class_method()</span><br><span class="line"></span><br><span class="line">obj = MyClass()</span><br><span class="line">obj.name = <span class="string">&quot;Alice&quot;</span></span><br><span class="line"><span class="built_in">print</span>(obj.name)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="多个装饰器的堆叠"><a href="#多个装饰器的堆叠" class="headerlink" title="多个装饰器的堆叠"></a><strong>多个装饰器的堆叠</strong></h3><p><strong>从下到上的顺序依次应用</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">decorator1</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Decorator 1&quot;</span>)</span><br><span class="line">        func()</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">decorator2</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Decorator 2&quot;</span>)</span><br><span class="line">        func()</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@decorator1</span></span><br><span class="line"><span class="meta">@decorator2</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Hello!&quot;</span>)</span><br><span class="line"></span><br><span class="line">say_hello()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">Decorator 1</span></span><br><span class="line"><span class="string">Decorator 2</span></span><br><span class="line"><span class="string">Hello!</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a><strong>模块</strong></h2><h3 id="import"><a href="#import" class="headerlink" title="import"></a><strong>import</strong></h3><p><strong>导入模块</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> module1[, module2[,... moduleN]</span><br></pre></td></tr></table></figure>

<h3 id="from-…-import"><a href="#from-…-import" class="headerlink" title="from … import"></a><strong>from … import</strong></h3><p><strong>从模块中导入一个指定的部分到当前命名空间中</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> modname <span class="keyword">import</span> name1[, name2[, ... nameN]]</span><br></pre></td></tr></table></figure>

<h3 id="给模块起别名as"><a href="#给模块起别名as" class="headerlink" title="给模块起别名as"></a><strong>给模块起别名<code>as</code></strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> module <span class="keyword">as</span> othername</span><br></pre></td></tr></table></figure>

<h3 id="name-属性"><a href="#name-属性" class="headerlink" title="__name__ 属性"></a><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-name-main.html"><code>__name__</code> 属性</a></strong></h3><p><strong>一个模块被另一个程序第一次引入时，其主程序将运行。</strong></p>
<p><strong>如果我们想在模块被引入时，模块中的某一程序块不执行，我们可以用 name 属性来使该程序块仅在该模块自身运行时执行。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Filename: using_name.py</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&#x27;程序自身在运行&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">   <span class="built_in">print</span>(<span class="string">&#x27;我来自另一模块&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">$ python using_name.py</span></span><br><span class="line"><span class="string">程序自身在运行</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">$ python</span></span><br><span class="line"><span class="string"><span class="meta">&gt;&gt;&gt; </span>import using_name</span></span><br><span class="line"><span class="string">我来自另一模块</span></span><br><span class="line"><span class="string">&gt;&gt;&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>当文件作为主程序运行时，<code>__name__</code>值为<code>&#39;__main__&#39;</code></strong></li>
<li><strong>当文件被导入为模块时，<code>__name__</code>值为模块名（即文件名不含.py）</strong></li>
</ul>
<hr>
<h3 id="dir-函数"><a href="#dir-函数" class="headerlink" title="dir() 函数"></a><strong>dir() 函数</strong></h3><p><strong>内置的函数 <code>dir()</code> 可以找到模块内定义的所有名称，并以一个字符串列表的形式返回。</strong></p>
<hr>
<h3 id="标准模块（库）"><a href="#标准模块（库）" class="headerlink" title="标准模块（库）"></a><strong>标准模块（库）</strong></h3><table>
<thead>
<tr>
<th align="left"><strong>模块名</strong></th>
<th align="left"><strong>功能描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong><code>math</code></strong></td>
<td align="left"><strong>数学运算（如平方根、三角函数等）</strong></td>
</tr>
<tr>
<td align="left"><strong><code>os</code></strong></td>
<td align="left"><strong>操作系统相关功能（如文件、目录操作）</strong></td>
</tr>
<tr>
<td align="left"><strong><code>sys</code></strong></td>
<td align="left"><strong>系统相关的参数和函数</strong></td>
</tr>
<tr>
<td align="left"><strong><code>random</code></strong></td>
<td align="left"><strong>生成随机数</strong></td>
</tr>
<tr>
<td align="left"><strong><code>datetime</code></strong></td>
<td align="left"><strong>处理日期和时间</strong></td>
</tr>
<tr>
<td align="left"><strong><code>json</code></strong></td>
<td align="left"><strong>处理 JSON 数据</strong></td>
</tr>
<tr>
<td align="left"><strong><code>re</code></strong></td>
<td align="left"><strong>正则表达式操作</strong></td>
</tr>
<tr>
<td align="left"><strong><code>collections</code></strong></td>
<td align="left"><strong>提供额外的数据结构（如 defaultdict、deque）</strong></td>
</tr>
<tr>
<td align="left"><strong><code>itertools</code></strong></td>
<td align="left"><strong>提供迭代器工具</strong></td>
</tr>
<tr>
<td align="left"><strong><code>functools</code></strong></td>
<td align="left"><strong>高阶函数工具（如 reduce、lru_cache）</strong></td>
</tr>
</tbody></table>
<h3 id="包（点模块名称）"><a href="#包（点模块名称）" class="headerlink" title="包（点模块名称）"></a><strong>包（点模块名称）</strong></h3><p><strong>一个模块的名称是 A.B， 那么他表示一个包 A中的子模块 B</strong> </p>
<hr>
<h2 id="输入和输出"><a href="#输入和输出" class="headerlink" title="输入和输出"></a><strong>输入和输出</strong></h2><h3 id="输出："><a href="#输出：" class="headerlink" title="输出："></a><strong>输出：</strong></h3><ul>
<li><p><strong>表达式语句</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span> + <span class="number">4</span>  <span class="comment"># 计算表达式但结果不保存</span></span><br><span class="line">x = <span class="number">5</span>  <span class="comment"># 赋值表达式</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>print()</code> 函数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;hello world!&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(*objects, sep=<span class="string">&#x27; &#x27;</span>, end=<span class="string">&#x27;\n&#x27;</span>, file=sys.stdout, flush=<span class="literal">False</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">参数说明：</span></span><br><span class="line"><span class="string">objects：多个输出对象，自动用str()转换</span></span><br><span class="line"><span class="string">sep：分隔符（默认空格）</span></span><br><span class="line"><span class="string">end：结束字符（默认换行）</span></span><br><span class="line"><span class="string">file：输出目标（如文件对象）</span></span><br><span class="line"><span class="string">flush：强制刷新输出缓冲区</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>文件对象的 <code>write()</code> 方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file.write(text)</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>美化：</strong></p>
<ul>
<li><strong><code>str()</code>： 函数返回一个用户易读的表达形式。</strong></li>
<li><strong><code>repr()</code>： 产生一个解释器易读的表达形式。</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&quot;hello world&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>(a))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">repr</span>(a))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">hello world</span></span><br><span class="line"><span class="string">&#x27;hello world&#x27;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong><code>str.format()</code> ：格式化输出</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#123;&#125;网址： &quot;&#123;&#125;!&quot;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;菜鸟教程&#x27;</span>, <span class="string">&#x27;www.runoob.com&#x27;</span>))</span><br><span class="line">菜鸟教程网址： <span class="string">&quot;www.runoob.com!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果在 format() 中使用了关键字参数, 那么它们的值会指向使用该名字的参数。</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#123;name&#125;网址： &#123;site&#125;&#x27;</span>.<span class="built_in">format</span>(name=<span class="string">&#x27;菜鸟教程&#x27;</span>, site=<span class="string">&#x27;www.runoob.com&#x27;</span>))</span><br><span class="line">菜鸟教程网址： www.runoob.com</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong><code>!a</code> (使用 <code>ascii()</code>)：生成‌ASCII安全‌的表示形式，非ASCII字符会被转义</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(f&#123;<span class="string">&quot;中文&quot;</span>!a&#125;<span class="string">&quot;)  # 输出: &quot;</span><span class="string">&#x27;\\u4e2d\\u6587&#x27;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">print(f&#123;&quot;</span>©<span class="string">&quot;!a&#125;&quot;</span>)     <span class="comment"># 输出: &quot;&#x27;\\xa9&#x27;&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>!s</code> (使用 <code>str()</code>) ：将对象转换为‌用户友好‌的字符串形式（默认行为）</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;<span class="number">3.14</span>!s&#125;</span>&quot;</span>)  <span class="comment"># 输出: &#x27;3.14&#x27; （与直接写&#123;3.14&#125;相同）</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;<span class="literal">True</span>!s&#125;</span>&quot;</span>)  <span class="comment"># 输出: &#x27;True&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>!r</code> (使用 <code>repr()</code>) ：生成‌解释器友好‌的字符串表示，通常包含类型信息</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">text = <span class="string">&quot;Hello\nWorld&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;text!r&#125;</span>&quot;</span>)  <span class="comment"># 输出: &quot;&#x27;Hello\\nWorld&#x27;&quot; （显示转义字符）</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;<span class="number">5</span>!r&#125;</span>&quot;</span>)     <span class="comment"># 输出: &#x27;5&#x27; （注意与str()结果可能相同）</span></span><br></pre></td></tr></table></figure></li>
</ul>
<table>
<thead>
<tr>
<th><strong>值</strong></th>
<th><strong><code>!s</code> (str)</strong></th>
<th><strong><code>!r</code> (repr)</strong></th>
<th><strong><code>!a</code> (ascii)</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>&quot;Hi\n&quot;</code></strong></td>
<td><strong><code>Hi\n</code></strong></td>
<td><strong><code>&#39;Hi\\n&#39;</code></strong></td>
<td><strong><code>&#39;Hi\\n&#39;</code></strong></td>
</tr>
<tr>
<td><strong><code>&quot;中文&quot;</code></strong></td>
<td><strong><code>中文</code></strong></td>
<td><strong><code>&#39;中文&#39;</code></strong></td>
<td><strong><code>&#39;\\u4e2d\\u6587&#39;</code></strong></td>
</tr>
<tr>
<td><strong><code>True</code></strong></td>
<td><strong><code>True</code></strong></td>
<td><strong><code>True</code></strong></td>
<td><strong><code>True</code></strong></td>
</tr>
</tbody></table>
<ul>
<li><p><strong><code>:</code></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;field_name:format_spec&#125;</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">field_name：变量名或索引位置（如0、key等）</span></span><br><span class="line"><span class="string">format_spec：格式规范，定义对齐、宽度、精度等</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><strong>格式标识符</strong></th>
<th><strong>作用</strong></th>
<th><strong>示例</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>:&lt;宽度</code></strong></td>
<td><strong>左对齐（默认右对齐）</strong></td>
<td><strong><code>&quot;&#123;:&lt;10&#125;&quot;.format(&quot;Hi&quot;)</code> → <code>&#39;Hi &#39;</code></strong></td>
</tr>
<tr>
<td><strong><code>&gt;宽度</code></strong></td>
<td><strong>强制右对齐</strong></td>
<td><strong><code>&quot;&#123;:&gt;5&#125;&quot;.format(3)</code> → <code>&#39; 3&#39;</code></strong></td>
</tr>
<tr>
<td><strong><code>^宽度</code></strong></td>
<td><strong>居中对齐</strong></td>
<td><strong><code>&quot;&#123;:^7&#125;&quot;.format(&quot;OK&quot;)</code> → <code>&#39; OK &#39;</code></strong></td>
</tr>
<tr>
<td><strong><code>.精度</code></strong></td>
<td><strong>控制浮点数小数位或字符串截断</strong></td>
<td><strong><code>&quot;&#123;:.2f&#125;&quot;.format(3.1415)</code> → <code>&#39;3.14&#39;</code></strong></td>
</tr>
<tr>
<td><strong><code>类型符</code></strong></td>
<td><strong>指定输出类型（如<code>d</code>整型、<code>x</code>十六进制）</strong></td>
<td><strong><code>&quot;&#123;:x&#125;&quot;.format(15)</code> → <code>&#39;f&#39;</code></strong></td>
</tr>
</tbody></table>
</li>
</ul>
<hr>
<h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a><strong>输入</strong></h3><p> <strong><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-func-input.html">input() 内置函数</a></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">str</span> = <span class="built_in">input</span>(<span class="string">&quot;请输入：&quot;</span>);</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;你输入的内容是: &quot;</span>, <span class="built_in">str</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="File"><a href="#File" class="headerlink" title="File"></a><strong>File</strong></h2><h3 id="文件方法"><a href="#文件方法" class="headerlink" title="文件方法"></a><strong>文件方法</strong></h3><ul>
<li><p><strong><code>open()</code>：用于打开一个文件，并返回文件对象。</strong></p>
<p><strong>使用 <code>open()</code> 方法一定要保证关闭文件对象，即调用 <code>close()</code> 方法。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">open</span>(文件名(file), 模式(mode))</span><br><span class="line"><span class="built_in">open</span>(file, mode=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="comment"># 完整</span></span><br><span class="line"><span class="built_in">open</span>(file, mode=<span class="string">&#x27;r&#x27;</span>, buffering=-<span class="number">1</span>, encoding=<span class="literal">None</span>, errors=<span class="literal">None</span>, newline=<span class="literal">None</span>, closefd=<span class="literal">True</span>, opener=<span class="literal">None</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">file: 必需，文件路径（相对或者绝对路径）。</span></span><br><span class="line"><span class="string">mode: 可选，文件打开模式</span></span><br><span class="line"><span class="string">buffering: 设置缓冲</span></span><br><span class="line"><span class="string">encoding: 一般使用utf8</span></span><br><span class="line"><span class="string">errors: 报错级别</span></span><br><span class="line"><span class="string">newline: 区分换行符</span></span><br><span class="line"><span class="string">closefd: 传入的file参数类型</span></span><br><span class="line"><span class="string">opener: 设置自定义开启器，开启器的返回值必须是一个打开的文件描述符。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>mode 参数：</strong></p>
<ul>
<li><strong>基础模式</strong></li>
</ul>
<table>
<thead>
<tr>
<th><strong>模式</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>r</code></strong></td>
<td><strong>只读（默认），文件必须存在</strong></td>
</tr>
<tr>
<td><strong><code>w</code></strong></td>
<td><strong>只写，存在则清空，不存在则创建</strong></td>
</tr>
<tr>
<td><strong><code>a</code></strong></td>
<td><strong>追加写，存在则追加，不存在则创建</strong></td>
</tr>
<tr>
<td><strong><code>x</code></strong></td>
<td><strong>只写，必须不存在（防覆盖）</strong></td>
</tr>
</tbody></table>
<ul>
<li><strong>增强模式（+表示可读写）</strong></li>
</ul>
<table>
<thead>
<tr>
<th><strong>模式</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>r+</code></strong></td>
<td><strong>读写，文件必须存在</strong></td>
</tr>
<tr>
<td><strong><code>w+</code></strong></td>
<td><strong>读写，存在则清空</strong></td>
</tr>
<tr>
<td><strong><code>a+</code></strong></td>
<td><strong>读写，存在则追加</strong></td>
</tr>
<tr>
<td><strong><code>x+</code></strong></td>
<td><strong>读写，必须不存在</strong></td>
</tr>
</tbody></table>
<ul>
<li><strong>二进制模式（加b后缀）</strong></li>
</ul>
<table>
<thead>
<tr>
<th><strong>示例</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>rb</code>&#x2F;<code>wb</code></strong></td>
<td><strong>二进制读写，行为同文本模式</strong></td>
</tr>
<tr>
<td><strong><code>ab+</code></strong></td>
<td><strong>二进制追加读写</strong></td>
</tr>
</tbody></table>
</li>
</ul>
<hr>
<h3 id="文件对象的方法"><a href="#文件对象的方法" class="headerlink" title="文件对象的方法"></a><strong>文件对象的方法</strong></h3><ul>
<li><p><strong><code>file.read()</code>：读取一个文件的内容</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">file = <span class="built_in">open</span>(<span class="string">&quot;text.txt&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(file.read())</span><br><span class="line">file.close()</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>file.readline()</code>：从文件中读取单独的一行</strong></p>
</li>
<li><p><strong><code>file.readlines()</code>：返回该文件中包含的所有行</strong></p>
</li>
<li><p><strong><code>file.write()</code>：将字符串写入到文件中, 然后返回写入的字符数。</strong></p>
</li>
<li><p><strong><code>file.tell()</code>：返回文件当前的读&#x2F;写位置（即文件指针的位置）</strong></p>
</li>
<li><p><strong><code>file.seek(offset, whence)</code>：改变文件指针当前的位置</strong></p>
<p><strong><code>offset</code> 表示相对于 <code>whence</code> 参数的偏移量，如：</strong></p>
<ul>
<li><strong>seek(x,0) ： 从起始位置即文件首行首字符开始移动 x 个字符</strong></li>
<li><strong>seek(x,1) ： 表示从当前位置往后移动x个字符</strong></li>
<li><strong>seek(-x,2)：表示从文件的结尾往前移动x个字符</strong></li>
</ul>
</li>
<li><p><strong><code>file.close()</code>：关闭文件并释放系统的资源</strong></p>
</li>
<li><p><strong><code>file.flush()</code>：刷新文件内部缓冲，直接把内部缓冲区的数据立刻写入文件, 而不是被动的等待输出缓冲区写入。</strong></p>
</li>
<li><p><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-file-methods.html">其他方法</a></strong></p>
</li>
</ul>
<hr>
<h3 id="pickle-模块"><a href="#pickle-模块" class="headerlink" title="pickle 模块"></a><strong>pickle 模块</strong></h3><p><strong>实现了基本的数据序列和反序列化。</strong></p>
<p><strong>序列化：我们能够将程序中运行的对象信息保存到文件中去，永久存储。</strong></p>
<p><strong>反序列化：我们能够从文件中创建上一次程序保存的对象。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pickle.dump(obj, file, [,protocol])</span><br><span class="line">x = pickle.load(file)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="OS-文件-目录方法"><a href="#OS-文件-目录方法" class="headerlink" title="OS 文件&#x2F;目录方法"></a><strong>OS 文件&#x2F;目录方法</strong></h2><p><strong><code>os</code> 模块是 Python 标准库中的一个重要模块，它提供了与操作系统交互的功能。</strong></p>
<p><strong>通过 <code>os</code> 模块，你可以执行文件操作、目录操作、环境变量管理、进程管理等任务。</strong></p>
<p><strong>导入<code>os</code></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br></pre></td></tr></table></figure>

<h3 id="常用功能"><a href="#常用功能" class="headerlink" title="常用功能"></a><strong>常用功能</strong></h3><ul>
<li><p><strong>获取当前工作目录</strong></p>
<p><strong><code>os.getcwd()</code> 函数用于获取当前工作目录的绝对路径。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">current_directory = os.getcwd()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;当前工作目录:&quot;</span>, current_directory)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>改变当前工作目录</strong></p>
<p><strong><code>os.chdir(path)</code> 函数用于改变当前工作目录。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">os.chdir(<span class="string">&quot;/path/to/new/directory&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;新的工作目录:&quot;</span>, os.getcwd())</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>列出目录内容</strong></p>
<p><strong><code>os.listdir(path)</code> 函数用于列出指定目录中的所有文件和子目录。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">files_and_dirs = os.listdir()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;目录内容:&quot;</span>, files_and_dirs)</span><br><span class="line"><span class="comment"># 如果不提供 path 参数，则默认列出当前工作目录的内容。</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>创建目录</strong></p>
<p><strong><code>os.mkdir(path)</code> 函数用于创建一个新的目录。如果目录已经存在，会抛出 <code>FileExistsError</code> 异常。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.mkdir(<span class="string">&quot;new_directory&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>删除目录</strong></p>
<p><strong><code>os.rmdir(path)</code> 函数用于删除一个空目录。如果目录不为空，会抛出 <code>OSError</code> 异常。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.rmdir(<span class="string">&quot;new_directory&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>删除文件</strong></p>
<p><strong><code>os.remove(path)</code> 函数用于删除一个文件。如果文件不存在，会抛出 <code>FileNotFoundError</code> 异常。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.remove(<span class="string">&quot;file_to_delete.txt&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>重命名文件或目录</strong></p>
<p><strong><code>os.rename(src, dst)</code> 函数用于重命名文件或目录。<code>src</code> 是原始路径，<code>dst</code> 是新的路径。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.rename(<span class="string">&quot;old_name.txt&quot;</span>, <span class="string">&quot;new_name.txt&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>获取环境变量</strong></p>
<p><strong><code>os.getenv(key)</code> 函数用于获取指定环境变量的值。如果环境变量不存在，返回 <code>None</code>。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">home_directory = os.getenv(<span class="string">&quot;HOME&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;HOME 目录:&quot;</span>, home_directory)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>执行系统命令</strong></p>
<p><strong><code>os.system(command)</code> 函数用于在操作系统的 shell 中执行命令。命令执行后，返回命令的退出状态。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">os.system(<span class="string">&quot;ls -l&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="更多方法"><a href="#更多方法" class="headerlink" title="更多方法"></a><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-os-file-methods.html">更多方法</a></strong></h3><hr>
<h2 id="错误和异常"><a href="#错误和异常" class="headerlink" title="错误和异常"></a><strong>错误和异常</strong></h2><ul>
<li><strong>语法错误：解析错误</strong></li>
<li><strong>异常：运行期检测到的错误</strong></li>
</ul>
<h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a><strong>异常处理</strong></h3><h4 id="try-except"><a href="#try-except" class="headerlink" title="try&#x2F;except"></a><strong>try&#x2F;except</strong></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 执行代码</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="comment"># 发生异常时执行的代码</span></span><br></pre></td></tr></table></figure>

<p><strong>try 语句按照如下方式工作；</strong></p>
<ul>
<li><strong>首先，执行 try 子句（在关键字 try 和关键字 except 之间的语句）。</strong></li>
<li><strong>如果没有异常发生，忽略 except 子句，try 子句执行后结束。</strong></li>
<li><strong>如果在执行 try 子句的过程中发生了异常，那么 try 子句余下的部分将被忽略。如果异常的类型和 except 之后的名称相符，那么对应的 except 子句将被执行。</strong></li>
<li><strong>如果一个异常没有与任何的 except 匹配，那么这个异常将会传递给上层的 try 中。</strong></li>
</ul>
<p><strong>一个 try 语句可能包含多个except子句，分别来处理不同的特定的异常。</strong></p>
<p><strong>一个except子句可以同时处理多个异常</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">except</span> (RuntimeError, TypeError, NameError):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p><strong>标准模板：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 执行代码</span></span><br><span class="line"><span class="keyword">except</span> RuntimeError:</span><br><span class="line">    <span class="comment"># 发生 RuntimeError 时执行的代码</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="comment"># 通配符，当前一个except RuntimeError未捕获错误时，才会打印错误信息，再抛出</span></span><br><span class="line">    <span class="keyword">raise</span></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 执行代码</span></span><br><span class="line"><span class="keyword">except</span> RuntimeError:</span><br><span class="line">    <span class="comment"># 处理RuntimeError</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:  <span class="comment"># 替代通配符except:</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;捕获到未处理异常: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">raise</span>  <span class="comment"># 重新抛出异常</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;此处代码始终会执行&quot;</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="try-except…else"><a href="#try-except…else" class="headerlink" title="try&#x2F;except…else"></a><strong>try&#x2F;except…else</strong></h4><p><strong><font color="red">else 子句将在 try 子句没有发生任何异常的时候执行。</font></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 执行代码</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="comment"># 发生异常时执行的代码</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># 没有异常时执行的代码</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="try-finally"><a href="#try-finally" class="headerlink" title="try-finally"></a><strong>try-finally</strong></h4><p><strong><font color="red">try-finally 语句无论是否发生异常都将执行最后的代码。</font></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 执行代码</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="comment"># 发生异常时执行的代码</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># 没有异常时执行的代码</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="comment"># 不管有没有异常都会执行的代码</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="抛出异常"><a href="#抛出异常" class="headerlink" title="抛出异常"></a><strong>抛出异常</strong></h3><p><strong><em>Python</em> 使用 <code>raise</code> 语句抛出一个指定的异常。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">raise</span> [Exception [, args [, traceback]]]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果 x 大于 5 就触发异常</span></span><br><span class="line">x = <span class="number">10</span></span><br><span class="line"><span class="keyword">if</span> x &gt; <span class="number">5</span>:</span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">&#x27;x 不能大于 5。x 的值为: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(x))</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a><strong>自定义异常</strong></h3><p><strong>创建一个新的异常类来拥有自己的异常。异常类继承自 Exception 类，可以直接继承，或者间接继承，</strong></p>
<ul>
<li><p><strong>基础自定义异常</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyCustomError</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;自定义异常的基类&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> MyCustomError(<span class="string">&quot;发生了自定义错误&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> MyCustomError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;捕获到自定义异常: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>带附加信息的异常‌</strong></p>
<p><strong>可通过<code>__init__</code>方法传递额外上下文：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ValidationError</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, message, field</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__(message)</span><br><span class="line">        <span class="variable language_">self</span>.field = field  <span class="comment"># 附加错误字段信息</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> ValidationError(<span class="string">&quot;无效输入&quot;</span>, field=<span class="string">&quot;username&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ValidationError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;错误字段: <span class="subst">&#123;e.field&#125;</span>, 原因: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>继承现有异常</strong></p>
<p><strong>复用内置异常的逻辑（如<code>ValueError</code>）：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NegativeNumberError</span>(<span class="title class_ inherited__">ValueError</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;禁止负数的自定义异常&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check_positive</span>(<span class="params">num</span>):</span><br><span class="line">    <span class="keyword">if</span> num &lt; <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">raise</span> NegativeNumberError(<span class="string">f&quot;负数 <span class="subst">&#123;num&#125;</span> 不被接受&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>异常链（Python 3+）</strong></p>
<p><strong>使用<code>raise from</code>保留原始异常堆栈：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DatabaseError</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    conn = database.connect()</span><br><span class="line"><span class="keyword">except</span> ConnectionError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">raise</span> DatabaseError(<span class="string">&quot;数据库连接失败&quot;</span>) <span class="keyword">from</span> e</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="断言-assert"><a href="#断言-assert" class="headerlink" title="断言 assert"></a><strong>断言 assert</strong></h3><p><strong><em>Python</em> assert（断言）用于判断一个表达式，在表达式条件为 false 的时候触发异常。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span> expression</span><br><span class="line"><span class="comment"># 等价于：</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> expression:</span><br><span class="line">    <span class="keyword">raise</span> AssertionError</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span> expression [, arguments]</span><br><span class="line"><span class="comment"># 等价于：</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> expression:</span><br><span class="line">    <span class="keyword">raise</span> AssertionError(arguments)</span><br></pre></td></tr></table></figure>

<p><strong>例：判断当前系统是否为 Linux，如果不满足条件则直接触发异常，停止执行后续代码</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">assert</span> (<span class="string">&#x27;linux&#x27;</span> <span class="keyword">in</span> sys.platform), <span class="string">&quot;该代码只能在 Linux 下执行&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 接下来要执行的代码</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="with-关键字"><a href="#with-关键字" class="headerlink" title="with 关键字"></a><strong>with 关键字</strong></h3><p><strong>Python 中的 with 语句用于异常处理，封装了 try…except…finally 编码范式，提高了易用性。</strong></p>
<ul>
<li><strong>优先使用<code>with</code>处理‌资源生命周期明确‌的场景（如文件、数据库连接）</strong></li>
<li><strong>当需要‌自定义异常处理逻辑‌或捕获‌特定异常类型‌时，选择<code>try...except...finally</code></strong></li>
</ul>
<table>
<thead>
<tr>
<th><strong>特性</strong></th>
<th><strong><code>try...except...finally</code></strong></th>
<th><strong><code>with</code>语句</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>‌异常处理‌</strong></td>
<td><strong>需显式编写<code>except</code>捕获异常</strong></td>
<td><strong>依赖上下文管理器的<code>__exit__</code>方法处理异常</strong></td>
</tr>
<tr>
<td><strong>‌资源释放‌</strong></td>
<td><strong>通过<code>finally</code>块手动释放</strong></td>
<td><strong>自动调用<code>__exit__</code>释放资源</strong></td>
</tr>
<tr>
<td><strong>‌代码简洁性‌</strong></td>
<td><strong>需多层嵌套，代码冗长</strong></td>
<td><strong>单行声明，结构清晰</strong></td>
</tr>
<tr>
<td><strong>‌适用场景‌</strong></td>
<td><strong>需要精细控制异常处理逻辑时</strong></td>
<td><strong>资源生命周期明确（如文件、锁）时</strong></td>
</tr>
</tbody></table>
<p><strong>默认</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">file = <span class="built_in">open</span>(<span class="string">&#x27;./test_runoob.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">file.write(<span class="string">&#x27;hello world !&#x27;</span>)</span><br><span class="line">file.close()</span><br><span class="line"><span class="comment"># 如果在调用 write 的过程中，出现了异常，则 close 方法将无法被执行，因此资源就会一直被该程序占用而无法被释放</span></span><br></pre></td></tr></table></figure>

<p><strong>使用 try…except…finally 来改进代码</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">file = <span class="built_in">open</span>(<span class="string">&#x27;./test_runoob.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    file.write(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    file.close()</span><br></pre></td></tr></table></figure>

<p><strong>使用with改进</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;./test_runoob.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    file.write(<span class="string">&#x27;hello world !&#x27;</span>)</span><br><span class="line"><span class="comment"># 使用 with 关键字系统会自动调用 f.close() 方法， with 的作用等效于 try/finally 语句是一样的。</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a><strong>面向对象</strong></h2><h3 id="类"><a href="#类" class="headerlink" title="类"></a><strong>类</strong></h3><ul>
<li><p><strong>类格式：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ClassName</span>:</span><br><span class="line">    &lt;statement-<span class="number">1</span>&gt;</span><br><span class="line">	……</span><br><span class="line">    &lt;statement-N&gt;</span><br></pre></td></tr></table></figure>

<p><strong>通过类名访问其属性</strong></p>
</li>
<li><p><strong>类对象：</strong></p>
<p><strong>属性引用和实例化 <code>obj.name</code>。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">firstClass</span>:</span><br><span class="line">    a = <span class="number">100</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">firstMethod</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello world!&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 实例化类</span></span><br><span class="line">first = firstClass()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 访问类的属性和方法</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;类的属性a值为:&quot;</span>, first.a)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;类的方法firstMethod为:&quot;</span>,first.firstMethod())</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">类的属性a值为: 100</span></span><br><span class="line"><span class="string">类的方法firstMethod为: hello world!</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="构造函数-init"><a href="#构造函数-init" class="headerlink" title="构造函数__init__"></a><strong>构造函数<code>__init__</code></strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="variable language_">self</span>.data = []</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>当通过<code>类名()</code>创建实例时，<code>__init__</code>会自动调用</strong></p>
</li>
<li><p><strong>主要职责：初始化实例属性（相当于其他语言的构造函数）</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        <span class="variable language_">self</span>.name = name  <span class="comment"># 初始化实例属性</span></span><br><span class="line"></span><br><span class="line">p = Person(<span class="string">&quot;Alice&quot;</span>)  <span class="comment"># 自动调用__init__</span></span><br><span class="line"><span class="built_in">print</span>(p.name)  <span class="comment"># 输出: Alice</span></span><br></pre></td></tr></table></figure>

<p><strong>参数说明‌</strong></p>
<ul>
<li><p><strong>‌<code>self</code>‌：必须的第一个参数，代表实例本身（约定命名，非关键字）</strong></p>
<p><strong><code>self</code> 代表的是类的实例，代表当前对象的地址，而 <code>self.class</code> 则指向类。</strong></p>
</li>
<li><p><strong>其他参数：通过实例化时传递（如上方<code>name</code>）</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="类的方法"><a href="#类的方法" class="headerlink" title="类的方法"></a><strong>类的方法</strong></h3><p><strong>使用 <code>def</code> 关键字来定义一个方法，与一般函数定义不同，类方法必须包含参数 self, 且为第一个参数，self 代表的是类的实例。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#类定义</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">people</span>:</span><br><span class="line">    <span class="comment">#定义基本属性</span></span><br><span class="line">    name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    age = <span class="number">0</span></span><br><span class="line">    <span class="comment">#定义私有属性,私有属性在类外部无法直接进行访问</span></span><br><span class="line">    __weight = <span class="number">0</span></span><br><span class="line">    <span class="comment">#定义构造方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,n,a,w</span>):</span><br><span class="line">        <span class="variable language_">self</span>.name = n</span><br><span class="line">        <span class="variable language_">self</span>.age = a</span><br><span class="line">        <span class="variable language_">self</span>.__weight = w</span><br><span class="line">    <span class="comment"># 定义方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s 说: 我 %d 岁。&quot;</span> %(<span class="variable language_">self</span>.name,<span class="variable language_">self</span>.age))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 实例化类</span></span><br><span class="line">p = people(<span class="string">&#x27;runoob&#x27;</span>,<span class="number">10</span>,<span class="number">30</span>)</span><br><span class="line">p.speak()</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a><strong>继承</strong></h3><ul>
<li><p><strong>单继承</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DerivedClassName</span>(<span class="title class_ inherited__">BaseClassName</span>):</span><br><span class="line">    &lt;statement-<span class="number">1</span>&gt;</span><br><span class="line">	……</span><br><span class="line">    &lt;statement-N&gt;</span><br><span class="line"><span class="comment"># 即    </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">子类</span>(<span class="title class_ inherited__">父类</span>)</span><br></pre></td></tr></table></figure>

<p><strong>例：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#父类定义</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">people</span>:</span><br><span class="line">    <span class="comment">#定义基本属性</span></span><br><span class="line">    name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    age = <span class="number">0</span></span><br><span class="line">    <span class="comment">#定义私有属性,私有属性在类外部无法直接进行访问</span></span><br><span class="line">    __weight = <span class="number">0</span></span><br><span class="line">    <span class="comment">#定义构造方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,n,a,w</span>):</span><br><span class="line">        <span class="variable language_">self</span>.name = n</span><br><span class="line">        <span class="variable language_">self</span>.age = a</span><br><span class="line">        <span class="variable language_">self</span>.__weight = w</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s 说: 我 %d 岁。&quot;</span> %(<span class="variable language_">self</span>.name,<span class="variable language_">self</span>.age))</span><br><span class="line"> </span><br><span class="line"><span class="comment">#单继承示例</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">student</span>(<span class="title class_ inherited__">people</span>):</span><br><span class="line">    grade = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,n,a,w,g</span>):</span><br><span class="line">        <span class="comment">#调用父类的构函</span></span><br><span class="line">        people.__init__(<span class="variable language_">self</span>,n,a,w)</span><br><span class="line">        <span class="variable language_">self</span>.grade = g</span><br><span class="line">    <span class="comment">#覆写父类的方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s 说: 我 %d 岁了，我在读 %d 年级&quot;</span>%(<span class="variable language_">self</span>.name,<span class="variable language_">self</span>.age,<span class="variable language_">self</span>.grade))</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">s = student(<span class="string">&#x27;ken&#x27;</span>,<span class="number">10</span>,<span class="number">60</span>,<span class="number">3</span>)</span><br><span class="line">s.speak()</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>多继承</strong></p>
<p><strong>子类会从括号里从左到右搜索包含的方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DerivedClassName</span>(Base1, Base2, Base3):</span><br><span class="line">    &lt;statement-<span class="number">1</span>&gt;</span><br><span class="line">	……</span><br><span class="line">    &lt;statement-N&gt;</span><br><span class="line"><span class="comment"># 即</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">子类</span>(父类……)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#类定义</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">people</span>:</span><br><span class="line">    <span class="comment">#定义基本属性</span></span><br><span class="line">    name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    age = <span class="number">0</span></span><br><span class="line">    <span class="comment">#定义私有属性,私有属性在类外部无法直接进行访问</span></span><br><span class="line">    __weight = <span class="number">0</span></span><br><span class="line">    <span class="comment">#定义构造方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,n,a,w</span>):</span><br><span class="line">        <span class="variable language_">self</span>.name = n</span><br><span class="line">        <span class="variable language_">self</span>.age = a</span><br><span class="line">        <span class="variable language_">self</span>.__weight = w</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s 说: 我 %d 岁。&quot;</span> %(<span class="variable language_">self</span>.name,<span class="variable language_">self</span>.age))</span><br><span class="line"> </span><br><span class="line"><span class="comment">#单继承示例</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">student</span>(<span class="title class_ inherited__">people</span>):</span><br><span class="line">    grade = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,n,a,w,g</span>):</span><br><span class="line">        <span class="comment">#调用父类的构函</span></span><br><span class="line">        people.__init__(<span class="variable language_">self</span>,n,a,w)</span><br><span class="line">        <span class="variable language_">self</span>.grade = g</span><br><span class="line">    <span class="comment">#覆写父类的方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;%s 说: 我 %d 岁了，我在读 %d 年级&quot;</span>%(<span class="variable language_">self</span>.name,<span class="variable language_">self</span>.age,<span class="variable language_">self</span>.grade))</span><br><span class="line"> </span><br><span class="line"><span class="comment">#另一个类，多继承之前的准备</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">speaker</span>():</span><br><span class="line">    topic = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,n,t</span>):</span><br><span class="line">        <span class="variable language_">self</span>.name = n</span><br><span class="line">        <span class="variable language_">self</span>.topic = t</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;我叫 %s，我是一个演说家，我演讲的主题是 %s&quot;</span>%(<span class="variable language_">self</span>.name,<span class="variable language_">self</span>.topic))</span><br><span class="line"> </span><br><span class="line"><span class="comment">#多继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">sample</span>(speaker,student):</span><br><span class="line">    a =<span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,n,a,w,g,t</span>):</span><br><span class="line">        student.__init__(<span class="variable language_">self</span>,n,a,w,g)</span><br><span class="line">        speaker.__init__(<span class="variable language_">self</span>,n,t)</span><br><span class="line"> </span><br><span class="line">test = sample(<span class="string">&quot;Tim&quot;</span>,<span class="number">25</span>,<span class="number">80</span>,<span class="number">4</span>,<span class="string">&quot;Python&quot;</span>)</span><br><span class="line">test.speak()   <span class="comment">#方法名同，默认调用的是在括号中参数位置排前父类的方法</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<ul>
<li><p><strong>方法重写</strong></p>
<p><strong>子类重写父类的方法</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span>:        <span class="comment"># 定义父类</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">myMethod</span>(<span class="params">self</span>):</span><br><span class="line">      <span class="built_in">print</span> (<span class="string">&#x27;调用父类方法&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span>(<span class="title class_ inherited__">Parent</span>): <span class="comment"># 定义子类</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">myMethod</span>(<span class="params">self</span>):</span><br><span class="line">      <span class="built_in">print</span> (<span class="string">&#x27;调用子类方法&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">c = Child()          <span class="comment"># 子类实例</span></span><br><span class="line">c.myMethod()         <span class="comment"># 子类调用重写方法</span></span><br><span class="line"><span class="built_in">super</span>(Child,c).myMethod() <span class="comment">#用子类对象调用父类已被覆盖的方法</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">调用子类方法</span></span><br><span class="line"><span class="string">调用父类方法</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/python/python-func-super.html">super() 函数</a>是用于调用父类(超类)的一个方法。</strong></p>
<p><strong>super() 是用来解决多重继承问题的。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">super</span>(<span class="built_in">type</span>[, <span class="built_in">object</span>-<span class="keyword">or</span>-<span class="built_in">type</span>])</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<ul>
<li><strong>type – 类。</strong></li>
<li><strong>object-or-type – 类，一般是 self</strong></li>
</ul>
</li>
</ul>
<hr>
<h3 id="类属性与方法"><a href="#类属性与方法" class="headerlink" title="类属性与方法"></a><strong>类属性与方法</strong></h3><ul>
<li><p><strong>私有属性</strong></p>
<p><strong><code>__private_attrs</code>：两个下划线开头，声明该属性为私有，不能在类的外部被使用或直接访问。</strong></p>
<p><strong>在类内部的方法中使用时 <code>self.__private_attrs</code>。</strong></p>
</li>
<li><p><strong>类的方法</strong></p>
<p><strong>在类的内部，使用 <code>def</code> 关键字来定义一个方法，与一般函数定义不同，类方法必须包含参数 <code>self</code>，且为第一个参数，<code>self</code> 代表的是类的实例。</strong></p>
<p><strong><code>self</code> 的名字并不是规定死的，也可以使用 <code>this</code>，但是最好还是按照约定使用 <code>self</code>。</strong></p>
</li>
<li><p><strong>私有方法</strong></p>
<p><strong><code>__private_method</code>：两个下划线开头，声明该方法为私有方法，只能在类的内部调用 ，不能在类的外部调用。<code>self.__private_methods</code>。</strong></p>
</li>
<li><p><strong>类的专有方法：</strong></p>
<table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>__init__</code></strong></td>
<td><strong>构造函数，在生成对象时调用</strong></td>
</tr>
<tr>
<td><strong><code>__del__</code></strong></td>
<td><strong>析构函数，释放对象时使用</strong></td>
</tr>
<tr>
<td><strong><code>__repr__</code></strong></td>
<td><strong>打印，转换</strong></td>
</tr>
<tr>
<td><strong><code>__setitem__</code></strong></td>
<td><strong>按照索引赋值</strong></td>
</tr>
<tr>
<td><strong><code>__getitem__</code></strong></td>
<td><strong>按照索引获取值</strong></td>
</tr>
<tr>
<td><strong><code>__len__</code></strong></td>
<td><strong>获得长度</strong></td>
</tr>
<tr>
<td><strong><code>__cmp__</code></strong></td>
<td><strong>比较运算</strong></td>
</tr>
<tr>
<td><strong><code>__call__</code></strong></td>
<td><strong>函数调用</strong></td>
</tr>
<tr>
<td><strong><code>__add__</code></strong></td>
<td><strong>加运算</strong></td>
</tr>
<tr>
<td><strong><code>__sub__</code></strong></td>
<td><strong>减运算</strong></td>
</tr>
<tr>
<td><strong><code>__mul__</code></strong></td>
<td><strong>乘运算</strong></td>
</tr>
<tr>
<td><strong><code>__truediv__</code></strong></td>
<td><strong>除运算</strong></td>
</tr>
<tr>
<td><strong><code>__mod__</code></strong></td>
<td><strong>求余运算</strong></td>
</tr>
<tr>
<td><strong><code>__pow__</code></strong></td>
<td><strong>乘方</strong></td>
</tr>
</tbody></table>
<p><strong>运算符重载</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vector</span>:</span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, a, b</span>):</span><br><span class="line">      <span class="variable language_">self</span>.a = a</span><br><span class="line">      <span class="variable language_">self</span>.b = b</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;Vector (%d, %d)&#x27;</span> % (<span class="variable language_">self</span>.a, <span class="variable language_">self</span>.b)</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">__add__</span>(<span class="params">self,other</span>):</span><br><span class="line">      <span class="keyword">return</span> Vector(<span class="variable language_">self</span>.a + other.a, <span class="variable language_">self</span>.b + other.b)</span><br><span class="line"> </span><br><span class="line">v1 = Vector(<span class="number">2</span>,<span class="number">10</span>)</span><br><span class="line">v2 = Vector(<span class="number">5</span>,-<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span> (v1 + v2)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">Vector(7,8)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="命名空间和作用域"><a href="#命名空间和作用域" class="headerlink" title="命名空间和作用域"></a><strong>命名空间和作用域</strong></h2><h3 id="命名空间-Namespace"><a href="#命名空间-Namespace" class="headerlink" title="命名空间(Namespace)"></a><strong>命名空间(Namespace)</strong></h3><p><strong>大部分的命名空间都是通过 <em>Python</em> 字典来实现的。</strong></p>
<p><strong>命名空间中不能有重名</strong></p>
<p><strong>三种命名空间：</strong></p>
<ul>
<li><strong>内置名称（built-in names）， Python 语言内置的名称，比如函数名 abs、char 和异常名称 BaseException、Exception 等等。</strong></li>
<li><strong>全局名称（global names），模块中定义的名称，记录了模块的变量，包括函数、类、其它导入的模块、模块级的变量和常量。</strong></li>
<li><strong>局部名称（local names），函数中定义的名称，记录了函数的变量，包括函数的参数和局部定义的变量。（类中定义的也是）</strong></li>
</ul>
<p><strong><img src="https://www.runoob.com/wp-content/uploads/2014/05/types_namespace-1.png" alt="img"></strong></p>
<p><strong>命名空间查找顺序:</strong></p>
<p><strong>局部的命名空间 -&gt; 全局命名空间 -&gt; 内置命名空间。</strong></p>
<p><strong>如果找不到变量，它将放弃查找并引发一个 <code>NameError</code> 异常:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NameError: name <span class="string">&#x27;haha&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> defined。</span><br></pre></td></tr></table></figure>

<p><strong>命名空间的生命周期：</strong></p>
<p><strong>命名空间的生命周期取决于对象的作用域，如果对象执行完成，则该命名空间的生命周期就结束。</strong></p>
<hr>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a><strong>作用域</strong></h3><p><strong>作用域就是一个 <em>Python</em> 程序可以直接访问命名空间的正文区域。</strong></p>
<p><strong>在一个 <em>python</em> 程序中，直接访问一个变量，会从内到外依次访问所有的作用域直到找到，否则会报未定义的错误。</strong></p>
<p><strong>Python 的作用域一共有 4 种，分别是：</strong></p>
<p><strong>有四种作用域：</strong></p>
<ul>
<li><strong>L（Local）：最内层，包含局部变量，比如一个函数&#x2F;方法内部。</strong></li>
<li><strong>E（Enclosing）：包含了非局部(non-local)也非全局(non-global)的变量。比如两个嵌套函数，一个函数（或类） A 里面又包含了一个函数 B ，那么对于 B 中的名称来说 A 中的作用域就为 nonlocal。</strong></li>
<li><strong>G（Global）：当前脚本的最外层，比如当前模块的全局变量。</strong></li>
<li><strong>B（Built-in）： 包含了内建的变量&#x2F;关键字等，最后被搜索。</strong></li>
</ul>
<p><strong>LEGB 规则（Local, Enclosing, Global, Built-in）：Python 查找变量时的顺序是： L –&gt; E –&gt; G –&gt; B。</strong></p>
<ul>
<li><strong>Local：当前函数的局部作用域。</strong></li>
<li><strong>Enclosing：包含当前函数的外部函数的作用域（如果有嵌套函数）。</strong></li>
<li><strong>Global：当前模块的全局作用域。</strong></li>
<li><strong>Built-in：Python 内置的作用域。</strong></li>
</ul>
<p><strong>在局部找不到，便会去局部外的局部找（例如闭包），再找不到就会去全局找，再者去内置中找。</strong></p>
<p><strong><img src="https://www.runoob.com/wp-content/uploads/2014/05/1418490-20180906153626089-1835444372.png" alt="img"></strong></p>
<p><strong>内置作用域是通过一个名为 builtin 的标准模块来实现的，但是这个变量名自身并没有放入内置作用域内，所以必须导入这个文件才能够使用它。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> builtins</span><br><span class="line"><span class="built_in">dir</span>(builtins)</span><br></pre></td></tr></table></figure>

<p><strong>Python 中只有模块（module），类（class）以及函数（def、lambda）才会引入新的作用域</strong></p>
<hr>
<h3 id="全局变量和局部变量"><a href="#全局变量和局部变量" class="headerlink" title="全局变量和局部变量"></a><strong>全局变量和局部变量</strong></h3><p><strong>全局变量：在函数外部定义的变量，可以在整个文件中被访问。在函数外部定义的变量对所有函数都是可见的，除非函数内部定义了同名的局部变量。</strong></p>
<p><strong>局部变量：在函数内部定义的变量，仅在函数内有效，函数外无法访问。局部变量优先级高于全局变量，因此如果局部变量和全局变量同名，函数内部会使用局部变量。</strong></p>
<hr>
<h3 id="global-和-nonlocal关键字"><a href="#global-和-nonlocal关键字" class="headerlink" title="global 和 nonlocal关键字"></a><strong>global 和 nonlocal关键字</strong></h3><p><strong>当内部作用域想修改外部作用域的变量时，就要用到 <code>global</code> 和 <code>nonlocal</code> 关键字了。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">1</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun1</span>():</span><br><span class="line">    <span class="keyword">global</span> num  <span class="comment"># 需要使用 global 关键字声明</span></span><br><span class="line">    <span class="built_in">print</span>(num) </span><br><span class="line">    num = <span class="number">123</span></span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line">fun1()</span><br><span class="line"><span class="built_in">print</span>(num)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">123</span></span><br><span class="line"><span class="string">123</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>如果要修改嵌套作用域（enclosing 作用域，外层非全局作用域）中的变量则需要 <code>nonlocal</code> 关键字</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">outer</span>():</span><br><span class="line">    num = <span class="number">10</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">inner</span>():</span><br><span class="line">        <span class="keyword">nonlocal</span> num   <span class="comment"># nonlocal关键字声明</span></span><br><span class="line">        num = <span class="number">100</span></span><br><span class="line">        <span class="built_in">print</span>(num)</span><br><span class="line">    inner()</span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line">outer()</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">100</span></span><br><span class="line"><span class="string">100</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="标准库"><a href="#标准库" class="headerlink" title="标准库"></a><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-stdlib.html">标准库</a></strong></h2><h3 id="日期和时间"><a href="#日期和时间" class="headerlink" title="日期和时间"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-date-time.html">日期和时间</a></h3><h3 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-built-in-functions.html">内置函数</a></h3><h3 id="urllib-库"><a href="#urllib-库" class="headerlink" title="urllib 库"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-urllib.html">urllib 库</a></h3><h3 id="operator"><a href="#operator" class="headerlink" title="operator"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-operator.html">operator</a></h3><h3 id="math"><a href="#math" class="headerlink" title="math"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-math.html">math</a></h3><h3 id="requests"><a href="#requests" class="headerlink" title="requests"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-requests.html">requests</a></h3><h3 id="random"><a href="#random" class="headerlink" title="random"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-random.html">random</a></h3><h3 id="statistics"><a href="#statistics" class="headerlink" title="statistics"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-statistics.html">statistics</a></h3><h3 id="hashlib"><a href="#hashlib" class="headerlink" title="hashlib"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-hashlib.html">hashlib</a></h3><h3 id="量化绘图（数据可视化）"><a href="#量化绘图（数据可视化）" class="headerlink" title="量化绘图（数据可视化）"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-qt.html">量化绘图（数据可视化）</a></h3><h3 id="pyecharts（数据可视化）"><a href="#pyecharts（数据可视化）" class="headerlink" title="pyecharts（数据可视化）"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-pyecharts.html">pyecharts（数据可视化）</a></h3><h3 id="selenium"><a href="#selenium" class="headerlink" title="selenium"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-selenium.html">selenium</a></h3><h3 id="sys-模块"><a href="#sys-模块" class="headerlink" title="sys 模块"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-sys.html">sys 模块</a></h3><h3 id="Pickle-模块"><a href="#Pickle-模块" class="headerlink" title="Pickle 模块"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/pyhton-pikle.html">Pickle 模块</a></h3><h3 id="subprocess-模块"><a href="#subprocess-模块" class="headerlink" title="subprocess 模块"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-subprocess.html">subprocess 模块</a></h3><h3 id="queue-模块"><a href="#queue-模块" class="headerlink" title="queue 模块"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-queue.html">queue 模块</a></h3><h3 id="StringIO-模块"><a href="#StringIO-模块" class="headerlink" title="StringIO 模块"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-stringio.html">StringIO 模块</a></h3><h3 id="logging-模块"><a href="#logging-模块" class="headerlink" title="logging 模块"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-logging.html">logging 模块</a></h3><h3 id="datetime-模块"><a href="#datetime-模块" class="headerlink" title="datetime 模块"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-datetime.html">datetime 模块</a></h3><h3 id="re-模块"><a href="#re-模块" class="headerlink" title="re 模块"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-re.html">re 模块</a></h3><h3 id="csv-模块"><a href="#csv-模块" class="headerlink" title="csv 模块"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-csv.html">csv 模块</a></h3><h3 id="threading-模块"><a href="#threading-模块" class="headerlink" title="threading 模块"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-treading.html">threading 模块</a></h3><h3 id="asyncio-模块"><a href="#asyncio-模块" class="headerlink" title="asyncio 模块"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-asyncio.html">asyncio 模块</a></h3><h3 id="PyQt"><a href="#PyQt" class="headerlink" title="PyQt"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-pyqt.html">PyQt</a></h3><hr>
<h1 id="高级"><a href="#高级" class="headerlink" title="高级"></a><strong>高级</strong></h1><h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a><strong>正则表达式</strong></h2><p><strong>在 <em>Python</em> 中，使用 re 模块来处理正则表达式。</strong></p>
<h3 id="re-match"><a href="#re-match" class="headerlink" title="re.match"></a><strong><code>re.match</code></strong></h3><p><strong><code>re.match()</code>是Python中<code>re</code>模块提供的一个正则表达式匹配函数，主要用于从字符串的起始位置进行匹配</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.<span class="keyword">match</span>(pattern, string, flags=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left"><strong>参数</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>pattern</strong></td>
<td align="left"><strong>匹配的正则表达式</strong></td>
</tr>
<tr>
<td align="left"><strong>string</strong></td>
<td align="left"><strong>要匹配的字符串。</strong></td>
</tr>
<tr>
<td align="left"><strong>flags</strong></td>
<td align="left"><strong>标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。参见：<a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-reg-expressions.html#flags">正则表达式修饰符 - 可选标志</a></strong></td>
</tr>
</tbody></table>
<ul>
<li><p><strong>‌匹配范围‌</strong></p>
<ul>
<li><strong>仅从字符串的开头开始匹配，若开头不匹配则返回<code>None</code></strong></li>
<li><strong>与<code>re.search()</code>不同，后者会扫描整个字符串</strong></li>
</ul>
</li>
<li><p><strong>‌返回值‌</strong></p>
<ul>
<li><strong>匹配成功返回<code>re.Match</code>对象，包含匹配的字符串、位置等信息</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="built_in">print</span>(re.<span class="keyword">match</span>(<span class="string">&#x27;www&#x27;</span>, <span class="string">&#x27;www.runoob.com&#x27;</span>).span())  <span class="comment"># 在起始位置匹配</span></span><br><span class="line"><span class="built_in">print</span>(re.<span class="keyword">match</span>(<span class="string">&#x27;com&#x27;</span>, <span class="string">&#x27;www.runoob.com&#x27;</span>))         <span class="comment"># 不在起始位置匹配</span></span><br><span class="line"><span class="comment"># 输出(0, 3)</span></span><br><span class="line"><span class="comment"># 输出None</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>匹配失败返回<code>None</code></strong></li>
</ul>
</li>
<li><p><strong>‌典型使用场景‌</strong></p>
<ul>
<li><strong>验证字符串是否以特定模式开头（如URL协议头校验）</strong></li>
<li><strong>需严格匹配字符串起始内容时优先使用</strong></li>
</ul>
</li>
</ul>
<p><strong>可以使用 <code>group(num)</code> 或 <code>groups()</code> 匹配对象函数来获取匹配表达式。</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>匹配对象方法</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong><code>group(num=0)</code></strong></td>
<td align="left"><strong>匹配的整个表达式的字符串，group() 可以一次输入多个组号，在这种情况下它将返回一个包含那些组所对应值的元组。</strong></td>
</tr>
<tr>
<td align="left"><strong><code>groups()</code></strong></td>
<td align="left"><strong>返回一个包含所有小组字符串的元组，从 1 到 所含的小组号。</strong></td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">result = re.<span class="keyword">match</span>(<span class="string">r&#x27;Hello&#x27;</span>, <span class="string">&#x27;Hello world&#x27;</span>)  <span class="comment"># 匹配成功</span></span><br><span class="line"><span class="built_in">print</span>(result.group()) </span><br><span class="line"><span class="keyword">if</span> result <span class="keyword">else</span> <span class="built_in">print</span>(<span class="string">&quot;No match&quot;</span>)</span><br><span class="line"><span class="comment"># 输出Hello</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"> </span><br><span class="line">line = <span class="string">&quot;Cats are smarter than dogs&quot;</span></span><br><span class="line"><span class="comment"># .* 表示任意匹配除换行符（\n、\r）之外的任何单个或多个字符</span></span><br><span class="line"><span class="comment"># (.*?) 表示&quot;非贪婪&quot;模式，只保存第一个匹配到的子串</span></span><br><span class="line">matchObj = re.<span class="keyword">match</span>( <span class="string">r&#x27;(.*) are (.*?)  (.*) (.*)&#x27;</span>, line, re.M|re.I)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> matchObj:</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;matchObj.group() : &quot;</span>, matchObj.group())</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;matchObj.group(1) : &quot;</span>, matchObj.group(<span class="number">1</span>))</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;matchObj.group(2) : &quot;</span>, matchObj.group(<span class="number">2</span>))</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;matchObj.group(3) : &quot;</span>, matchObj.group(<span class="number">3</span>))</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;matchObj.group(4) : &quot;</span>, matchObj.group(<span class="number">4</span>))</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;No match!!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">matchObj.group() :  Cats are smarter than dogs</span></span><br><span class="line"><span class="string">matchObj.group(1) :  Cats</span></span><br><span class="line"><span class="string">matchObj.group(2) :  smarter</span></span><br><span class="line"><span class="string">matchObj.group(3) :  than</span></span><br><span class="line"><span class="string">matchObj.group(4) :  dogs</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<ol>
<li><strong>‌正则表达式模式‌ <code>r&#39;(.*) are (.*?) .*&#39;</code>：</strong><ul>
<li><strong><code>(.*)</code>：贪婪匹配任意字符（除换行符）作为第1组，会匹配到”Cats”</strong></li>
<li><strong><code>are</code>：固定匹配空格+are+空格</strong></li>
<li><strong><code>(.*?)</code>：非贪婪匹配任意字符作为第2组，会匹配到”smarter”</strong></li>
<li><strong><code>.*</code>：匹配空格后剩余字符（”than dogs”）</strong></li>
</ul>
</li>
<li><strong>‌匹配结果‌：</strong><ul>
<li><strong><code>group()</code>：返回完整匹配内容 <code>&quot;Cats are smarter than dogs&quot;</code></strong></li>
<li><strong><code>group(1)</code>：第1个括号匹配的内容 <code>&quot;Cats&quot;</code></strong></li>
<li><strong><code>group(2)</code>：第2个括号匹配的内容 <code>&quot;smarter&quot;</code></strong></li>
</ul>
</li>
<li><strong>‌方法对比‌：</strong><ul>
<li><strong><code>group()</code>：默认返回整个匹配字符串</strong></li>
<li><strong><code>group(n)</code>：返回第n个捕获组（括号分组）内容</strong></li>
<li><strong><code>groups()</code>：以元组形式返回所有捕获组（示例中未使用）</strong></li>
</ul>
</li>
<li><strong>‌特殊说明‌：</strong><ul>
<li><strong><code>re.M|re.I</code> 是组合标志，表示多行模式+忽略大小写</strong></li>
<li><strong>非贪婪模式<code>.*?</code>会匹配尽可能少的字符</strong></li>
</ul>
</li>
</ol>
<hr>
<h3 id="re-search"><a href="#re-search" class="headerlink" title="re.search"></a><strong><code>re.search</code></strong></h3><p><strong>扫描整个字符串并返回第一个成功的匹配。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.search(pattern, string, flags=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left"><strong>参数</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>pattern</strong></td>
<td align="left"><strong>匹配的正则表达式</strong></td>
</tr>
<tr>
<td align="left"><strong>string</strong></td>
<td align="left"><strong>要匹配的字符串。</strong></td>
</tr>
<tr>
<td align="left"><strong>flags</strong></td>
<td align="left"><strong>标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。如<code>re.I</code>忽略大小写、<code>re.M</code>多行模式等</strong></td>
</tr>
</tbody></table>
<p><strong>返回值特性‌：</strong></p>
<ul>
<li><p><strong>匹配成功返回<code>Match</code>对象，包含<code>group()</code>、<code>start()</code>、<code>end()</code>等方法</strong></p>
</li>
<li><p><strong>匹配失败返回<code>None</code>，因此使用时需先判断返回值</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(re.search(<span class="string">&#x27;www&#x27;</span>, <span class="string">&#x27;www.runoob.com&#x27;</span>).span())  <span class="comment"># 在起始位置匹配</span></span><br><span class="line"><span class="built_in">print</span>(re.search(<span class="string">&#x27;com&#x27;</span>, <span class="string">&#x27;www.runoob.com&#x27;</span>).span())         <span class="comment"># 不在起始位置匹配</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">(0, 3)</span></span><br><span class="line"><span class="string">(11, 14)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>‌典型应用场景‌：</strong></p>
<ul>
<li><strong>提取首个符合模式的子串（如邮箱、电话号码等）</strong></li>
<li><strong>多模式匹配时可用<code>|</code>连接多个模式</strong></li>
<li><strong>配合<code>group()</code>方法获取捕获组内容</strong></li>
</ul>
<p><strong>我们可以使用<code>group(num)</code> 或 <code>groups()</code> 匹配对象函数来获取匹配表达式。</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>匹配对象方法</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong><code>group(num=0)</code></strong></td>
<td align="left"><strong>匹配的整个表达式的字符串，group() 可以一次输入多个组号，在这种情况下它将返回一个包含那些组所对应值的元组。</strong></td>
</tr>
<tr>
<td align="left"><strong><code>groups()</code></strong></td>
<td align="left"><strong>返回一个包含所有小组字符串的元组，从 1 到 所含的小组号。</strong></td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">text = <span class="string">&quot;Contact: email@example.com, phone: 123-4567&quot;</span></span><br><span class="line"><span class="keyword">match</span> = re.search(<span class="string">r&#x27;(\w+@\w+\.\w+)&#x27;</span>, text)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">match</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Found email:&quot;</span>, <span class="keyword">match</span>.group(<span class="number">1</span>))  <span class="comment"># 输出捕获的邮箱</span></span><br><span class="line"><span class="comment"># 输出 Found email: email@example.com</span></span><br></pre></td></tr></table></figure>

<p><strong>与<code>re.match</code>的区别‌：</strong></p>
<ul>
<li><strong><code>search()</code>扫描整个字符串查找匹配，直到找到一个匹配。</strong></li>
<li><strong><code>match()</code>仅在字符串开头匹配，匹配失败，函数返回 None</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"> </span><br><span class="line">line = <span class="string">&quot;Cats are smarter than dogs&quot;</span></span><br><span class="line"> </span><br><span class="line">matchObj = re.<span class="keyword">match</span>( <span class="string">r&#x27;dogs&#x27;</span>, line, re.M|re.I)</span><br><span class="line"><span class="keyword">if</span> matchObj:</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;match --&gt; matchObj.group() : &quot;</span>, matchObj.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;No match!!&quot;</span>)</span><br><span class="line"> </span><br><span class="line">matchObj = re.search( <span class="string">r&#x27;dogs&#x27;</span>, line, re.M|re.I)</span><br><span class="line"><span class="keyword">if</span> matchObj:</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;search --&gt; matchObj.group() : &quot;</span>, matchObj.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;No match!!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">No match!!</span></span><br><span class="line"><span class="string">search --&gt; matchObj.group() :  dogs</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="re-sub"><a href="#re-sub" class="headerlink" title="re.sub"></a><strong><code>re.sub</code></strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.sub(pattern, repl, string, count=<span class="number">0</span>, flags=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left"><strong>参数</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>pattern</strong></td>
<td align="left"><strong>匹配的正则表达式</strong></td>
</tr>
<tr>
<td align="left"><strong>repl</strong></td>
<td align="left"><strong>替换的字符串，也可为一个函数。</strong></td>
</tr>
<tr>
<td align="left"><strong>string</strong></td>
<td align="left"><strong>要匹配的字符串。</strong></td>
</tr>
<tr>
<td align="left"><strong>count</strong></td>
<td align="left"><strong>模式匹配后替换的最大次数，默认 0 表示替换所有的匹配。</strong></td>
</tr>
<tr>
<td align="left"><strong>flags</strong></td>
<td align="left"><strong>标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。如<code>re.I</code>忽略大小写、<code>re.M</code>多行模式等</strong></td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"> </span><br><span class="line">phone = <span class="string">&quot;2004-959-559 # 这是一个电话号码&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 删除注释</span></span><br><span class="line">num = re.sub(<span class="string">r&#x27;#.*$&#x27;</span>, <span class="string">&quot;&quot;</span>, phone)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;电话号码 : &quot;</span>, num)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 移除非数字的内容</span></span><br><span class="line">num = re.sub(<span class="string">r&#x27;\D&#x27;</span>, <span class="string">&quot;&quot;</span>, phone)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;电话号码 : &quot;</span>, num)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">电话号码 :  2004-959-559 </span></span><br><span class="line"><span class="string">电话号码 :  2004959559</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>repl 参数是一个函数</strong></p>
<p><strong>将字符串中的匹配的数字乘以 2：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 将匹配的数字乘以 2</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">double</span>(<span class="params">matched</span>):</span><br><span class="line">    value = <span class="built_in">int</span>(matched.group(<span class="string">&#x27;value&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">str</span>(value * <span class="number">2</span>)</span><br><span class="line"> </span><br><span class="line">s = <span class="string">&#x27;A23G4HFD567&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(re.sub(<span class="string">&#x27;(?P&lt;value&gt;\d+)&#x27;</span>, double, s))</span><br><span class="line"><span class="comment"># 输出 A46G8HFD1134</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="re-compile"><a href="#re-compile" class="headerlink" title="re.compile"></a><strong><code>re.compile</code></strong></h3><p><strong>compile 函数用于编译正则表达式，生成一个正则表达式（ Pattern ）对象，供 <code>match()</code> 和 <code>search()</code> 这两个函数使用。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.<span class="built_in">compile</span>(pattern[, flags])</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>pattern</strong></td>
<td><strong>匹配的正则表达式</strong></td>
</tr>
<tr>
<td><strong>flag</strong></td>
<td><strong>可选，表示匹配模式，比如忽略大小写，多行模式等，具体参数为</strong></td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接编译正则表达式（匹配数字）</span></span><br><span class="line">pattern = re.<span class="built_in">compile</span>(<span class="string">r&#x27;\d+&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试1：从字符串开头匹配（无数字开头）</span></span><br><span class="line">m1 = pattern.<span class="keyword">match</span>(<span class="string">&#x27;one12twothree34four&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;从头匹配结果:&quot;</span>, m1)  <span class="comment"># None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试2：从索引2开始匹配（字符&#x27;e&#x27;位置）</span></span><br><span class="line">m2 = pattern.<span class="keyword">match</span>(<span class="string">&#x27;one12twothree34four&#x27;</span>, <span class="number">2</span>, <span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;位置2-10匹配:&quot;</span>, m2)  <span class="comment"># None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试3：从索引3开始匹配（字符&#x27;1&#x27;位置）</span></span><br><span class="line">m3 = pattern.<span class="keyword">match</span>(<span class="string">&#x27;one12twothree34four&#x27;</span>, <span class="number">3</span>, <span class="number">10</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;位置3-10匹配:&quot;</span>, m3)  <span class="comment"># 返回Match对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出匹配详情</span></span><br><span class="line"><span class="keyword">if</span> m3:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;匹配内容:&quot;</span>, m3.group())  <span class="comment"># &#x27;12&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;起始位置:&quot;</span>, m3.start())  <span class="comment"># 3</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;结束位置:&quot;</span>, m3.end())    <span class="comment"># 5</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;位置范围:&quot;</span>, m3.span())   <span class="comment"># (3,5)</span></span><br><span class="line">    </span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">从头匹配结果: None</span></span><br><span class="line"><span class="string">位置2-10匹配: None</span></span><br><span class="line"><span class="string">位置3-10匹配: &lt;re.Match object; span=(3, 5), match=&#x27;12&#x27;&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">匹配内容: 12</span></span><br><span class="line"><span class="string">起始位置: 3</span></span><br><span class="line"><span class="string">结束位置: 5</span></span><br><span class="line"><span class="string">位置范围: (3, 5)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong><code>group([group1, …])</code> 方法用于获得一个或多个分组匹配的字符串，当要获得整个匹配的子串时，可直接使用 <code>group()</code> 或 <code>group(0)</code>；</strong></li>
<li><strong><code>start([group])</code> 方法用于获取分组匹配的子串在整个字符串中的起始位置（子串第一个字符的索引），参数默认值为 0；</strong></li>
<li><strong><code>end([group])</code> 方法用于获取分组匹配的子串在整个字符串中的结束位置（子串最后一个字符的索引+1），参数默认值为 0；</strong></li>
<li><strong><code>span([group])</code> 方法返回 <code>(start(group), end(group))</code></strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直接编译正则表达式</span></span><br><span class="line">pattern = re.<span class="built_in">compile</span>(<span class="string">r&#x27;([a-z]+) ([a-z]+)&#x27;</span>, re.I)  <span class="comment"># 忽略大小写</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行匹配</span></span><br><span class="line">m = pattern.<span class="keyword">match</span>(<span class="string">&#x27;Hello World Wide Web&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出匹配结果</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;完整匹配对象:&quot;</span>, m)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;整个匹配内容:&quot;</span>, m.group(<span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;整个匹配位置:&quot;</span>, m.span(<span class="number">0</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;第一个分组内容:&quot;</span>, m.group(<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;第一个分组位置:&quot;</span>, m.span(<span class="number">1</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;第二个分组内容:&quot;</span>, m.group(<span class="number">2</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;第二个分组位置:&quot;</span>, m.span(<span class="number">2</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;所有分组内容:&quot;</span>, m.groups())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 故意访问不存在的分组</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;尝试访问第三个分组:&quot;</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(m.group(<span class="number">3</span>))</span><br><span class="line"><span class="keyword">except</span> IndexError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;出现错误: <span class="subst">&#123;e&#125;</span> (这是预期错误)&quot;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">完整匹配对象: &lt;re.Match object; span=(0, 11), match=&#x27;Hello World&#x27;&gt;</span></span><br><span class="line"><span class="string">整个匹配内容: Hello World</span></span><br><span class="line"><span class="string">整个匹配位置: (0, 11)</span></span><br><span class="line"><span class="string">第一个分组内容: Hello</span></span><br><span class="line"><span class="string">第一个分组位置: (0, 5)</span></span><br><span class="line"><span class="string">第二个分组内容: World</span></span><br><span class="line"><span class="string">第二个分组位置: (6, 11)</span></span><br><span class="line"><span class="string">所有分组内容: (&#x27;Hello&#x27;, &#x27;World&#x27;)</span></span><br><span class="line"><span class="string">尝试访问第三个分组:</span></span><br><span class="line"><span class="string">出现错误: no such group (这是预期错误)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="re-findall"><a href="#re-findall" class="headerlink" title="re.findall"></a><strong><code>re.findall</code></strong></h3><p><strong>在字符串中找到正则表达式所匹配的所有子串，并返回一个列表，如果有多个匹配模式，则返回元组列表，如果没有找到匹配的，则返回空列表。</strong></p>
<p><strong>注意： match 和 search 是匹配一次 ，findall 匹配所有。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">re.findall(pattern, string, flags=<span class="number">0</span>)</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">pattern.findall(string[, pos[, endpos]])</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>pattern</strong></td>
<td><strong>匹配模式</strong></td>
</tr>
<tr>
<td><strong>string</strong></td>
<td><strong>待匹配的字符串</strong></td>
</tr>
<tr>
<td><strong>pos</strong></td>
<td><strong>可选参数，指定字符串的起始位置，默认为 0。</strong></td>
</tr>
<tr>
<td><strong>endpos</strong></td>
<td><strong>可选参数，指定字符串的结束位置，默认为字符串的长度。</strong></td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"> </span><br><span class="line">result1 = re.findall(<span class="string">r&#x27;\d+&#x27;</span>,<span class="string">&#x27;runoob 123 google 456&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">pattern = re.<span class="built_in">compile</span>(<span class="string">r&#x27;\d+&#x27;</span>)   <span class="comment"># 查找数字</span></span><br><span class="line">result2 = pattern.findall(<span class="string">&#x27;runoob 123 google 456&#x27;</span>)</span><br><span class="line">result3 = pattern.findall(<span class="string">&#x27;run88oob123google456&#x27;</span>, <span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(result1)</span><br><span class="line"><span class="built_in">print</span>(result2)</span><br><span class="line"><span class="built_in">print</span>(result3)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[&#x27;123&#x27;, &#x27;456&#x27;]</span></span><br><span class="line"><span class="string">[&#x27;123&#x27;, &#x27;456&#x27;]</span></span><br><span class="line"><span class="string">[&#x27;88&#x27;, &#x27;12&#x27;]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>多个匹配模式，返回元组列表：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">result = re.findall(<span class="string">r&#x27;(\w+)=(\d+)&#x27;</span>, <span class="string">&#x27;set width=20 and height=10&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(result)</span><br><span class="line"><span class="comment"># [(&#x27;width&#x27;, &#x27;20&#x27;), (&#x27;height&#x27;, &#x27;10&#x27;)]</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="re-finditer"><a href="#re-finditer" class="headerlink" title="re.finditer"></a><strong><code>re.finditer</code></strong></h3><p><strong>和 <code>re.findall</code> 类似，在字符串中找到正则表达式所匹配的所有子串，并把它们作为一个迭代器返回。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.finditer(pattern, string, flags=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left"><strong>参数</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>pattern</strong></td>
<td align="left"><strong>匹配的正则表达式</strong></td>
</tr>
<tr>
<td align="left"><strong>string</strong></td>
<td align="left"><strong>要匹配的字符串。</strong></td>
</tr>
<tr>
<td align="left"><strong>flags</strong></td>
<td align="left"><strong>标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。</strong></td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"> </span><br><span class="line">it = re.finditer(<span class="string">r&quot;\d+&quot;</span>,<span class="string">&quot;12a32bc43jf3&quot;</span>) </span><br><span class="line"><span class="keyword">for</span> <span class="keyword">match</span> <span class="keyword">in</span> it: </span><br><span class="line">    <span class="built_in">print</span> (<span class="keyword">match</span>.group() )</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">12 </span></span><br><span class="line"><span class="string">32 </span></span><br><span class="line"><span class="string">43 </span></span><br><span class="line"><span class="string">3</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="re-split"><a href="#re-split" class="headerlink" title="re.split"></a><strong><code>re.split</code></strong></h3><p><strong>split 方法按照能够匹配的子串将字符串分割后返回列表，它的使用形式如下：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.split(pattern, string[, maxsplit=<span class="number">0</span>, flags=<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left"><strong>参数</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>pattern</strong></td>
<td align="left"><strong>匹配的正则表达式</strong></td>
</tr>
<tr>
<td align="left"><strong>string</strong></td>
<td align="left"><strong>要匹配的字符串。</strong></td>
</tr>
<tr>
<td align="left"><strong>maxsplit</strong></td>
<td align="left"><strong>分割次数，maxsplit&#x3D;1 分割一次，默认为 0，不限制次数。</strong></td>
</tr>
<tr>
<td align="left"><strong>flags</strong></td>
<td align="left"><strong>标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。</strong></td>
</tr>
</tbody></table>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试1：简单分割非单词字符</span></span><br><span class="line">split1 = re.split(<span class="string">&#x27;\W+&#x27;</span>, <span class="string">&#x27;runoob, runoob, runoob.&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;测试1结果:&quot;</span>, split1)  </span><br><span class="line"><span class="comment"># [&#x27;runoob&#x27;, &#x27;runoob&#x27;, &#x27;runoob&#x27;, &#x27;&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试2：包含分隔符的分割</span></span><br><span class="line">split2 = re.split(<span class="string">&#x27;(\W+)&#x27;</span>, <span class="string">&#x27; runoob, runoob, runoob.&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;测试2结果:&quot;</span>, split2)  </span><br><span class="line"><span class="comment"># [&#x27;&#x27;, &#x27; &#x27;, &#x27;runoob&#x27;, &#x27;, &#x27;, &#x27;runoob&#x27;, &#x27;, &#x27;, &#x27;runoob&#x27;, &#x27;.&#x27;, &#x27;&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试3：限制分割次数</span></span><br><span class="line">split3 = re.split(<span class="string">&#x27;\W+&#x27;</span>, <span class="string">&#x27; runoob, runoob, runoob.&#x27;</span>, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;测试3结果:&quot;</span>, split3)  </span><br><span class="line"><span class="comment"># [&#x27;&#x27;, &#x27;runoob, runoob, runoob.&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试4：无匹配模式的分割</span></span><br><span class="line">split4 = re.split(<span class="string">&#x27;a*&#x27;</span>, <span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;测试4结果:&quot;</span>, split4)  </span><br><span class="line"><span class="comment"># [&#x27;hello world&#x27;]</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="正则表达式对象"><a href="#正则表达式对象" class="headerlink" title="正则表达式对象"></a><strong>正则表达式对象</strong></h3><ul>
<li><p><strong>re.RegexObject</strong></p>
<p><strong>re.compile() 返回 RegexObject 对象。</strong></p>
</li>
<li><h4 id="re-MatchObject"><a href="#re-MatchObject" class="headerlink" title="re.MatchObject"></a><strong>re.MatchObject</strong></h4><p><strong>group() 返回被 RE 匹配的字符串</strong></p>
<ul>
<li><p><strong>start() 返回匹配开始的位置</strong></p>
</li>
<li><p><strong>end() 返回匹配结束的位置</strong></p>
</li>
<li><p><strong>span() 返回一个元组包含匹配 (开始,结束) 的位置</strong></p>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="正则表达式修饰符-可选标志"><a href="#正则表达式修饰符-可选标志" class="headerlink" title="正则表达式修饰符 - 可选标志"></a><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-reg-expressions.html">正则表达式修饰符 - 可选标志</a></strong></h3><p><strong>正则表达式可以包含一些可选标志修饰符来控制匹配的模式。</strong></p>
<p><strong>以下标志可以单独使用，也可以通过按位或（|）组合使用</strong></p>
<table>
<thead>
<tr>
<th><strong>修饰符</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong><code>re.IGNORECASE</code> 或 <code>re.I</code></strong></td>
<td><strong>使匹配对大小写不敏感</strong></td>
</tr>
<tr>
<td><strong><code>re.L</code></strong></td>
<td><strong>表示特殊字符集 \w, \W, \b, \B, \s, \S 依赖于当前环境</strong></td>
</tr>
<tr>
<td><strong><code>re.MULTILINE</code> 或 <code>re.M</code></strong></td>
<td><strong>多行模式，改变 ^ 和 $ 的行为，使它们匹配字符串的每一行的开头和结尾。</strong></td>
</tr>
<tr>
<td><strong><code>re.DOTALL</code> 或 <code>re.S</code></strong></td>
<td><strong>使 . 匹配包括换行符在内的任意字符。</strong></td>
</tr>
<tr>
<td><strong><code>re.ASCII</code></strong></td>
<td><strong>使 \w, \W, \b, \B, \d, \D, \s, \S 仅匹配 ASCII 字符。</strong></td>
</tr>
<tr>
<td><strong><code>re.VERBOSE</code> 或 <code>re.X</code></strong></td>
<td><strong>忽略空格和注释，可以更清晰地组织复杂的正则表达式。</strong></td>
</tr>
</tbody></table>
<hr>
<h3 id="正则表达式模式"><a href="#正则表达式模式" class="headerlink" title="正则表达式模式"></a><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-reg-expressions.html">正则表达式模式</a></strong></h3><hr>
<h2 id="CGI编程（舍弃）"><a href="#CGI编程（舍弃）" class="headerlink" title="CGI编程（舍弃）"></a><strong>CGI编程（舍弃）</strong></h2><p><strong><font color="red">虽然CGI适合学习Web原理，但实际开发推荐使用WSGI&#x2F;ASGI或框架（如Flask&#x2F;Django）</font></strong></p>
<p><strong>CGI(Common Gateway Interface)，通用网关接口，它是一段程序，运行在服务器上如：HTTP服务器，提供同客户端HTML页面的接口。</strong></p>
<p><strong>CGI(通用网关接口)是Web服务器与外部程序交互的标准协议，允许服务器执行程序并返回动态内容。</strong></p>
<h3 id="CGI工作流程"><a href="#CGI工作流程" class="headerlink" title="CGI工作流程"></a><strong>CGI工作流程</strong></h3><p><strong>浏览器请求→服务器识别CGI→执行程序→返回动态响应</strong></p>
<ol>
<li><p><strong>使用你的浏览器访问URL并连接到HTTP web 服务器。</strong></p>
</li>
<li><p><strong>Web服务器接收到请求信息后会解析URL，并查找访问的文件在服务器上是否存在，如果存在返回文件的内容，否则返回错误信息。</strong></p>
</li>
<li><p><strong>浏览器从服务器上接收信息，并显示接收的文件或者错误信息。</strong></p>
</li>
</ol>
<h3 id="CGI架构图"><a href="#CGI架构图" class="headerlink" title="CGI架构图"></a><strong>CGI架构图</strong></h3><p><strong><img src="https://www.runoob.com/wp-content/uploads/2013/11/Cgi01.png" alt="cgiarch"></strong></p>
<h3 id="Web服务器支持及配置"><a href="#Web服务器支持及配置" class="headerlink" title="Web服务器支持及配置"></a><strong>Web服务器支持及配置</strong></h3><p><strong>所有的HTTP服务器执行 CGI 程序都保存在一个预先配置的 CGI 目录</strong></p>
<p><strong>CGI文件的扩展名为.cgi，python也可以使用.py扩展名。</strong></p>
<p><strong>如果你想指定其他运行CGI脚本的目录，可以修改httpd.conf配置文件，如下所示：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory <span class="string">&quot;/var/www/cgi-bin&quot;</span>&gt;</span><br><span class="line">   AllowOverride <span class="literal">None</span></span><br><span class="line">   Options +ExecCGI</span><br><span class="line">   Order allow,deny</span><br><span class="line">   Allow <span class="keyword">from</span> <span class="built_in">all</span></span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>

<p><strong>在 AddHandler 中添加 .py 后缀，这样我们就可以访问 .py 结尾的 python 脚本文件：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AddHandler cgi-script .cgi .pl .py</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="第一个CGI程序"><a href="#第一个CGI程序" class="headerlink" title="第一个CGI程序"></a><strong>第一个CGI程序</strong></h3><p><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-cgi-programming.html">linux 下编写</a></strong></p>
<p><strong>windows下编写：</strong></p>
<p><strong><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42296333/article/details/80769059">CGI 编程环境配置</a></strong></p>
<p><strong><a target="_blank" rel="noopener" href="https://www.cnblogs.com/guohu/p/11108448.html">补充配置</a></strong></p>
<p><strong>hellocgi.py</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Content-type: text/html\n&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>()                             <span class="comment"># 空行，告诉服务器结束头部</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&lt;html&gt;&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&lt;head&gt;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&lt;meta charset=&quot;utf-8&quot;&gt;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&lt;title&gt;我的第一个Windows CGI程序&lt;/title&gt;&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&lt;/head&gt;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&lt;body&gt;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&lt;h2&gt;Hello World! Windows CGI测试&lt;/h2&gt;&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&lt;/body&gt;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&lt;/html&gt;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="mysqldb-连接数据库"><a href="#mysqldb-连接数据库" class="headerlink" title="mysqldb 连接数据库"></a><strong>mysqldb 连接数据库</strong></h2><h3 id="python-安装-mysql-connector"><a href="#python-安装-mysql-connector" class="headerlink" title="python 安装 mysql-connector"></a><strong><em>python</em> 安装 mysql-connector</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade mysql-connector-python</span><br></pre></td></tr></table></figure>

<h3 id="库"><a href="#库" class="headerlink" title="库"></a><strong>库</strong></h3><ul>
<li><p><strong>遍历现有数据库</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"> </span><br><span class="line">mydb = mysql.connector.connect(</span><br><span class="line">  host=<span class="string">&quot;localhost&quot;</span>,       <span class="comment"># 数据库主机地址</span></span><br><span class="line">  user=<span class="string">&quot;root&quot;</span>,    <span class="comment"># 数据库用户名</span></span><br><span class="line">  passwd=<span class="string">&quot;root&quot;</span>,   <span class="comment"># 数据库密码</span></span><br><span class="line">)</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(mydb)</span><br><span class="line"></span><br><span class="line">mycursor = mydb.cursor()</span><br><span class="line"></span><br><span class="line">mycursor.execute(<span class="string">&quot;SHOW DATABASES&quot;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> mycursor:</span><br><span class="line">  <span class="built_in">print</span>(x)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">&lt;mysql.connector.connection_cext.CMySQLConnection object at 0x0000015D20A21940&gt;</span></span><br><span class="line"><span class="string">(&#x27;beefcattlefarming&#x27;,)</span></span><br><span class="line"><span class="string">(&#x27;blog&#x27;,)</span></span><br><span class="line"><span class="string">(&#x27;information_schema&#x27;,)</span></span><br><span class="line"><span class="string">(&#x27;loginandout&#x27;,)</span></span><br><span class="line"><span class="string">(&#x27;logindemo&#x27;,)</span></span><br><span class="line"><span class="string">(&#x27;mysql&#x27;,)</span></span><br><span class="line"><span class="string">(&#x27;performance_schema&#x27;,)</span></span><br><span class="line"><span class="string">(&#x27;sys&#x27;,)</span></span><br><span class="line"><span class="string">(&#x27;testdb&#x27;,)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>创建数据库 <code>python_db</code></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"> </span><br><span class="line">mydb = mysql.connector.connect(</span><br><span class="line">  host=<span class="string">&quot;localhost&quot;</span>,       <span class="comment"># 数据库主机地址</span></span><br><span class="line">  user=<span class="string">&quot;root&quot;</span>,    <span class="comment"># 数据库用户名</span></span><br><span class="line">  passwd=<span class="string">&quot;root&quot;</span>   <span class="comment"># 数据库密码</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># print(mydb) </span></span><br><span class="line"></span><br><span class="line">mycursor = mydb.cursor()</span><br><span class="line"> </span><br><span class="line">mycursor.execute(<span class="string">&quot;CREATE DATABASE python_db&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>连接数据库</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"> </span><br><span class="line">mydb = mysql.connector.connect(</span><br><span class="line">  host=<span class="string">&quot;localhost&quot;</span>,       <span class="comment"># 数据库主机地址</span></span><br><span class="line">  user=<span class="string">&quot;root&quot;</span>,    <span class="comment"># 数据库用户名</span></span><br><span class="line">  passwd=<span class="string">&quot;root&quot;</span>   <span class="comment"># 数据库密码</span></span><br><span class="line">  database=<span class="string">&quot;python_db&quot;</span>    <span class="comment">#数据库名</span></span><br><span class="line">)</span><br><span class="line"><span class="comment"># print(mydb.dabase) </span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="表"><a href="#表" class="headerlink" title="表"></a><strong>表</strong></h3><ul>
<li><p><strong>遍历所有数据表</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"> </span><br><span class="line">mydb = mysql.connector.connect(</span><br><span class="line">  host=<span class="string">&quot;localhost&quot;</span>,       <span class="comment"># 数据库主机地址</span></span><br><span class="line">  user=<span class="string">&quot;root&quot;</span>,    <span class="comment"># 数据库用户名</span></span><br><span class="line">  passwd=<span class="string">&quot;root&quot;</span>   <span class="comment"># 数据库密码</span></span><br><span class="line">  database=<span class="string">&quot;python_db&quot;</span>    <span class="comment">#数据库名</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">mycursor = mydb.cursor()</span><br><span class="line"> </span><br><span class="line">mycursor.execute(<span class="string">&quot;SHOW TABLES&quot;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> mycursor:</span><br><span class="line">  <span class="built_in">print</span>(x)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>创建数据表</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"> </span><br><span class="line">mydb = mysql.connector.connect(</span><br><span class="line">  host=<span class="string">&quot;localhost&quot;</span>,       <span class="comment"># 数据库主机地址</span></span><br><span class="line">  user=<span class="string">&quot;root&quot;</span>,    <span class="comment"># 数据库用户名</span></span><br><span class="line">  passwd=<span class="string">&quot;root&quot;</span>   <span class="comment"># 数据库密码</span></span><br><span class="line">  database=<span class="string">&quot;python_db&quot;</span>    <span class="comment">#数据库名</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">mycursor = mydb.cursor()</span><br><span class="line"></span><br><span class="line">mycursor.execute(<span class="string">&quot;CREATE TABLE sites (name VARCHAR(255), url VARCHAR(255))&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="增"><a href="#增" class="headerlink" title="增"></a><strong>增</strong></h3><ul>
<li><p><strong>插入数据</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"> </span><br><span class="line">mydb = mysql.connector.connect(</span><br><span class="line">  host=<span class="string">&quot;localhost&quot;</span>,       <span class="comment"># 数据库主机地址</span></span><br><span class="line">  user=<span class="string">&quot;root&quot;</span>,    <span class="comment"># 数据库用户名</span></span><br><span class="line">  passwd=<span class="string">&quot;root&quot;</span>   <span class="comment"># 数据库密码</span></span><br><span class="line">  database=<span class="string">&quot;python_db&quot;</span>    <span class="comment">#数据库名</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">mycursor = mydb.cursor()</span><br><span class="line">sql = <span class="string">&quot;INSERT INTO sites (name, url) VALUES (%s, %s)&quot;</span></span><br><span class="line">val = (<span class="string">&quot;RUNOOB&quot;</span>, <span class="string">&quot;https://www.runoob.com&quot;</span>)  <span class="comment">#python元组</span></span><br><span class="line"></span><br><span class="line">mycursor.execute(sql, val)</span><br><span class="line"></span><br><span class="line">mydb.commit()    <span class="comment"># 数据表内容有更新，必须使用到该语句</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(mycursor.rowcount, <span class="string">&quot;记录插入成功。&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>批量插入</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"> </span><br><span class="line">mydb = mysql.connector.connect(</span><br><span class="line">  host=<span class="string">&quot;localhost&quot;</span>,       <span class="comment"># 数据库主机地址</span></span><br><span class="line">  user=<span class="string">&quot;root&quot;</span>,    <span class="comment"># 数据库用户名</span></span><br><span class="line">  passwd=<span class="string">&quot;root&quot;</span>   <span class="comment"># 数据库密码</span></span><br><span class="line">  database=<span class="string">&quot;python_db&quot;</span>    <span class="comment">#数据库名</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">mycursor = mydb.cursor()</span><br><span class="line">sql = <span class="string">&quot;INSERT INTO sites (name, url) VALUES (%s, %s)&quot;</span></span><br><span class="line">val = [</span><br><span class="line">  (<span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;https://www.google.com&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;Github&#x27;</span>, <span class="string">&#x27;https://www.github.com&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;Taobao&#x27;</span>, <span class="string">&#x27;https://www.taobao.com&#x27;</span>),</span><br><span class="line">  (<span class="string">&#x27;stackoverflow&#x27;</span>, <span class="string">&#x27;https://www.stackoverflow.com/&#x27;</span>)</span><br><span class="line">]</span><br><span class="line"> </span><br><span class="line">mycursor.executemany(sql, val)</span><br><span class="line"> </span><br><span class="line">mydb.commit()    <span class="comment"># 数据表内容有更新，必须使用到该语句</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(mycursor.rowcount, <span class="string">&quot;记录插入成功。&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>获取插入数据的 id</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;记录已插入, ID:&quot;</span>, mycursor.lastrowid)</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="查"><a href="#查" class="headerlink" title="查"></a><strong>查</strong></h3><ul>
<li><p><strong>查询所有数据</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"> </span><br><span class="line">mydb = mysql.connector.connect(</span><br><span class="line">  host=<span class="string">&quot;localhost&quot;</span>,       <span class="comment"># 数据库主机地址</span></span><br><span class="line">  user=<span class="string">&quot;root&quot;</span>,    <span class="comment"># 数据库用户名</span></span><br><span class="line">  passwd=<span class="string">&quot;root&quot;</span>   <span class="comment"># 数据库密码</span></span><br><span class="line">  database=<span class="string">&quot;python_db&quot;</span>    <span class="comment">#数据库名</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">mycursor = mydb.cursor()</span><br><span class="line">mycursor.execute(<span class="string">&quot;SELECT * FROM sites&quot;</span>)</span><br><span class="line"> </span><br><span class="line">myresult = mycursor.fetchall()     <span class="comment"># fetchall() 获取所有记录</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> myresult:</span><br><span class="line">  <span class="built_in">print</span>(x)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">(&#x27;RUNOOB&#x27;, &#x27;https://www.runoob.com&#x27;, 1)</span></span><br><span class="line"><span class="string">(&#x27;Google&#x27;, &#x27;https://www.google.com&#x27;, 2)</span></span><br><span class="line"><span class="string">(&#x27;Github&#x27;, &#x27;https://www.github.com&#x27;, 3)</span></span><br><span class="line"><span class="string">(&#x27;Taobao&#x27;, &#x27;https://www.taobao.com&#x27;, 4)</span></span><br><span class="line"><span class="string">(&#x27;stackoverflow&#x27;, &#x27;https://www.stackoverflow.com/&#x27;, 5)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>查询单条数据</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mycursor = mydb.cursor()</span><br><span class="line"> </span><br><span class="line">mycursor.execute(<span class="string">&quot;SELECT * FROM sites&quot;</span>)</span><br><span class="line"> </span><br><span class="line">myresult = mycursor.fetchone()</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(myresult)</span><br></pre></td></tr></table></figure>

<p><strong>…</strong></p>
</li>
</ul>
<hr>
<h3 id="删"><a href="#删" class="headerlink" title="删"></a><strong>删</strong></h3><ul>
<li><p><strong>删除记录</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mycursor = mydb.cursor()</span><br><span class="line"> </span><br><span class="line">sql = <span class="string">&quot;DELETE FROM sites WHERE name = &#x27;stackoverflow&#x27;&quot;</span></span><br><span class="line"> </span><br><span class="line">mycursor.execute(sql)</span><br><span class="line"> </span><br><span class="line">mydb.commit()</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(mycursor.rowcount, <span class="string">&quot; 条记录删除&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="改"><a href="#改" class="headerlink" title="改"></a><strong>改</strong></h3><ul>
<li><p><strong>更新表数据</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mycursor = mydb.cursor()</span><br><span class="line"> </span><br><span class="line">sql = <span class="string">&quot;UPDATE sites SET name = &#x27;ZH&#x27; WHERE name = &#x27;Zhihu&#x27;&quot;</span></span><br><span class="line"> </span><br><span class="line">mycursor.execute(sql)</span><br><span class="line"> </span><br><span class="line">mydb.commit()</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(mycursor.rowcount, <span class="string">&quot; 条记录被修改&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<p><strong>更多 <a target="_blank" rel="noopener" href="https://www.runoob.com/mysql/mysql-tutorial.html">SQL</a> 语句</strong></p>
<hr>
<h2 id="PyMySQL-连接数据库"><a href="#PyMySQL-连接数据库" class="headerlink" title="PyMySQL 连接数据库"></a><strong>PyMySQL 连接数据库</strong></h2><p><strong>PyMySQL 是在 Python3.x 版本中用于连接 MySQL 服务器的一个库，Python2 中则使用 mysqldb。</strong></p>
<h3 id="PyMySQL-安装"><a href="#PyMySQL-安装" class="headerlink" title="PyMySQL 安装"></a><strong>PyMySQL 安装</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install PyMySQL</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="连接数据库"><a href="#连接数据库" class="headerlink" title="连接数据库"></a><strong>连接数据库</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 打开数据库连接</span></span><br><span class="line">db = pymysql.connect(host=<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">                     user=<span class="string">&#x27;testuser&#x27;</span>,</span><br><span class="line">                     password=<span class="string">&#x27;test123&#x27;</span>,</span><br><span class="line">                     database=<span class="string">&#x27;TESTDB&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 使用 cursor() 方法创建一个游标对象 cursor</span></span><br><span class="line">cursor = db.cursor()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 使用 execute()  方法执行 SQL 查询 </span></span><br><span class="line">cursor.execute(<span class="string">&quot;SELECT VERSION()&quot;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 使用 fetchone() 方法获取单条数据.</span></span><br><span class="line">data = cursor.fetchone()</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;Database version : %s &quot;</span> % data)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 关闭数据库连接</span></span><br><span class="line">db.close()</span><br><span class="line"></span><br><span class="line"><span class="comment">#输出Database version : 8.0.32 </span></span><br></pre></td></tr></table></figure>

<h3 id="创建数据库表"><a href="#创建数据库表" class="headerlink" title="创建数据库表"></a><strong>创建数据库表</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 打开数据库连接</span></span><br><span class="line">db = pymysql.connect(host=<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">                     user=<span class="string">&#x27;testuser&#x27;</span>,</span><br><span class="line">                     password=<span class="string">&#x27;test123&#x27;</span>,</span><br><span class="line">                     database=<span class="string">&#x27;TESTDB&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 使用 cursor() 方法创建一个游标对象 cursor</span></span><br><span class="line">cursor = db.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用预处理语句创建表</span></span><br><span class="line">sql = <span class="string">&quot;&quot;&quot;CREATE TABLE EMPLOYER (</span></span><br><span class="line"><span class="string">         FIRST_NAME  CHAR(20) NOT NULL,</span></span><br><span class="line"><span class="string">         LAST_NAME  CHAR(20),</span></span><br><span class="line"><span class="string">         AGE INT,  </span></span><br><span class="line"><span class="string">         SEX CHAR(1),</span></span><br><span class="line"><span class="string">         INCOME FLOAT )&quot;&quot;&quot;</span></span><br><span class="line"> </span><br><span class="line">cursor.execute(sql)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 关闭数据库连接</span></span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>

<h3 id="数据库插入"><a href="#数据库插入" class="headerlink" title="数据库插入"></a><strong>数据库插入</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用cursor()方法获取操作游标 </span></span><br><span class="line">cursor = db.cursor()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># SQL 插入语句</span></span><br><span class="line">sql = <span class="string">&quot;&quot;&quot;INSERT INTO EMPLOYEE(FIRST_NAME,</span></span><br><span class="line"><span class="string">         LAST_NAME, AGE, SEX, INCOME)</span></span><br><span class="line"><span class="string">         VALUES (&#x27;Mac&#x27;, &#x27;Mohan&#x27;, 20, &#x27;M&#x27;, 2000)&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">sql = &quot;INSERT INTO EMPLOYEE(FIRST_NAME, \</span></span><br><span class="line"><span class="string">       LAST_NAME, AGE, SEX, INCOME) \</span></span><br><span class="line"><span class="string">       VALUES (&#x27;%s&#x27;, &#x27;%s&#x27;,  %s,  &#x27;%s&#x27;,  %s)&quot; % \</span></span><br><span class="line"><span class="string">       (&#x27;Mac&#x27;, &#x27;Mohan&#x27;, 20, &#x27;M&#x27;, 2000)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">   <span class="comment"># 执行sql语句</span></span><br><span class="line">   cursor.execute(sql)</span><br><span class="line">   <span class="comment"># 提交到数据库执行</span></span><br><span class="line">   db.commit()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">   <span class="comment"># 如果发生错误则回滚</span></span><br><span class="line">   db.rollback()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 关闭数据库连接</span></span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>

<h3 id="数据库查询"><a href="#数据库查询" class="headerlink" title="数据库查询"></a><strong>数据库查询</strong></h3><p><strong>Python查询Mysql使用 fetchone() 方法获取单条数据, 使用fetchall() 方法获取多条数据。</strong></p>
<ul>
<li><strong>fetchone(): 该方法获取下一个查询结果集。结果集是一个对象</strong></li>
<li><strong>fetchall(): 接收全部的返回结果行.</strong></li>
<li><strong>rowcount: 这是一个只读属性，并返回执行execute()方法后影响的行数。</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用cursor()方法获取操作游标 </span></span><br><span class="line">cursor = db.cursor()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># SQL 查询语句</span></span><br><span class="line">sql = <span class="string">&quot;SELECT * FROM EMPLOYEE \</span></span><br><span class="line"><span class="string">       WHERE INCOME &gt; %s&quot;</span> % (<span class="number">1000</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">   <span class="comment"># 执行SQL语句</span></span><br><span class="line">   cursor.execute(sql)</span><br><span class="line">   <span class="comment"># 获取所有记录列表</span></span><br><span class="line">   results = cursor.fetchall()</span><br><span class="line">   <span class="keyword">for</span> row <span class="keyword">in</span> results:</span><br><span class="line">      fname = row[<span class="number">0</span>]</span><br><span class="line">      lname = row[<span class="number">1</span>]</span><br><span class="line">      age = row[<span class="number">2</span>]</span><br><span class="line">      sex = row[<span class="number">3</span>]</span><br><span class="line">      income = row[<span class="number">4</span>]</span><br><span class="line">       <span class="comment"># 打印结果</span></span><br><span class="line">      <span class="built_in">print</span> (<span class="string">&quot;fname=%s,lname=%s,age=%s,sex=%s,income=%s&quot;</span> % \</span><br><span class="line">             (fname, lname, age, sex, income ))</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;Error: unable to fetch data&quot;</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 关闭数据库连接</span></span><br><span class="line">db.close()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">fname=1,lname=张,age=三,sex=28,income=M</span></span><br><span class="line"><span class="string">fname=2,lname=Mac,age=Mohan,sex=20,income=M</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="数据库更新"><a href="#数据库更新" class="headerlink" title="数据库更新"></a><strong>数据库更新</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用cursor()方法获取操作游标 </span></span><br><span class="line">cursor = db.cursor()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># SQL 更新语句</span></span><br><span class="line">sql = <span class="string">&quot;UPDATE EMPLOYEE SET AGE = AGE + 1 WHERE SEX = &#x27;%c&#x27;&quot;</span> % (<span class="string">&#x27;M&#x27;</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">   <span class="comment"># 执行SQL语句</span></span><br><span class="line">   cursor.execute(sql)</span><br><span class="line">   <span class="comment"># 提交到数据库执行</span></span><br><span class="line">   db.commit()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">   <span class="comment"># 发生错误时回滚</span></span><br><span class="line">   db.rollback()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 关闭数据库连接</span></span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>

<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a><strong>删除</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用cursor()方法获取操作游标 </span></span><br><span class="line">cursor = db.cursor()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># SQL 删除语句</span></span><br><span class="line">sql = <span class="string">&quot;DELETE FROM EMPLOYEE WHERE AGE &gt; %s&quot;</span> % (<span class="number">20</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">   <span class="comment"># 执行SQL语句</span></span><br><span class="line">   cursor.execute(sql)</span><br><span class="line">   <span class="comment"># 提交修改</span></span><br><span class="line">   db.commit()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">   <span class="comment"># 发生错误时回滚</span></span><br><span class="line">   db.rollback()</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 关闭连接</span></span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>

<p><strong><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python3-mysql.html">更多</a></strong></p>
<hr>
<h2 id="网络编程"><a href="#网络编程" class="headerlink" title="网络编程"></a><strong>网络编程</strong></h2><p><strong>Python 提供了两个级别访问的网络服务。：</strong></p>
<ul>
<li><strong>低级别的网络服务支持基本的 Socket，它提供了标准的 BSD Sockets API，可以访问底层操作系统 Socket 接口的全部方法。</strong></li>
<li><strong>高级别的网络服务模块 SocketServer， 它提供了服务器中心类，可以简化网络服务器的开发。</strong></li>
</ul>
<h3 id="什么是-Socket"><a href="#什么是-Socket" class="headerlink" title="什么是 Socket?"></a><strong>什么是 Socket?</strong></h3><p><strong>Socket又称”套接字”，应用程序通常通过”套接字”向网络发出请求或者应答网络请求，使主机间或者一台计算机上的进程间可以通讯。</strong></p>
<h3 id="socket-函数"><a href="#socket-函数" class="headerlink" title="socket()函数"></a><strong><code>socket()</code>函数</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socket.socket([family[, <span class="built_in">type</span>[, proto]]])</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<ul>
<li><strong>family: 套接字家族可以是 AF_UNIX 或者 AF_INET</strong></li>
<li><strong>type: 套接字类型可以根据是面向连接的还是非连接分为<code>SOCK_STREAM</code>或<code>SOCK_DGRAM</code></strong></li>
<li><strong>proto: 一般不填默认为0.</strong></li>
</ul>
<h3 id="Socket-对象-内建-方法"><a href="#Socket-对象-内建-方法" class="headerlink" title="Socket 对象(内建)方法"></a><strong>Socket 对象(内建)方法</strong></h3><table>
<thead>
<tr>
<th align="left"><strong>函数</strong></th>
<th align="left"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>服务器端套接字</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><strong>s.bind()</strong></td>
<td align="left"><strong>绑定地址（host,port）到套接字， 在AF_INET下,以元组（host,port）的形式表示地址。</strong></td>
</tr>
<tr>
<td align="left"><strong>s.listen()</strong></td>
<td align="left"><strong>开始TCP监听。backlog指定在拒绝连接之前，操作系统可以挂起的最大连接数量。该值至少为1，大部分应用程序设为5就可以了。</strong></td>
</tr>
<tr>
<td align="left"><strong>s.accept()</strong></td>
<td align="left"><strong>被动接受TCP客户端连接,(阻塞式)等待连接的到来</strong></td>
</tr>
<tr>
<td align="left"><strong>客户端套接字</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><strong>s.connect()</strong></td>
<td align="left"><strong>主动初始化TCP服务器连接，。一般address的格式为元组（hostname,port），如果连接出错，返回socket.error错误。</strong></td>
</tr>
<tr>
<td align="left"><strong>s.connect_ex()</strong></td>
<td align="left"><strong>connect()函数的扩展版本,出错时返回出错码,而不是抛出异常</strong></td>
</tr>
<tr>
<td align="left"><strong>公共用途的套接字函数</strong></td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><strong>s.recv()</strong></td>
<td align="left"><strong>接收TCP数据，数据以字符串形式返回，bufsize指定要接收的最大数据量。flag提供有关消息的其他信息，通常可以忽略。</strong></td>
</tr>
<tr>
<td align="left"><strong>s.send()</strong></td>
<td align="left"><strong>发送TCP数据，将string中的数据发送到连接的套接字。返回值是要发送的字节数量，该数量可能小于string的字节大小。</strong></td>
</tr>
<tr>
<td align="left"><strong>s.sendall()</strong></td>
<td align="left"><strong>完整发送TCP数据。将string中的数据发送到连接的套接字，但在返回之前会尝试发送所有数据。成功返回None，失败则抛出异常。</strong></td>
</tr>
<tr>
<td align="left"><strong>s.recvfrom()</strong></td>
<td align="left"><strong>接收UDP数据，与recv()类似，但返回值是（data,address）。其中data是包含接收数据的字符串，address是发送数据的套接字地址。</strong></td>
</tr>
<tr>
<td align="left"><strong>s.sendto()</strong></td>
<td align="left"><strong>发送UDP数据，将数据发送到套接字，address是形式为（ipaddr，port）的元组，指定远程地址。返回值是发送的字节数。</strong></td>
</tr>
<tr>
<td align="left"><strong>s.close()</strong></td>
<td align="left"><strong>关闭套接字</strong></td>
</tr>
<tr>
<td align="left"><strong>s.getpeername()</strong></td>
<td align="left"><strong>返回连接套接字的远程地址。返回值通常是元组（ipaddr,port）。</strong></td>
</tr>
<tr>
<td align="left"><strong>s.getsockname()</strong></td>
<td align="left"><strong>返回套接字自己的地址。通常是一个元组(ipaddr,port)</strong></td>
</tr>
<tr>
<td align="left"><strong>s.setsockopt(level,optname,value)</strong></td>
<td align="left"><strong>设置给定套接字选项的值。</strong></td>
</tr>
<tr>
<td align="left"><strong>s.getsockopt(level,optname[.buflen])</strong></td>
<td align="left"><strong>返回套接字选项的值。</strong></td>
</tr>
<tr>
<td align="left"><strong>s.settimeout(timeout)</strong></td>
<td align="left"><strong>设置套接字操作的超时期，timeout是一个浮点数，单位是秒。值为None表示没有超时期。一般，超时期应该在刚创建套接字时设置，因为它们可能用于连接的操作（如connect()）</strong></td>
</tr>
<tr>
<td align="left"><strong>s.gettimeout()</strong></td>
<td align="left"><strong>返回当前超时期的值，单位是秒，如果没有设置超时期，则返回None。</strong></td>
</tr>
<tr>
<td align="left"><strong>s.fileno()</strong></td>
<td align="left"><strong>返回套接字的文件描述符。</strong></td>
</tr>
<tr>
<td align="left"><strong>s.setblocking(flag)</strong></td>
<td align="left"><strong>如果 flag 为 False，则将套接字设为非阻塞模式，否则将套接字设为阻塞模式（默认值）。非阻塞模式下，如果调用 recv() 没有发现任何数据，或 send() 调用无法立即发送数据，那么将引起 socket.error 异常。</strong></td>
</tr>
<tr>
<td align="left"><strong>s.makefile()</strong></td>
<td align="left"><strong>创建一个与该套接字相关连的文件</strong></td>
</tr>
</tbody></table>
<h3 id="简单实例"><a href="#简单实例" class="headerlink" title="简单实例"></a><strong>简单实例</strong></h3><h4 id="服务端-server-py"><a href="#服务端-server-py" class="headerlink" title="服务端 server.py"></a><strong>服务端 server.py</strong></h4><p><strong>使用 socket 模块的 socket 函数来创建一个 socket 对象。</strong></p>
<p><strong>socket 对象可以通过调用其他函数来设置一个 socket 服务。</strong></p>
<p>*<em>通过调用 <code>bind(hostname, port)</code> 函数来指定服务的 <em>port(端口)</em>。</em>*</p>
<p><strong>调用 socket 对象的 <em>accept</em> 方法。该方法等待客户端的连接，并返回 <em>connection</em> 对象，表示已连接到客户端。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入 socket 模块</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建 socket 对象</span></span><br><span class="line">serversocket = socket.socket(</span><br><span class="line">            socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取本地主机名</span></span><br><span class="line">host = <span class="string">&#x27;127.0.0.1&#x27;</span>  <span class="comment"># 本地回环地址 #socket.gethostname()</span></span><br><span class="line"></span><br><span class="line">port = <span class="number">9999</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绑定端口号</span></span><br><span class="line">serversocket.bind((host, port))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始监听（最多允许5个等待连接）</span></span><br><span class="line">serversocket.listen(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;服务器启动，监听 <span class="subst">&#123;host&#125;</span>:<span class="subst">&#123;port&#125;</span>...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 接受客户端连接</span></span><br><span class="line">clientsocket,addr = serversocket.accept()    </span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;客户端 <span class="subst">&#123;addr&#125;</span> 已连接&quot;</span>)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 与客户端通信</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="comment"># 接收数据（最多1024字节）</span></span><br><span class="line">        data = clientsocket.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">            <span class="keyword">break</span>  <span class="comment"># 客户端断开连接</span></span><br><span class="line">        </span><br><span class="line">        message = data.decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;收到消息: <span class="subst">&#123;message&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 回复确认</span></span><br><span class="line">        response = <span class="string">f&quot;已收到: <span class="subst">&#123;message&#125;</span>&quot;</span></span><br><span class="line">        clientsocket.sendall(response.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="comment"># 关闭连接</span></span><br><span class="line">    clientsocket.close()</span><br><span class="line">    serversocket.close()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;服务器已关闭&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="客户端-client-py"><a href="#客户端-client-py" class="headerlink" title="客户端 client.py"></a><strong>客户端 client.py</strong></h4><p><strong>端口号为 9999。</strong></p>
<p><strong>socket.connect(hostname, port ) 方法打开一个 TCP 连接到主机为 <em>hostname</em> 端口为 <em>port</em> 的服务商。</strong></p>
<p><strong>连接后我们就可以从服务端获取数据。</strong></p>
<p><strong>操作完成后需要关闭连接。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入 socket 模块</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建 TCP Socket</span></span><br><span class="line">clientsocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取本地主机名</span></span><br><span class="line">host = <span class="string">&#x27;127.0.0.1&#x27;</span>  <span class="comment"># 服务器地址socket.gethostname()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置端口号</span></span><br><span class="line">port = <span class="number">9999</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接服务，指定主机和端口</span></span><br><span class="line">clientsocket.connect((host, port))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;已连接到服务器 <span class="subst">&#123;host&#125;</span>:<span class="subst">&#123;port&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送消息</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="comment"># 用户输入消息</span></span><br><span class="line">        message = <span class="built_in">input</span>(<span class="string">&quot;发送消息 (输入 &#x27;exit&#x27; 退出): &quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> message.lower() == <span class="string">&#x27;exit&#x27;</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 发送数据</span></span><br><span class="line">        clientsocket.sendall(message.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 接收服务器回复</span></span><br><span class="line">        data = clientsocket.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;服务器回复: <span class="subst">&#123;data.decode(<span class="string">&#x27;utf-8&#x27;</span>)&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    clientsocket.close()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;连接已关闭&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><strong><img src="/blog2025.github.io/image-20250605113943344.png" alt="image-20250605113943344"></strong></p>
<p><strong><img src="/blog2025.github.io/image-20250605113954591.png" alt="image-20250605113954591"></strong></p>
<h3 id="Python-Internet-模块"><a href="#Python-Internet-模块" class="headerlink" title="Python Internet 模块"></a><strong>Python Internet 模块</strong></h3><p><strong>以下列出了 Python 网络编程的一些重要模块：</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>协议</strong></th>
<th align="left"><strong>功能用处</strong></th>
<th align="left"><strong>端口号</strong></th>
<th align="left"><strong>Python 模块</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>HTTP</strong></td>
<td align="left"><strong>网页访问</strong></td>
<td align="left"><strong>80</strong></td>
<td align="left"><strong>httplib, urllib, xmlrpclib</strong></td>
</tr>
<tr>
<td align="left"><strong>NNTP</strong></td>
<td align="left"><strong>阅读和张贴新闻文章，俗称为”帖子”</strong></td>
<td align="left"><strong>119</strong></td>
<td align="left"><strong>nntplib</strong></td>
</tr>
<tr>
<td align="left"><strong>FTP</strong></td>
<td align="left"><strong>文件传输</strong></td>
<td align="left"><strong>20</strong></td>
<td align="left"><strong>ftplib, urllib</strong></td>
</tr>
<tr>
<td align="left"><strong>SMTP</strong></td>
<td align="left"><strong>发送邮件</strong></td>
<td align="left"><strong>25</strong></td>
<td align="left"><strong>smtplib</strong></td>
</tr>
<tr>
<td align="left"><strong>POP3</strong></td>
<td align="left"><strong>接收邮件</strong></td>
<td align="left"><strong>110</strong></td>
<td align="left"><strong>poplib</strong></td>
</tr>
<tr>
<td align="left"><strong>IMAP4</strong></td>
<td align="left"><strong>获取邮件</strong></td>
<td align="left"><strong>143</strong></td>
<td align="left"><strong>imaplib</strong></td>
</tr>
<tr>
<td align="left"><strong>Telnet</strong></td>
<td align="left"><strong>命令行</strong></td>
<td align="left"><strong>23</strong></td>
<td align="left"><strong>telnetlib</strong></td>
</tr>
<tr>
<td align="left"><strong>Gopher</strong></td>
<td align="left"><strong>信息查找</strong></td>
<td align="left"><strong>70</strong></td>
<td align="left"><strong>gopherlib, urllib</strong></td>
</tr>
</tbody></table>
<hr>
<h2 id="SMTP-发送邮件"><a href="#SMTP-发送邮件" class="headerlink" title="SMTP 发送邮件"></a><strong>SMTP 发送邮件</strong></h2><p><strong>SMTP（Simple Mail Transfer Protocol）即简单邮件传输协议，它是一组用于由源地址到目的地址传送邮件的规则，由它来控制信件的中转方式。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"></span><br><span class="line">smtpObj = smtplib.SMTP( [host [, port [, local_hostname]]] )</span><br></pre></td></tr></table></figure>

<p><strong>参数说明：</strong></p>
<ul>
<li><strong><code>host</code>: SMTP 服务器主机。 你可以指定主机的 ip 地址或者域名如:runoob.com，这个是可选参数。</strong></li>
<li><strong><code>port</code>: 如果你提供了 host 参数, 你需要指定 SMTP 服务使用的端口号，一般情况下SMTP端口号为25。</strong></li>
<li><strong><code>local_hostname</code>: 如果SMTP在你的本机上，你只需要指定服务器地址为 localhost 即可。</strong></li>
</ul>
<p><strong><em>Python</em> SMTP对象使用 <code>sendmail()</code> 方法发送邮件，语法如下：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SMTP.sendmail(from_addr, to_addrs, msg[, mail_options, rcpt_options]</span><br></pre></td></tr></table></figure>

<p><strong>参数说明：</strong></p>
<ul>
<li><strong><code>from_addr</code>: 邮件发送者地址。</strong></li>
<li><strong><code>to_addrs</code>: 字符串列表，邮件发送地址。</strong></li>
<li><strong><code>msg</code>: 发送消息</strong></li>
</ul>
<h3 id="发送邮件示例：（163邮箱）"><a href="#发送邮件示例：（163邮箱）" class="headerlink" title="发送邮件示例：（163邮箱）"></a><strong>发送邮件示例：（163邮箱）</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.utils <span class="keyword">import</span> formataddr  <span class="comment"># 替代Header</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三方 SMTP 服务</span></span><br><span class="line">mail_host = <span class="string">&quot;smtp.163.com&quot;</span>	<span class="comment">#设置服务器</span></span><br><span class="line">mail_port = <span class="number">465</span></span><br><span class="line">mail_user = <span class="string">&quot;发送方（授权码归属的）邮箱&quot;</span></span><br><span class="line">mail_pass = <span class="string">&quot;授权码&quot;</span></span><br><span class="line"></span><br><span class="line">sender = mail_user			<span class="comment">#发件人(sender)邮箱地址</span></span><br><span class="line">receivers = [<span class="string">&#x27;接收方邮箱&#x27;</span>]	<span class="comment"># 收件人(receivers)邮箱地址</span></span><br><span class="line"></span><br><span class="line">message = MIMEText(<span class="string">&#x27;Python 邮件发送测试...&#x27;</span>, <span class="string">&#x27;plain&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用formataddr正确格式化</span></span><br><span class="line">message[<span class="string">&#x27;From&#x27;</span>] = formataddr((<span class="string">&quot;发送者&quot;</span>, mail_user))</span><br><span class="line">message[<span class="string">&#x27;To&#x27;</span>] = formataddr((<span class="string">&quot;接收者&quot;</span>, receivers[<span class="number">0</span>]))</span><br><span class="line">message[<span class="string">&#x27;Subject&#x27;</span>] = <span class="string">&#x27;Python SMTP 邮件测试&#x27;</span>  <span class="comment"># 主题可以直接用字符串</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># 创建SMTP对象连接到第三方服务器</span></span><br><span class="line">    smtpObj = smtplib.SMTP_SSL(mail_host, mail_port)</span><br><span class="line">    smtpObj.login(mail_user,mail_pass)</span><br><span class="line">    <span class="comment"># 调用sendmail()方法发送邮件</span></span><br><span class="line">    smtpObj.sendmail(sender, receivers, message.as_string())</span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&quot;邮件发送成功&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;发送失败: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    smtpObj.quit()</span><br></pre></td></tr></table></figure>

<p><strong><img src="/blog2025.github.io/2025/05/29/Python/%E6%8E%88%E6%9D%83%E7%A0%81.png" alt="image-20250607105506160"></strong></p>
<hr>
<h3 id="标准示例：HTML、附件、图片"><a href="#标准示例：HTML、附件、图片" class="headerlink" title="标准示例：HTML、附件、图片"></a><strong>标准示例：HTML、附件、图片</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> email.mime.multipart <span class="keyword">import</span> MIMEMultipart</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.mime.image <span class="keyword">import</span> MIMEImage</span><br><span class="line"><span class="keyword">from</span> email.mime.application <span class="keyword">import</span> MIMEApplication</span><br><span class="line"><span class="keyword">from</span> email.utils <span class="keyword">import</span> formataddr</span><br><span class="line"></span><br><span class="line"><span class="comment"># ======================= 配置区 =======================</span></span><br><span class="line">SMTP_SERVER = <span class="string">&quot;smtp.163.com&quot;</span></span><br><span class="line">SMTP_PORT = <span class="number">465</span></span><br><span class="line">EMAIL_USER = <span class="string">&quot;l2307526822@163.com&quot;</span></span><br><span class="line">EMAIL_PASSWORD = <span class="string">&quot;HNR4v36SNB5kabyq&quot;</span>  <span class="comment"># 使用授权码而非登录密码</span></span><br><span class="line"></span><br><span class="line">RECEIVERS = [<span class="string">&quot;2307526822@qq.com&quot;</span>]</span><br><span class="line">SUBJECT = <span class="string">&quot;带附件和图片的HTML邮件测试&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 图片和附件配置</span></span><br><span class="line">IMAGE_FILE = <span class="string">&quot;SMTP/email_image.png&quot;</span>  <span class="comment"># 确保此文件存在</span></span><br><span class="line">ATTACHMENT_FILE = <span class="string">&quot;SMTP/sample_document.pdf&quot;</span>  <span class="comment"># 确保此文件存在</span></span><br><span class="line"><span class="comment"># =====================================================</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">send_email</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;发送带附件和图片的HTML邮件&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 创建邮件主体</span></span><br><span class="line">    msg = MIMEMultipart()</span><br><span class="line">    msg[<span class="string">&quot;Subject&quot;</span>] = SUBJECT</span><br><span class="line">    msg[<span class="string">&quot;From&quot;</span>] = formataddr((<span class="string">&quot;Python邮件系统&quot;</span>, EMAIL_USER))</span><br><span class="line">    msg[<span class="string">&quot;To&quot;</span>] = <span class="string">&quot;, &quot;</span>.join(RECEIVERS)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 创建HTML内容（包含图片占位符）</span></span><br><span class="line">    html_content = <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    &lt;html&gt;</span></span><br><span class="line"><span class="string">    &lt;body style=&quot;font-family: Arial, sans-serif; max-width: 600px; margin: auto;&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div style=&quot;background: #f8f9fa; padding: 20px; border-radius: 10px;&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;h1 style=&quot;color: #2c3e50;&quot;&gt;带图片和附件的HTML邮件&lt;/h1&gt;</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">            &lt;p&gt;这是一封使用Python发送的测试邮件，包含以下内容：&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;ul&gt;</span></span><br><span class="line"><span class="string">                &lt;li&gt;HTML格式的正文&lt;/li&gt;</span></span><br><span class="line"><span class="string">                &lt;li&gt;内嵌图片展示&lt;/li&gt;</span></span><br><span class="line"><span class="string">                &lt;li&gt;文件附件&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;/ul&gt;</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">            &lt;div style=&quot;text-align: center; margin: 20px 0;&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;h3&gt;内嵌图片示例：&lt;/h3&gt;</span></span><br><span class="line"><span class="string">                &lt;!-- 图片通过CID嵌入 --&gt;</span></span><br><span class="line"><span class="string">                &lt;img src=&quot;cid:email_image&quot; alt=&quot;示例图片&quot; style=&quot;max-width: 90%; border: 1px solid #ddd; padding: 5px;&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;p&gt;&lt;em&gt;图片已嵌入邮件中，无需单独下载&lt;/em&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">            &lt;p&gt;邮件中还包含了一个PDF文件作为附件，请查收。&lt;/p&gt;</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">            &lt;div style=&quot;margin-top: 30px; padding-top: 15px; border-top: 1px solid #eee; color: #777;&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;p&gt;发送时间: 2025-06-07&lt;/p&gt;</span></span><br><span class="line"><span class="string">                &lt;p&gt;发件人: Python邮件系统 &amp;lt;<span class="subst">&#123;EMAIL_USER&#125;</span>&amp;gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">                &lt;p&gt;收件人: <span class="subst">&#123;<span class="string">&quot;, &quot;</span>.join(RECEIVERS)&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">    &lt;/html&gt;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 添加HTML内容</span></span><br><span class="line">    msg.attach(MIMEText(html_content, <span class="string">&quot;html&quot;</span>, <span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 添加内嵌图片</span></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(IMAGE_FILE):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(IMAGE_FILE, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> img_file:</span><br><span class="line">            img = MIMEImage(img_file.read(), name=os.path.basename(IMAGE_FILE))</span><br><span class="line">            img.add_header(<span class="string">&quot;Content-ID&quot;</span>, <span class="string">&quot;&lt;email_image&gt;&quot;</span>)  <span class="comment"># 匹配HTML中的cid</span></span><br><span class="line">            msg.attach(img)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;警告: 图片文件 <span class="subst">&#123;IMAGE_FILE&#125;</span> 不存在，邮件中图片将无法显示&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 添加附件</span></span><br><span class="line">    <span class="keyword">if</span> os.path.exists(ATTACHMENT_FILE):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(ATTACHMENT_FILE, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> attachment:</span><br><span class="line">            part = MIMEApplication(attachment.read(), Name=os.path.basename(ATTACHMENT_FILE))</span><br><span class="line">            part[<span class="string">&quot;Content-Disposition&quot;</span>] = <span class="string">f&#x27;attachment; filename=&quot;<span class="subst">&#123;os.path.basename(ATTACHMENT_FILE)&#125;</span>&quot;&#x27;</span></span><br><span class="line">            msg.attach(part)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;警告: 附件文件 <span class="subst">&#123;ATTACHMENT_FILE&#125;</span> 不存在&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 发送邮件</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> smtplib.SMTP_SSL(SMTP_SERVER, SMTP_PORT) <span class="keyword">as</span> server:</span><br><span class="line">            server.login(EMAIL_USER, EMAIL_PASSWORD)</span><br><span class="line">            server.sendmail(EMAIL_USER, RECEIVERS, msg.as_string())</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;邮件发送成功！请检查收件箱（包括垃圾邮件文件夹）&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;邮件发送失败: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># 检查必要文件</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(IMAGE_FILE):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;提示: 请创建图片文件 <span class="subst">&#123;IMAGE_FILE&#125;</span> 或在代码中修改路径&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(ATTACHMENT_FILE):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;提示: 请创建附件文件 <span class="subst">&#123;ATTACHMENT_FILE&#125;</span> 或在代码中修改路径&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 发送邮件</span></span><br><span class="line">    send_email()</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a><strong>多线程</strong></h2><p><strong>线程可以分为:</strong></p>
<ul>
<li><strong>内核线程：由操作系统内核创建和撤销。</strong></li>
<li><strong>用户线程：不需要内核支持而在用户程序中实现的线程。</strong></li>
</ul>
<p><strong>Python3 线程中常用的两个模块为：</strong></p>
<ul>
<li><strong>_thread：只能用函数式</strong></li>
<li><strong>threading(推荐使用)：可以用函数式或类式</strong></li>
</ul>
<p><strong>thread 模块已被废弃。用户可以使用 threading 模块代替。所以，在 Python3 中不能再使用”thread” 模块。为了兼容性，Python3 将 thread 重命名为 “_thread”。</strong></p>
<hr>
<p><strong>Python中使用线程有两种方式：用函数或者用类来包装线程对象。</strong></p>
<h3 id="函数式："><a href="#函数式：" class="headerlink" title="函数式："></a><strong>函数式：</strong></h3><ul>
<li><p><strong><code>_thread</code>：</strong></p>
<p><strong>调用 _thread 模块中的<code>start_new_thread()</code>函数来产生新线程。语法如下:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_thread.start_new_thread ( function, args[, kwargs] )</span><br></pre></td></tr></table></figure>

<p><strong>参数说明:</strong></p>
<ul>
<li><strong>function - 线程函数。</strong></li>
<li><strong>args - 传递给线程函数的参数,他必须是个tuple类型。</strong></li>
<li><strong>kwargs - 可选参数。</strong></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _thread</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为线程定义一个函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_time</span>(<span class="params"> threadName, delay</span>):</span><br><span class="line">   count = <span class="number">0</span></span><br><span class="line">   <span class="keyword">while</span> count &lt; <span class="number">5</span>:</span><br><span class="line">      time.sleep(delay)</span><br><span class="line">      count += <span class="number">1</span></span><br><span class="line">      <span class="built_in">print</span> (<span class="string">&quot;%s: %s&quot;</span> % ( threadName, time.ctime(time.time()) ))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建两个线程</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">   _thread.start_new_thread( print_time, (<span class="string">&quot;Thread-1&quot;</span>, <span class="number">2</span>, ) )</span><br><span class="line">   _thread.start_new_thread( print_time, (<span class="string">&quot;Thread-2&quot;</span>, <span class="number">4</span>, ) )</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;Error: 无法启动线程&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 主线程等待</span></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">   <span class="keyword">pass</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">Thread-1: Sat Jun  7 11:40:39 2025</span></span><br><span class="line"><span class="string">Thread-2: Sat Jun  7 11:40:41 2025</span></span><br><span class="line"><span class="string">Thread-1: Sat Jun  7 11:40:41 2025</span></span><br><span class="line"><span class="string">Thread-1: Sat Jun  7 11:40:43 2025</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>定义线程函数</strong></p>
<ul>
<li><strong><code>print_time</code>：这是一个线程函数，它接受两个参数：<code>threadName</code>（线程名称）和<code>delay</code>（延迟时间，以秒为单位）。</strong></li>
<li><strong>在循环中，线程每次暂停指定的延迟时间，然后打印当前时间和线程名称。</strong></li>
<li><strong>循环执行5次后，线程函数结束。</strong></li>
</ul>
<p><strong>创建线程</strong></p>
<ul>
<li><strong>使用<code>_thread.start_new_thread()</code>函数创建并启动新线程。</strong></li>
<li><strong>第一个参数是线程函数（<code>print_time</code>）。</strong></li>
<li><strong>第二个参数是传递给线程函数的参数元组。注意，即使只有一个参数，也需要将其放在元组中（这里是<code>(&quot;Thread-1&quot;, 2, )</code>和<code>(&quot;Thread-2&quot;, 4, )</code>）。</strong></li>
<li><strong>如果线程启动失败，将捕获异常并打印错误信息。</strong></li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><p><strong><code>threading</code>：</strong></p>
<p><strong>以下是 <code>threading.Thread</code> 类的构造函数参数、方法和属性的详细说明表格：</strong></p>
<h4 id="构造函数参数"><a href="#构造函数参数" class="headerlink" title="构造函数参数"></a><strong>构造函数参数</strong></h4><p><strong><code>__init__(self, group=None, target=None, name=None, args=(), kwargs=&#123;&#125;, *, daemon=None)</code></strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>参数</strong></th>
<th align="left"><strong>类型</strong></th>
<th align="left"><strong>默认值</strong></th>
<th align="left"><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong><code>group</code></strong></td>
<td align="left"><strong><code>None</code></strong></td>
<td align="left"><strong><code>None</code></strong></td>
<td align="left"><strong>保留参数，用于未来扩展（当前未使用）</strong></td>
</tr>
<tr>
<td align="left"><strong><code>target</code></strong></td>
<td align="left"><strong><code>Callable</code></strong></td>
<td align="left"><strong><code>None</code></strong></td>
<td align="left"><strong>线程要执行的目标函数</strong></td>
</tr>
<tr>
<td align="left"><strong><code>name</code></strong></td>
<td align="left"><strong><code>str</code></strong></td>
<td align="left"><strong><code>&quot;Thread-N&quot;</code></strong></td>
<td align="left"><strong>线程名称（自动生成如 Thread-1, Thread-2）</strong></td>
</tr>
<tr>
<td align="left"><strong><code>args</code></strong></td>
<td align="left"><strong><code>tuple</code></strong></td>
<td align="left"><strong><code>()</code></strong></td>
<td align="left"><strong>传递给目标函数的位置参数元组</strong></td>
</tr>
<tr>
<td align="left"><strong><code>kwargs</code></strong></td>
<td align="left"><strong><code>dict</code></strong></td>
<td align="left"><strong><code>&#123;&#125;</code></strong></td>
<td align="left"><strong>传递给目标函数的关键字参数字典</strong></td>
</tr>
<tr>
<td align="left"><strong><code>daemon</code></strong></td>
<td align="left"><strong><code>bool</code></strong></td>
<td align="left"><strong><code>None</code></strong></td>
<td align="left"><strong>守护线程标志： - <code>True</code>：守护线程 - <code>False</code>：用户线程 - <code>None</code>：继承创建者线程的守护状态</strong></td>
</tr>
</tbody></table>
<h4 id="核心方法"><a href="#核心方法" class="headerlink" title="核心方法"></a><strong>核心方法</strong></h4><table>
<thead>
<tr>
<th align="left"><strong>方法</strong></th>
<th align="left"><strong>参数</strong></th>
<th align="left"><strong>返回值</strong></th>
<th align="left"><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong><code>start()</code></strong></td>
<td align="left"><strong>无</strong></td>
<td align="left"><strong>无</strong></td>
<td align="left"><strong>启动线程活动，触发 <code>run()</code> 方法执行</strong></td>
</tr>
<tr>
<td align="left"><strong><code>run()</code></strong></td>
<td align="left"><strong>无</strong></td>
<td align="left"><strong>无</strong></td>
<td align="left"><strong>定义线程功能的入口点 （子类应重写此方法）</strong></td>
</tr>
<tr>
<td align="left"><strong><code>join(timeout=None)</code></strong></td>
<td align="left"><strong><code>timeout: float</code></strong></td>
<td align="left"><strong>无</strong></td>
<td align="left"><strong>阻塞调用线程直到本线程终止 <code>timeout</code>：最大等待秒数（超时后继续执行）</strong></td>
</tr>
<tr>
<td align="left"><strong><code>is_alive()</code></strong></td>
<td align="left"><strong>无</strong></td>
<td align="left"><strong><code>bool</code></strong></td>
<td align="left"><strong>线程是否在运行： - <code>True</code>：已启动且未终止 - <code>False</code>：未启动或已终止</strong></td>
</tr>
<tr>
<td align="left"><strong><code>getName()</code></strong></td>
<td align="left"><strong>无</strong></td>
<td align="left"><strong><code>str</code></strong></td>
<td align="left"><strong>获取线程名称（等价于 <code>name</code> 属性）</strong></td>
</tr>
<tr>
<td align="left"><strong><code>setName(name)</code></strong></td>
<td align="left"><strong><code>name: str</code></strong></td>
<td align="left"><strong>无</strong></td>
<td align="left"><strong>设置线程名称（等价于 <code>name</code> 属性）</strong></td>
</tr>
<tr>
<td align="left"><strong><code>isDaemon()</code></strong></td>
<td align="left"><strong>无</strong></td>
<td align="left"><strong><code>bool</code></strong></td>
<td align="left"><strong>获取守护状态（等价于 <code>daemon</code> 属性）</strong></td>
</tr>
<tr>
<td align="left"><strong><code>setDaemon(daemonic)</code></strong></td>
<td align="left"><strong><code>daemonic: bool</code></strong></td>
<td align="left"><strong>无</strong></td>
<td align="left"><strong>设置守护状态（等价于 <code>daemon</code> 属性）</strong></td>
</tr>
</tbody></table>
<h4 id="关键属性"><a href="#关键属性" class="headerlink" title="关键属性"></a><strong>关键属性</strong></h4><table>
<thead>
<tr>
<th align="left"><strong>属性</strong></th>
<th align="left"><strong>类型</strong></th>
<th align="left"><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong><code>ident</code></strong></td>
<td align="left"><strong><code>int</code> 或 <code>None</code></strong></td>
<td align="left"><strong>线程的唯一标识符： - 线程启动后：系统分配的整数 ID - 线程未启动：<code>None</code></strong></td>
</tr>
<tr>
<td align="left"><strong><code>name</code></strong></td>
<td align="left"><strong><code>str</code></strong></td>
<td align="left"><strong>线程名称（可通过 <code>setName()</code> 修改）</strong></td>
</tr>
<tr>
<td align="left"><strong><code>daemon</code></strong></td>
<td align="left"><strong><code>bool</code></strong></td>
<td align="left"><strong>守护线程标志： - <code>True</code>：主线程退出时自动终止 - <code>False</code>：主线程需等待所有用户线程完成</strong></td>
</tr>
<tr>
<td align="left"><strong><code>native_id</code></strong></td>
<td align="left"><strong><code>int</code></strong></td>
<td align="left"><strong>内核分配的原生线程 ID（Python 3.8+）</strong></td>
</tr>
<tr>
<td align="left"><strong><code>is_alive()</code></strong></td>
<td align="left"><strong><code>bool</code></strong></td>
<td align="left"><strong>线程活动状态（方法形式）</strong></td>
</tr>
</tbody></table>
<p><strong>threading 模块除了包含 _thread 模块中的所有方法外，还提供的其他方法：</strong></p>
<ul>
<li><p><strong><code>threading.current_thread()</code>: 返回当前的线程变量。</strong></p>
</li>
<li><p><strong><code>threading.enumerate()</code>:</strong> </p>
<p><strong>返回一个包含正在运行的线程的列表。正在运行指线程启动后、结束前，不包括启动前和终止后的线程。</strong></p>
</li>
<li><p><strong><code>threading.active_count()</code>:</strong> </p>
<p><strong>返回正在运行的线程数量，与 len(threading.enumerate()) 有相同的结果。</strong></p>
</li>
<li><p><strong><code>threading.Thread(target, args=(), kwargs=&#123;&#125;, daemon=None)</code>：</strong></p>
<ul>
<li><strong>创建<code>Thread</code>类的实例。</strong></li>
<li><strong><code>target</code>：线程将要执行的目标函数。</strong></li>
<li><strong><code>args</code>：目标函数的参数，以元组形式传递。</strong></li>
<li><strong><code>kwargs</code>：目标函数的关键字参数，以字典形式传递。</strong></li>
<li><strong><code>daemon</code>：指定线程是否为守护线程。</strong></li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">print_time</span>(<span class="params">thread_name, delay</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;线程执行函数&quot;&quot;&quot;</span></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> count &lt; <span class="number">5</span>:</span><br><span class="line">        time.sleep(delay)</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;thread_name&#125;</span>: <span class="subst">&#123;time.ctime(time.time())&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line"><span class="comment"># 创建线程对象</span></span><br><span class="line"><span class="comment"># target: 指定线程要执行的函数</span></span><br><span class="line"><span class="comment"># args: 传递给目标函数的参数元组</span></span><br><span class="line">    t1 = threading.Thread(target=print_time, args=(<span class="string">&quot;Thread-1&quot;</span>, <span class="number">2</span>))</span><br><span class="line">    t2 = threading.Thread(target=print_time, args=(<span class="string">&quot;Thread-2&quot;</span>, <span class="number">4</span>))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 启动线程</span></span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 等待线程结束</span></span><br><span class="line">    t1.join()</span><br><span class="line">    t2.join()</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;所有线程执行完毕&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="类式："><a href="#类式：" class="headerlink" title="类式："></a><strong>类式：</strong></h3><ul>
<li><p><strong><code>threading</code>：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义线程类，继承 threading.Thread</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PrintTimeThread</span>(threading.Thread):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, threadName, delay</span>):</span><br><span class="line">        <span class="comment"># 调用父类构造函数</span></span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        <span class="comment"># 初始化实例变量</span></span><br><span class="line">        <span class="variable language_">self</span>.threadName = threadName</span><br><span class="line">        <span class="variable language_">self</span>.delay = delay</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 重写 run() 方法 - 线程启动后执行的实际任务</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;线程 <span class="subst">&#123;self.threadName&#125;</span> 启动&quot;</span>)</span><br><span class="line">        count = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> count &lt; <span class="number">5</span>:</span><br><span class="line">            time.sleep(<span class="variable language_">self</span>.delay)  <span class="comment"># 按指定延迟暂停</span></span><br><span class="line">            count += <span class="number">1</span></span><br><span class="line">            <span class="comment"># 打印线程名和当前格式化时间</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.threadName&#125;</span>: <span class="subst">&#123;time.ctime(time.time())&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;线程 <span class="subst">&#123;self.threadName&#125;</span> 结束&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建线程实例</span></span><br><span class="line">thread1 = PrintTimeThread(<span class="string">&quot;Thread-1&quot;</span>, <span class="number">2</span>)</span><br><span class="line">thread2 = PrintTimeThread(<span class="string">&quot;Thread-2&quot;</span>, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动线程</span></span><br><span class="line">thread1.start()</span><br><span class="line">thread2.start()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 主线程等待子线程完成</span></span><br><span class="line">thread1.join()</span><br><span class="line">thread2.join()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;所有线程执行完毕&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="类式-vs-函数式创建线程对比："><a href="#类式-vs-函数式创建线程对比：" class="headerlink" title="类式 vs 函数式创建线程对比："></a><strong>类式 vs 函数式创建线程对比：</strong></h3><table>
<thead>
<tr>
<th align="left"><strong>特性</strong></th>
<th align="left"><strong>类式创建</strong></th>
<th align="left"><strong>函数式创建</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>代码组织</strong></td>
<td align="left"><strong>面向对象，封装相关状态和行为</strong></td>
<td align="left"><strong>简单函数，适合简单任务</strong></td>
</tr>
<tr>
<td align="left"><strong>状态管理</strong></td>
<td align="left"><strong>通过实例变量维护状态</strong></td>
<td align="left"><strong>通过函数参数传递状态</strong></td>
</tr>
<tr>
<td align="left"><strong>扩展性</strong></td>
<td align="left"><strong>易于扩展（可添加额外方法&#x2F;属性）</strong></td>
<td align="left"><strong>功能扩展有限</strong></td>
</tr>
<tr>
<td align="left"><strong>复用性</strong></td>
<td align="left"><strong>高（可创建多个相同配置的线程）</strong></td>
<td align="left"><strong>中（依赖外部函数）</strong></td>
</tr>
<tr>
<td align="left"><strong>复杂度</strong></td>
<td align="left"><strong>稍高（需要理解 OOP 概念）</strong></td>
<td align="left"><strong>低（简单直接）</strong></td>
</tr>
<tr>
<td align="left"><strong>适用场景</strong></td>
<td align="left"><strong>复杂线程逻辑&#x2F;需要维护状态的任务</strong></td>
<td align="left"><strong>简单任务&#x2F;一次性执行</strong></td>
</tr>
</tbody></table>
<hr>
<h3 id="线程同步"><a href="#线程同步" class="headerlink" title="线程同步"></a><strong>线程同步</strong></h3><p><strong>使用 Thread 对象的 <code>Lock</code> 和 <code>Rlock</code> 可以实现简单的线程同步，这两个对象都有 <code>acquire</code> 方法和 <code>release</code> 方法。</strong></p>
<p><strong>在多线程编程中，线程同步是确保多个线程协调工作、避免资源冲突的关键技术。Python的<code>threading</code>模块提供了多种同步机制：</strong></p>
<h4 id="同步机制概览"><a href="#同步机制概览" class="headerlink" title="同步机制概览"></a><strong>同步机制概览</strong></h4><table>
<thead>
<tr>
<th align="left"><strong>同步原语</strong></th>
<th align="left"><strong>描述</strong></th>
<th align="left"><strong>主要方法</strong></th>
<th align="left"><strong>适用场景</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>Lock</strong></td>
<td align="left"><strong>基本互斥锁</strong></td>
<td align="left"><strong><code>acquire()</code>, <code>release()</code></strong></td>
<td align="left"><strong>简单互斥访问</strong></td>
</tr>
<tr>
<td align="left"><strong>RLock</strong></td>
<td align="left"><strong>可重入锁</strong></td>
<td align="left"><strong><code>acquire()</code>, <code>release()</code></strong></td>
<td align="left"><strong>嵌套锁需求</strong></td>
</tr>
<tr>
<td align="left"><strong>Semaphore</strong></td>
<td align="left"><strong>信号量</strong></td>
<td align="left"><strong><code>acquire()</code>, <code>release()</code></strong></td>
<td align="left"><strong>限制并发数量</strong></td>
</tr>
<tr>
<td align="left"><strong>Event</strong></td>
<td align="left"><strong>事件通知</strong></td>
<td align="left"><strong><code>set()</code>, <code>clear()</code>, <code>wait()</code></strong></td>
<td align="left"><strong>线程间通知</strong></td>
</tr>
<tr>
<td align="left"><strong>Condition</strong></td>
<td align="left"><strong>条件变量</strong></td>
<td align="left"><strong><code>wait()</code>, <code>notify()</code>, <code>notify_all()</code></strong></td>
<td align="left"><strong>生产者-消费者模式</strong></td>
</tr>
<tr>
<td align="left"><strong>Barrier</strong></td>
<td align="left"><strong>屏障</strong></td>
<td align="left"><strong><code>wait()</code></strong></td>
<td align="left"><strong>多线程同步点</strong></td>
</tr>
</tbody></table>
<p><strong>下面详细介绍每种同步机制：</strong></p>
<ul>
<li><p><strong>Lock（互斥锁）</strong></p>
<p><strong>最基本的同步机制，确保一次只有一个线程访问共享资源。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 共享资源</span></span><br><span class="line">counter = <span class="number">0</span></span><br><span class="line">lock = threading.Lock()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">increment</span>():</span><br><span class="line">    <span class="keyword">global</span> counter</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100000</span>):</span><br><span class="line">        lock.acquire()  <span class="comment"># 获取锁</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            counter += <span class="number">1</span></span><br><span class="line">        <span class="keyword">finally</span>:</span><br><span class="line">            lock.release()  <span class="comment"># 确保锁被释放</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建线程</span></span><br><span class="line">threads = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    t = threading.Thread(target=increment)</span><br><span class="line">    threads.append(t)</span><br><span class="line">    t.start()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待所有线程完成</span></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> threads:</span><br><span class="line">    t.join()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;最终计数器值: <span class="subst">&#123;counter&#125;</span>&quot;</span>)  <span class="comment"># 正确应为 500000</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>RLock（可重入锁）</strong></p>
<p><strong>允许同一个线程多次获取锁，避免死锁。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">rlock = threading.RLock()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">recursive_func</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n &lt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">with</span> rlock:  <span class="comment"># 使用上下文管理器自动获取/释放锁</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;递归层级: <span class="subst">&#123;n&#125;</span>&quot;</span>)</span><br><span class="line">        recursive_func(n - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建线程</span></span><br><span class="line">t = threading.Thread(target=recursive_func, args=(<span class="number">3</span>,))</span><br><span class="line">t.start()</span><br><span class="line">t.join()</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Semaphore（信号量）</strong></p>
<p><strong>控制同时访问共享资源的线程数量。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 限制同时访问的线程数为3</span></span><br><span class="line">semaphore = threading.Semaphore(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">limited_access</span>(<span class="params">thread_id</span>):</span><br><span class="line">    <span class="keyword">with</span> semaphore:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;线程 <span class="subst">&#123;thread_id&#125;</span> 获得访问&quot;</span>)</span><br><span class="line">        time.sleep(<span class="number">2</span>)  <span class="comment"># 模拟工作</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;线程 <span class="subst">&#123;thread_id&#125;</span> 释放访问&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建10个线程</span></span><br><span class="line">threads = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    t = threading.Thread(target=limited_access, args=(i,))</span><br><span class="line">    threads.append(t)</span><br><span class="line">    t.start()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> threads:</span><br><span class="line">    t.join()</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Event（事件）</strong></p>
<p><strong>线程间通信机制，用于通知事件发生。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建事件对象</span></span><br><span class="line">event = threading.Event()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">waiter</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;等待者: 等待事件...&quot;</span>)</span><br><span class="line">    event.wait()  <span class="comment"># 阻塞直到事件被设置</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;等待者: 事件发生，继续执行!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">setter</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;设置者: 正在处理...&quot;</span>)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;设置者: 设置事件!&quot;</span>)</span><br><span class="line">    event.<span class="built_in">set</span>()  <span class="comment"># 设置事件，唤醒所有等待的线程</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建线程</span></span><br><span class="line">t1 = threading.Thread(target=waiter)</span><br><span class="line">t2 = threading.Thread(target=waiter)</span><br><span class="line">t3 = threading.Thread(target=setter)</span><br><span class="line"></span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line">t3.start()</span><br><span class="line"></span><br><span class="line">t1.join()</span><br><span class="line">t2.join()</span><br><span class="line">t3.join()</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Condition（条件变量）</strong></p>
<p><strong>用于复杂的线程同步场景，如生产者-消费者模式。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="comment"># 共享队列</span></span><br><span class="line">queue = []</span><br><span class="line">MAX_ITEMS = <span class="number">5</span></span><br><span class="line">condition = threading.Condition()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">producer</span>():</span><br><span class="line">    <span class="keyword">global</span> queue</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        time.sleep(random.random())</span><br><span class="line">        <span class="keyword">with</span> condition:</span><br><span class="line">            <span class="comment"># 如果队列满，等待消费者消费</span></span><br><span class="line">            <span class="keyword">while</span> <span class="built_in">len</span>(queue) &gt;= MAX_ITEMS:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;队列满，生产者等待...&quot;</span>)</span><br><span class="line">                condition.wait()</span><br><span class="line">            </span><br><span class="line">            item = <span class="string">f&quot;产品-<span class="subst">&#123;i&#125;</span>&quot;</span></span><br><span class="line">            queue.append(item)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;生产: <span class="subst">&#123;item&#125;</span>&quot;</span>)</span><br><span class="line">            condition.notify_all()  <span class="comment"># 通知消费者</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">consumer</span>():</span><br><span class="line">    <span class="keyword">global</span> queue</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">        time.sleep(random.random() * <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">with</span> condition:</span><br><span class="line">            <span class="comment"># 如果队列空，等待生产者生产</span></span><br><span class="line">            <span class="keyword">while</span> <span class="built_in">len</span>(queue) == <span class="number">0</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;队列空，消费者等待...&quot;</span>)</span><br><span class="line">                condition.wait()</span><br><span class="line">            </span><br><span class="line">            item = queue.pop(<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;消费: <span class="subst">&#123;item&#125;</span>&quot;</span>)</span><br><span class="line">            condition.notify_all()  <span class="comment"># 通知生产者</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建生产者和消费者线程</span></span><br><span class="line">producers = [threading.Thread(target=producer) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>)]</span><br><span class="line">consumers = [threading.Thread(target=consumer) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动线程</span></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> producers + consumers:</span><br><span class="line">    t.start()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待所有线程完成</span></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> producers + consumers:</span><br><span class="line">    t.join()</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Barrier（屏障）</strong></p>
<p><strong>使多个线程在某个点同步等待。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建屏障，等待4个线程</span></span><br><span class="line">barrier = threading.Barrier(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">worker</span>(<span class="params">worker_id</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;工人 <span class="subst">&#123;worker_id&#125;</span> 开始工作&quot;</span>)</span><br><span class="line">    time.sleep(worker_id)  <span class="comment"># 模拟不同长度的工作</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;工人 <span class="subst">&#123;worker_id&#125;</span> 完成工作，等待其他人&quot;</span>)</span><br><span class="line">    barrier.wait()  <span class="comment"># 等待所有线程到达此点</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;工人 <span class="subst">&#123;worker_id&#125;</span> 继续后续工作&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建4个工作线程</span></span><br><span class="line">threads = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">4</span>):</span><br><span class="line">    t = threading.Thread(target=worker, args=(i,))</span><br><span class="line">    threads.append(t)</span><br><span class="line">    t.start()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 等待所有线程完成</span></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> threads:</span><br><span class="line">    t.join()</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="避免死锁示例：使用锁超时"><a href="#避免死锁示例：使用锁超时" class="headerlink" title="避免死锁示例：使用锁超时"></a><strong>避免死锁示例：使用锁超时</strong></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 避免死锁示例：使用锁超时</span></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"></span><br><span class="line">lock1 = threading.Lock()</span><br><span class="line">lock2 = threading.Lock()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task1</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> lock1.acquire(timeout=<span class="number">0.5</span>):  <span class="comment"># 设置超时</span></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;任务1 获取锁1&quot;</span>)</span><br><span class="line">                time.sleep(<span class="number">0.1</span>)</span><br><span class="line">                <span class="keyword">if</span> lock2.acquire(timeout=<span class="number">0.5</span>):</span><br><span class="line">                    <span class="keyword">try</span>:</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">&quot;任务1 获取锁2&quot;</span>)</span><br><span class="line">                    <span class="keyword">finally</span>:</span><br><span class="line">                        lock2.release()</span><br><span class="line">            <span class="keyword">finally</span>:</span><br><span class="line">                lock1.release()</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">task2</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">if</span> lock2.acquire(timeout=<span class="number">0.5</span>):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;任务2 获取锁2&quot;</span>)</span><br><span class="line">                time.sleep(<span class="number">0.1</span>)</span><br><span class="line">                <span class="keyword">if</span> lock1.acquire(timeout=<span class="number">0.5</span>):</span><br><span class="line">                    <span class="keyword">try</span>:</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">&quot;任务2 获取锁1&quot;</span>)</span><br><span class="line">                    <span class="keyword">finally</span>:</span><br><span class="line">                        lock1.release()</span><br><span class="line">            <span class="keyword">finally</span>:</span><br><span class="line">                lock2.release()</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">t1 = threading.Thread(target=task1)</span><br><span class="line">t2 = threading.Thread(target=task2)</span><br><span class="line">t1.start()</span><br><span class="line">t2.start()</span><br><span class="line">t1.join()</span><br><span class="line">t2.join()</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="XML-解析"><a href="#XML-解析" class="headerlink" title="XML 解析"></a><strong>XML 解析</strong></h2><p><strong>常见的 XML 编程接口有 DOM 和 SAX</strong></p>
<p><strong>Python 有三种方法解析 XML：</strong></p>
<ul>
<li><p><strong>ElementTree：</strong></p>
<p><strong>xml.etree.ElementTree 是 Python 标准库中用于处理 XML 的模块，它提供了简单而高效的 API，用于解析和生成 XML 文档。</strong></p>
</li>
<li><p><strong>SAX  (simple API for XML )</strong></p>
<p><strong>Python 标准库包含 SAX 解析器，SAX 用事件驱动模型，通过在解析 XML 的过程中触发一个个的事件并调用用户定义的回调函数来处理 XML 文件。</strong></p>
</li>
<li><p><strong>DOM (Document Object Model)</strong></p>
<p><strong>将 XML 数据在内存中解析成一个树，通过对树的操作来操作 XML。</strong></p>
</li>
</ul>
<hr>
<h3 id="ElementTree-解析-xml"><a href="#ElementTree-解析-xml" class="headerlink" title="ElementTree 解析 xml"></a><strong>ElementTree 解析 xml</strong></h3><p><strong>ElementTree 和 Element 对象:</strong></p>
<ul>
<li><strong>ElementTree： ElementTree 类是 XML 文档的树形表示。它包含一个或多个 Element 对象，代表整个 XML 文档。</strong></li>
<li><strong>Element： Element 对象是 XML 文档中元素的表示。每个元素都有一个标签、一组属性和零个或多个子元素。</strong></li>
</ul>
<p><strong>解析 XML</strong></p>
<ul>
<li><p><strong>fromstring() 方法： 使用 fromstring() 方法可以将包含XML数据的字符串转换为 Element 对象：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line">xml_string = <span class="string">&#x27;&lt;root&gt;&lt;element&gt;Some data&lt;/element&gt;&lt;/root&gt;&#x27;</span></span><br><span class="line">root = ET.fromstring(xml_string)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>parse() 方法： 如果XML数据存储在文件中，可以使用 parse() 方法来解析整个 XML 文档：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tree = ET.parse(<span class="string">&#x27;example.xml&#x27;</span>)</span><br><span class="line">root = tree.getroot()</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>遍历 XML 树</strong></p>
<ul>
<li><p><strong>find() 方法： 使用 find() 方法可以查找具有指定标签的第一个子元素：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">title_element = root.find(<span class="string">&#x27;title&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>findall() 方法： 使用 findall() 方法可以查找具有指定标签的所有子元素：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">book_elements = root.findall(<span class="string">&#x27;book&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>访问元素的属性和文本内容</strong></p>
<ul>
<li><p><strong>attrib 属性： 通过 attrib 属性可以访问元素的属性：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">price = book_element.attrib[<span class="string">&#x27;price&#x27;</span>]</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>text 属性： 通过 text 属性可以访问元素的文本内容：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">title_text = title_element.text</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>创建 XML</strong></p>
<ul>
<li><p><strong>Element() 构造函数： 使用 Element() 构造函数可以创建新的元素：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new_element = ET.Element(<span class="string">&#x27;new_element&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>SubElement() 函数： 使用 SubElement() 函数可以创建具有指定标签的子元素：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new_sub_element = ET.SubElement(root, <span class="string">&#x27;new_sub_element&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>修改 XML</strong></p>
<ul>
<li><p><strong>修改元素的属性和文本内容： 直接修改元素的 attrib 和 text 属性。</strong></p>
<p><strong>删除元素： 使用 remove() 方法可以删除元素：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root.remove(title_element)</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>示例一：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义一个 XML 字符串</span></span><br><span class="line">xml_string = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;bookstore&gt;</span></span><br><span class="line"><span class="string">    &lt;book&gt;</span></span><br><span class="line"><span class="string">        &lt;title&gt;Python简介&lt;/title&gt;</span></span><br><span class="line"><span class="string">        &lt;author&gt;John Doe&lt;/author&gt;</span></span><br><span class="line"><span class="string">        &lt;price&gt;29.99&lt;/price&gt;</span></span><br><span class="line"><span class="string">    &lt;/book&gt;</span></span><br><span class="line"><span class="string">    &lt;book&gt;</span></span><br><span class="line"><span class="string">        &lt;title&gt;Data Science with Python&lt;/title&gt;</span></span><br><span class="line"><span class="string">        &lt;author&gt;Jane Smith&lt;/author&gt;</span></span><br><span class="line"><span class="string">        &lt;price&gt;39.95&lt;/price&gt;</span></span><br><span class="line"><span class="string">    &lt;/book&gt;</span></span><br><span class="line"><span class="string">&lt;/bookstore&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 ElementTree 解析 XML 字符串</span></span><br><span class="line">root = ET.fromstring(xml_string)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历 XML 树</span></span><br><span class="line"><span class="keyword">for</span> book <span class="keyword">in</span> root.findall(<span class="string">&#x27;book&#x27;</span>):</span><br><span class="line">    title = book.find(<span class="string">&#x27;title&#x27;</span>).text</span><br><span class="line">    author = book.find(<span class="string">&#x27;author&#x27;</span>).text</span><br><span class="line">    price = book.find(<span class="string">&#x27;price&#x27;</span>).text</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;题目: <span class="subst">&#123;title&#125;</span>, 作者: <span class="subst">&#123;author&#125;</span>, 价格: <span class="subst">&#123;price&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">题目: Python简介, 作者: John Doe, 价格: 29.99</span></span><br><span class="line"><span class="string">题目: Data Science with Python, 作者: Jane Smith, 价格: 39.95</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>示例二：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建一个XML文档</span></span><br><span class="line">root = ET.Element(<span class="string">&#x27;bookstore&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加第一本书</span></span><br><span class="line">book1 = ET.SubElement(root, <span class="string">&#x27;book&#x27;</span>)</span><br><span class="line">title1 = ET.SubElement(book1, <span class="string">&#x27;title&#x27;</span>)</span><br><span class="line">title1.text = <span class="string">&#x27;Introduction to Python&#x27;</span></span><br><span class="line">author1 = ET.SubElement(book1, <span class="string">&#x27;author&#x27;</span>)</span><br><span class="line">author1.text = <span class="string">&#x27;John Doe&#x27;</span></span><br><span class="line">price1 = ET.SubElement(book1, <span class="string">&#x27;price&#x27;</span>)</span><br><span class="line">price1.text = <span class="string">&#x27;29.99&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加第二本书</span></span><br><span class="line">book2 = ET.SubElement(root, <span class="string">&#x27;book&#x27;</span>)</span><br><span class="line">title2 = ET.SubElement(book2, <span class="string">&#x27;title&#x27;</span>)</span><br><span class="line">title2.text = <span class="string">&#x27;Data Science with Python&#x27;</span></span><br><span class="line">author2 = ET.SubElement(book2, <span class="string">&#x27;author&#x27;</span>)</span><br><span class="line">author2.text = <span class="string">&#x27;Jane Smith&#x27;</span></span><br><span class="line">price2 = ET.SubElement(book2, <span class="string">&#x27;price&#x27;</span>)</span><br><span class="line">price2.text = <span class="string">&#x27;39.95&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将XML文档保存到文件</span></span><br><span class="line">tree = ET.ElementTree(root)</span><br><span class="line">tree.write(<span class="string">&#x27;XML/books.xml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从文件中解析XML文档</span></span><br><span class="line">parsed_tree = ET.parse(<span class="string">&#x27;XML/books.xml&#x27;</span>)</span><br><span class="line">parsed_root = parsed_tree.getroot()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历XML树并打印书籍信息</span></span><br><span class="line"><span class="keyword">for</span> book <span class="keyword">in</span> parsed_root.findall(<span class="string">&#x27;book&#x27;</span>):</span><br><span class="line">    title = book.find(<span class="string">&#x27;title&#x27;</span>).text</span><br><span class="line">    author = book.find(<span class="string">&#x27;author&#x27;</span>).text</span><br><span class="line">    price = book.find(<span class="string">&#x27;price&#x27;</span>).text</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Title: <span class="subst">&#123;title&#125;</span>, Author: <span class="subst">&#123;author&#125;</span>, Price: <span class="subst">&#123;price&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;输出</span></span><br><span class="line"><span class="string">Title: Introduction to Python, Author: John Doe, Price: 29.99</span></span><br><span class="line"><span class="string">Title: Data Science with Python, Author: Jane Smith, Price: 39.95</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="SAX-解析-xml"><a href="#SAX-解析-xml" class="headerlink" title="SAX 解析 xml"></a><strong>SAX 解析 xml</strong></h3><p><strong>SAX 是一种基于事件驱动的API。</strong></p>
<p><strong>利用 SAX 解析 XML 文档牵涉到两个部分:解析器和事件处理器。</strong></p>
<p><strong>解析器：负责读取 XML 文档，并向事件处理器发送事件，如元素开始跟元素结束事件。</strong></p>
<p><strong>事件处理器：负责对事件作出响应，对传递的 XML 数据进行处理。</strong></p>
<p><strong>应用场景：</strong></p>
<ul>
<li><strong>对大型文件进行处理。</strong></li>
<li><strong>只需要文件的部分内容，或者只需从文件中得到特定信息。</strong></li>
<li><strong>想建立自己的对象模型的时候。</strong></li>
</ul>
<p><strong>要求：</strong></p>
<ul>
<li><strong>引入 xml.sax 中的 parse 函数。</strong></li>
<li><strong>引入 xml.sax.handler 中的 ContentHandler。</strong></li>
</ul>
<hr>
<p><strong>xml.sax.handler 中的 ContentHandler。</strong></p>
<ul>
<li><p><strong>characters(content)</strong> </p>
<p><strong>调用时机：</strong></p>
<p><strong>从行开始，遇到标签之前，存在字符，content 的值为这些字符串。</strong></p>
<p><strong>从一个标签，遇到下一个标签之前， 存在字符，content 的值为这些字符串。</strong></p>
<p><strong>从一个标签，遇到行结束符之前，存在字符，content 的值为这些字符串。</strong></p>
<p><strong>标签可以是开始标签，也可以是结束标签。</strong></p>
</li>
<li><p><strong>startDocument()</strong> </p>
<p><strong>文档启动的时候调用。</strong></p>
</li>
<li><p><strong>endDocument()</strong> </p>
<p><strong>解析器到达文档结尾时调用。</strong></p>
</li>
<li><p><strong>startElement(name, attrs)</strong> </p>
<p><strong>遇到XML开始标签时调用，name 是标签的名字，attrs 是标签的属性值字典。</strong></p>
</li>
<li><p><strong>endElement(name)</strong> </p>
<p><strong>遇到XML结束标签时调用。</strong></p>
</li>
</ul>
<hr>
<p><strong>parse 函数</strong></p>
<ul>
<li><p><strong>make_parser</strong> </p>
<p><strong>创建一个新的解析器对象并返回。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xml.sax.make_parser( [parser_list] )</span><br><span class="line"><span class="comment"># parser_list - 可选参数，解析器列表</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>parser</strong> </p>
<p><strong>创建一个 SAX 解析器并解析xml文档：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">xml.sax.parse( xmlfile, contenthandler[, errorhandler])</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 参数</span></span><br><span class="line"><span class="string">xmlfile - xml文件名</span></span><br><span class="line"><span class="string">contenthandler - 必须是一个 ContentHandler 的对象</span></span><br><span class="line"><span class="string">errorhandler - 如果指定该参数，errorhandler 必须是一个 SAX ErrorHandler 对象</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>parseString</strong></p>
<p><strong>创建一个 XML 解析器并解析 xml 字符串：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">xml.sax.parseString(xmlstring, contenthandler[, errorhandler])</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 参数</span></span><br><span class="line"><span class="string">xmlstring - xml字符串</span></span><br><span class="line"><span class="string">contenthandler - 必须是一个 ContentHandler 的对象</span></span><br><span class="line"><span class="string">errorhandler - 如果指定该参数，errorhandler 必须是一个 SAX ErrorHandler对象</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.sax</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MovieHandler</span>( xml.sax.ContentHandler ):</span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">      <span class="variable language_">self</span>.CurrentData = <span class="string">&quot;&quot;</span></span><br><span class="line">      <span class="variable language_">self</span>.<span class="built_in">type</span> = <span class="string">&quot;&quot;</span></span><br><span class="line">      <span class="variable language_">self</span>.<span class="built_in">format</span> = <span class="string">&quot;&quot;</span></span><br><span class="line">      <span class="variable language_">self</span>.year = <span class="string">&quot;&quot;</span></span><br><span class="line">      <span class="variable language_">self</span>.rating = <span class="string">&quot;&quot;</span></span><br><span class="line">      <span class="variable language_">self</span>.stars = <span class="string">&quot;&quot;</span></span><br><span class="line">      <span class="variable language_">self</span>.description = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment"># 元素开始调用</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">startElement</span>(<span class="params">self, tag, attributes</span>):</span><br><span class="line">      <span class="variable language_">self</span>.CurrentData = tag</span><br><span class="line">      <span class="keyword">if</span> tag == <span class="string">&quot;movie&quot;</span>:</span><br><span class="line">         <span class="built_in">print</span> (<span class="string">&quot;*****Movie*****&quot;</span>)</span><br><span class="line">         title = attributes[<span class="string">&quot;title&quot;</span>]</span><br><span class="line">         <span class="built_in">print</span> (<span class="string">&quot;Title:&quot;</span>, title)</span><br><span class="line"></span><br><span class="line">   <span class="comment"># 元素结束调用</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">endElement</span>(<span class="params">self, tag</span>):</span><br><span class="line">      <span class="keyword">if</span> <span class="variable language_">self</span>.CurrentData == <span class="string">&quot;type&quot;</span>:</span><br><span class="line">         <span class="built_in">print</span> (<span class="string">&quot;Type:&quot;</span>, <span class="variable language_">self</span>.<span class="built_in">type</span>)</span><br><span class="line">      <span class="keyword">elif</span> <span class="variable language_">self</span>.CurrentData == <span class="string">&quot;format&quot;</span>:</span><br><span class="line">         <span class="built_in">print</span> (<span class="string">&quot;Format:&quot;</span>, <span class="variable language_">self</span>.<span class="built_in">format</span>)</span><br><span class="line">      <span class="keyword">elif</span> <span class="variable language_">self</span>.CurrentData == <span class="string">&quot;year&quot;</span>:</span><br><span class="line">         <span class="built_in">print</span> (<span class="string">&quot;Year:&quot;</span>, <span class="variable language_">self</span>.year)</span><br><span class="line">      <span class="keyword">elif</span> <span class="variable language_">self</span>.CurrentData == <span class="string">&quot;rating&quot;</span>:</span><br><span class="line">         <span class="built_in">print</span> (<span class="string">&quot;Rating:&quot;</span>, <span class="variable language_">self</span>.rating)</span><br><span class="line">      <span class="keyword">elif</span> <span class="variable language_">self</span>.CurrentData == <span class="string">&quot;stars&quot;</span>:</span><br><span class="line">         <span class="built_in">print</span> (<span class="string">&quot;Stars:&quot;</span>, <span class="variable language_">self</span>.stars)</span><br><span class="line">      <span class="keyword">elif</span> <span class="variable language_">self</span>.CurrentData == <span class="string">&quot;description&quot;</span>:</span><br><span class="line">         <span class="built_in">print</span> (<span class="string">&quot;Description:&quot;</span>, <span class="variable language_">self</span>.description)</span><br><span class="line">      <span class="variable language_">self</span>.CurrentData = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment"># 读取字符时调用</span></span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">characters</span>(<span class="params">self, content</span>):</span><br><span class="line">      <span class="keyword">if</span> <span class="variable language_">self</span>.CurrentData == <span class="string">&quot;type&quot;</span>:</span><br><span class="line">         <span class="variable language_">self</span>.<span class="built_in">type</span> = content</span><br><span class="line">      <span class="keyword">elif</span> <span class="variable language_">self</span>.CurrentData == <span class="string">&quot;format&quot;</span>:</span><br><span class="line">         <span class="variable language_">self</span>.<span class="built_in">format</span> = content</span><br><span class="line">      <span class="keyword">elif</span> <span class="variable language_">self</span>.CurrentData == <span class="string">&quot;year&quot;</span>:</span><br><span class="line">         <span class="variable language_">self</span>.year = content</span><br><span class="line">      <span class="keyword">elif</span> <span class="variable language_">self</span>.CurrentData == <span class="string">&quot;rating&quot;</span>:</span><br><span class="line">         <span class="variable language_">self</span>.rating = content</span><br><span class="line">      <span class="keyword">elif</span> <span class="variable language_">self</span>.CurrentData == <span class="string">&quot;stars&quot;</span>:</span><br><span class="line">         <span class="variable language_">self</span>.stars = content</span><br><span class="line">      <span class="keyword">elif</span> <span class="variable language_">self</span>.CurrentData == <span class="string">&quot;description&quot;</span>:</span><br><span class="line">         <span class="variable language_">self</span>.description = content</span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span> ( __name__ == <span class="string">&quot;__main__&quot;</span>):</span><br><span class="line">   </span><br><span class="line">   <span class="comment"># 创建一个 XMLReader</span></span><br><span class="line">   parser = xml.sax.make_parser()</span><br><span class="line">   <span class="comment"># 关闭命名空间</span></span><br><span class="line">   parser.setFeature(xml.sax.handler.feature_namespaces, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">   <span class="comment"># 重写 ContextHandler</span></span><br><span class="line">   Handler = MovieHandler()</span><br><span class="line">   parser.setContentHandler( Handler )</span><br><span class="line">   </span><br><span class="line">   parser.parse(<span class="string">&quot;XML/movies.xml&quot;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">*****Movie*****</span></span><br><span class="line"><span class="string">Title: Enemy Behind</span></span><br><span class="line"><span class="string">Type: War, Thriller</span></span><br><span class="line"><span class="string">Format: DVD</span></span><br><span class="line"><span class="string">Year: 2003</span></span><br><span class="line"><span class="string">Rating: PG</span></span><br><span class="line"><span class="string">Stars: 10</span></span><br><span class="line"><span class="string">Description: Talk about a US-Japan war</span></span><br><span class="line"><span class="string">*****Movie*****</span></span><br><span class="line"><span class="string">Title: Transformers</span></span><br><span class="line"><span class="string">Type: Anime, Science Fiction</span></span><br><span class="line"><span class="string">Format: DVD</span></span><br><span class="line"><span class="string">Year: 1989</span></span><br><span class="line"><span class="string">Rating: R</span></span><br><span class="line"><span class="string">Stars: 8</span></span><br><span class="line"><span class="string">Description: A schientific fiction</span></span><br><span class="line"><span class="string">*****Movie*****</span></span><br><span class="line"><span class="string">Title: Trigun</span></span><br><span class="line"><span class="string">Type: Anime, Action</span></span><br><span class="line"><span class="string">Format: DVD</span></span><br><span class="line"><span class="string">Rating: PG</span></span><br><span class="line"><span class="string">Stars: 10</span></span><br><span class="line"><span class="string">Description: Vash the Stampede!</span></span><br><span class="line"><span class="string">*****Movie*****</span></span><br><span class="line"><span class="string">Title: Ishtar</span></span><br><span class="line"><span class="string">Type: Comedy</span></span><br><span class="line"><span class="string">Format: VHS</span></span><br><span class="line"><span class="string">Rating: PG</span></span><br><span class="line"><span class="string">Stars: 2</span></span><br><span class="line"><span class="string">Description: Viewable boredom&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="DOM解析xml"><a href="#DOM解析xml" class="headerlink" title="DOM解析xml"></a><strong>DOM解析xml</strong></h3><p><strong>Python 中用 xml.dom.minidom 来解析 xml 文件，实例如下：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> xml.dom.minidom <span class="keyword">import</span> parse</span><br><span class="line"><span class="keyword">import</span> xml.dom.minidom</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用minidom解析器打开 XML 文档</span></span><br><span class="line">DOMTree = xml.dom.minidom.parse(<span class="string">&quot;XML/movies.xml&quot;</span>)</span><br><span class="line">collection = DOMTree.documentElement</span><br><span class="line"><span class="keyword">if</span> collection.hasAttribute(<span class="string">&quot;shelf&quot;</span>):</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;Root element : %s&quot;</span> % collection.getAttribute(<span class="string">&quot;shelf&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在集合中获取所有电影</span></span><br><span class="line">movies = collection.getElementsByTagName(<span class="string">&quot;movie&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印每部电影的详细信息</span></span><br><span class="line"><span class="keyword">for</span> movie <span class="keyword">in</span> movies:</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;*****Movie*****&quot;</span>)</span><br><span class="line">   <span class="keyword">if</span> movie.hasAttribute(<span class="string">&quot;title&quot;</span>):</span><br><span class="line">      <span class="built_in">print</span> (<span class="string">&quot;Title: %s&quot;</span> % movie.getAttribute(<span class="string">&quot;title&quot;</span>))</span><br><span class="line"></span><br><span class="line">   <span class="built_in">type</span> = movie.getElementsByTagName(<span class="string">&#x27;type&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;Type: %s&quot;</span> % <span class="built_in">type</span>.childNodes[<span class="number">0</span>].data)</span><br><span class="line">   <span class="built_in">format</span> = movie.getElementsByTagName(<span class="string">&#x27;format&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;Format: %s&quot;</span> % <span class="built_in">format</span>.childNodes[<span class="number">0</span>].data)</span><br><span class="line">   rating = movie.getElementsByTagName(<span class="string">&#x27;rating&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;Rating: %s&quot;</span> % rating.childNodes[<span class="number">0</span>].data)</span><br><span class="line">   description = movie.getElementsByTagName(<span class="string">&#x27;description&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">   <span class="built_in">print</span> (<span class="string">&quot;Description: %s&quot;</span> % description.childNodes[<span class="number">0</span>].data)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">Root element : New Arrivals</span></span><br><span class="line"><span class="string">*****Movie*****</span></span><br><span class="line"><span class="string">Title: Enemy Behind</span></span><br><span class="line"><span class="string">Type: War, Thriller</span></span><br><span class="line"><span class="string">Format: DVD</span></span><br><span class="line"><span class="string">Rating: PG</span></span><br><span class="line"><span class="string">Description: Talk about a US-Japan war</span></span><br><span class="line"><span class="string">*****Movie*****</span></span><br><span class="line"><span class="string">Title: Transformers</span></span><br><span class="line"><span class="string">Type: Anime, Science Fiction</span></span><br><span class="line"><span class="string">Format: DVD</span></span><br><span class="line"><span class="string">Rating: R</span></span><br><span class="line"><span class="string">Description: A schientific fiction</span></span><br><span class="line"><span class="string">*****Movie*****</span></span><br><span class="line"><span class="string">Title: Trigun</span></span><br><span class="line"><span class="string">Type: Anime, Action</span></span><br><span class="line"><span class="string">Format: DVD</span></span><br><span class="line"><span class="string">Rating: PG</span></span><br><span class="line"><span class="string">Description: Vash the Stampede!</span></span><br><span class="line"><span class="string">*****Movie*****</span></span><br><span class="line"><span class="string">Title: Ishtar</span></span><br><span class="line"><span class="string">Type: Comedy</span></span><br><span class="line"><span class="string">Format: VHS</span></span><br><span class="line"><span class="string">Rating: PG</span></span><br><span class="line"><span class="string">Description: Viewable boredom</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="JSON-解析"><a href="#JSON-解析" class="headerlink" title="JSON 解析"></a><strong>JSON 解析</strong></h2><p><strong>使用 json 模块来对 JSON 数据进行编解码，它包含了两个函数：</strong></p>
<ul>
<li><strong>json.dumps(): 对数据进行编码。</strong></li>
<li><strong>json.loads(): 对数据进行解码。</strong></li>
</ul>
<p><strong><img src="https://www.runoob.com/wp-content/uploads/2016/04/json-dumps-loads.png" alt="img"></strong></p>
<p><strong>Python 编码为 JSON 类型转换对应表：</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>Python</strong></th>
<th align="left"><strong>JSON</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>dict</strong></td>
<td align="left"><strong>object</strong></td>
</tr>
<tr>
<td align="left"><strong>list, tuple</strong></td>
<td align="left"><strong>array</strong></td>
</tr>
<tr>
<td align="left"><strong>str</strong></td>
<td align="left"><strong>string</strong></td>
</tr>
<tr>
<td align="left"><strong>int, float, int- &amp; float-derived Enums</strong></td>
<td align="left"><strong>number</strong></td>
</tr>
<tr>
<td align="left"><strong>True</strong></td>
<td align="left"><strong>true</strong></td>
</tr>
<tr>
<td align="left"><strong>False</strong></td>
<td align="left"><strong>false</strong></td>
</tr>
<tr>
<td align="left"><strong>None</strong></td>
<td align="left"><strong>null</strong></td>
</tr>
</tbody></table>
<p><strong>JSON 解码为 Python 类型转换对应表：</strong></p>
<table>
<thead>
<tr>
<th align="left"><strong>JSON</strong></th>
<th align="left"><strong>Python</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>object</strong></td>
<td align="left"><strong>dict</strong></td>
</tr>
<tr>
<td align="left"><strong>array</strong></td>
<td align="left"><strong>list</strong></td>
</tr>
<tr>
<td align="left"><strong>string</strong></td>
<td align="left"><strong>str</strong></td>
</tr>
<tr>
<td align="left"><strong>number (int)</strong></td>
<td align="left"><strong>int</strong></td>
</tr>
<tr>
<td align="left"><strong>number (real)</strong></td>
<td align="left"><strong>float</strong></td>
</tr>
<tr>
<td align="left"><strong>true</strong></td>
<td align="left"><strong>True</strong></td>
</tr>
<tr>
<td align="left"><strong>false</strong></td>
<td align="left"><strong>False</strong></td>
</tr>
<tr>
<td align="left"><strong>null</strong></td>
<td align="left"><strong>None</strong></td>
</tr>
</tbody></table>
<hr>
<p><strong>示例：</strong></p>
<ul>
<li><p><strong>json.loads(): 对数据进行解码。</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Python 字典类型转换为 JSON 对象</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;no&#x27;</span> : <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> : <span class="string">&#x27;Runoob&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;url&#x27;</span> : <span class="string">&#x27;https://www.runoob.com&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">json_str = json.dumps(data)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;Python 原始数据：&quot;</span>, <span class="built_in">repr</span>(data))</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;JSON 对象：&quot;</span>, json_str)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">Python 原始数据： &#123;&#x27;no&#x27;: 1, &#x27;name&#x27;: &#x27;Runoob&#x27;, &#x27;url&#x27;: &#x27;https://www.runoob.com&#x27;&#125;</span></span><br><span class="line"><span class="string">JSON 对象： &#123;&quot;no&quot;: 1, &quot;name&quot;: &quot;Runoob&quot;, &quot;url&quot;: &quot;https://www.runoob.com&quot;&#125;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>json.dumps(): 对数据进行编码。</strong></p>
<p><strong>将一个JSON编码的字符串转换回一个Python数据结构：</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"> </span><br><span class="line"><span class="comment"># Python 字典类型转换为 JSON 对象</span></span><br><span class="line">data1 = &#123;</span><br><span class="line">    <span class="string">&#x27;no&#x27;</span> : <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;name&#x27;</span> : <span class="string">&#x27;Runoob&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;url&#x27;</span> : <span class="string">&#x27;http://www.runoob.com&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">json_str = json.dumps(data1)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;Python 原始数据：&quot;</span>, <span class="built_in">repr</span>(data1))</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;JSON 对象：&quot;</span>, json_str)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 将 JSON 对象转换为 Python 字典</span></span><br><span class="line">data2 = json.loads(json_str)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;data2[&#x27;name&#x27;]: &quot;</span>, data2[<span class="string">&#x27;name&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;data2[&#x27;url&#x27;]: &quot;</span>, data2[<span class="string">&#x27;url&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">Python 原始数据： &#123;&#x27;no&#x27;: 1, &#x27;name&#x27;: &#x27;Runoob&#x27;, &#x27;url&#x27;: &#x27;https://www.runoob.com&#x27;&#125;</span></span><br><span class="line"><span class="string">JSON 对象： &#123;&quot;no&quot;: 1, &quot;name&quot;: &quot;Runoob&quot;, &quot;url&quot;: &quot;https://www.runoob.com&quot;&#125;</span></span><br><span class="line"><span class="string">data2[&#x27;name&#x27;]:  Runoob</span></span><br><span class="line"><span class="string">data2[&#x27;url&#x27;]:  https://www.runoob.com</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h3 id="解析-JSON-文件"><a href="#解析-JSON-文件" class="headerlink" title="解析 JSON 文件"></a><strong>解析 JSON 文件</strong></h3><p><strong>示例一：</strong></p>
<p><strong>test.json</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;sites&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;菜鸟教程&quot;</span> <span class="punctuation">,</span> <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span><span class="string">&quot;www.runoob.com&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span> </span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;google&quot;</span> <span class="punctuation">,</span> <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span><span class="string">&quot;www.google.com&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span> </span><br><span class="line">    <span class="punctuation">&#123;</span> <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;微博&quot;</span> <span class="punctuation">,</span> <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span><span class="string">&quot;www.weibo.com&quot;</span> <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>解析</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从test.json文件中读取JSON数据</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;JSON/test.json&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    data = json.load(f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解析JSON数据</span></span><br><span class="line"><span class="keyword">for</span> site <span class="keyword">in</span> data[<span class="string">&#x27;sites&#x27;</span>]:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;网站名称: <span class="subst">&#123;site[<span class="string">&#x27;name&#x27;</span>]&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;网站地址: <span class="subst">&#123;site[<span class="string">&#x27;url&#x27;</span>]&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">网站名称: 菜鸟教程</span></span><br><span class="line"><span class="string">网站地址: www.runoob.com</span></span><br><span class="line"><span class="string">------------------------------</span></span><br><span class="line"><span class="string">网站名称: google</span></span><br><span class="line"><span class="string">网站地址: www.google.com</span></span><br><span class="line"><span class="string">------------------------------</span></span><br><span class="line"><span class="string">网站名称: 微博</span></span><br><span class="line"><span class="string">网站地址: www.weibo.com</span></span><br><span class="line"><span class="string">------------------------------</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<hr>
<p><strong>示例二：</strong></p>
<p>先<code>json.dump()</code>写入再<code>json.load()</code>读取</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义要写入的JSON数据</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&quot;sites&quot;</span>: [</span><br><span class="line">        &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;菜鸟教程&quot;</span>, <span class="string">&quot;url&quot;</span>: <span class="string">&quot;www.runoob.com&quot;</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;google&quot;</span>, <span class="string">&quot;url&quot;</span>: <span class="string">&quot;www.google.com&quot;</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;微博&quot;</span>, <span class="string">&quot;url&quot;</span>: <span class="string">&quot;www.weibo.com&quot;</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入JSON数据到test.json</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;test.json&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    json.dump(data, f, ensure_ascii=<span class="literal">False</span>, indent=<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从test.json读取数据</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;test.json&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    loaded_data = json.load(f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印读取的数据</span></span><br><span class="line"><span class="built_in">print</span>(loaded_data)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="爬虫"><a href="#爬虫" class="headerlink" title="爬虫"></a>爬虫</h2><h3 id="流程"><a href="#流程" class="headerlink" title="流程"></a><strong>流程</strong></h3><ul>
<li><strong>发送 HTTP 请求</strong>：爬虫通过 HTTP 请求从目标网站获取 HTML 页面，常用的库包括 <code>requests</code>。</li>
<li><strong>解析 HTML 内容</strong>：获取 HTML 页面后，爬虫需要解析内容并提取数据，常用的库有 <code>BeautifulSoup</code>、<code>lxml</code>、<code>Scrapy</code> 等。</li>
<li><strong>提取数据</strong>：通过定位 HTML 元素（如标签、属性、类名等）来提取所需的数据。</li>
<li><strong>存储数据</strong>：将提取的数据存储到数据库、CSV 文件、JSON 文件等格式中，以便后续使用或分析。</li>
</ul>
<h3 id="BeautifulSoup-库"><a href="#BeautifulSoup-库" class="headerlink" title="BeautifulSoup 库"></a>BeautifulSoup 库</h3><p>适用于解析 HTML 和 XML 文件</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2024/12/parsing-html-with-beautifulsoup-in-python-1.jpg" alt="img"></p>
<p><strong>安装 BeautifulSoup：</strong></p>
<p>安装 <code>beautifulsoup4</code> 和 <code>lxml</code> 或 <code>html.parser</code>（一个 HTML 解析器）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install beautifulsoup4</span><br><span class="line">pip install lxml  <span class="comment"># 推荐使用 lxml 作为解析器（速度更快）</span></span><br></pre></td></tr></table></figure>

<p>安装 <code>request</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install requests</span><br></pre></td></tr></table></figure>

<p>安装 <code>chardet</code> 库：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install chardet</span><br></pre></td></tr></table></figure>

<p><strong>用法：</strong></p>
<p>查找标签、获取标签属性、提取文本等</p>
<p>要使用 BeautifulSoup，需要先导入 BeautifulSoup，并将 HTML 页面加载到 BeautifulSoup 对象中。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment"># 使用 chardet 自动检测编码</span></span><br><span class="line"><span class="keyword">import</span> chardet</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定你想要获取标题的网站</span></span><br><span class="line">url = <span class="string">&#x27;https://cn.bing.com/&#x27;</span> <span class="comment"># 抓取bing搜索引擎的网页内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送HTTP请求获取网页内容</span></span><br><span class="line">response = requests.get(url)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解决中文乱码问题(自动检测编码)</span></span><br><span class="line">encoding = chardet.detect(response.content)[<span class="string">&#x27;encoding&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;编码为：&quot;</span>,encoding)</span><br><span class="line">response.encoding = encoding </span><br><span class="line"></span><br><span class="line"><span class="comment"># 确保请求成功</span></span><br><span class="line"><span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">    <span class="comment"># 使用BeautifulSoup解析网页内容</span></span><br><span class="line">    soup = BeautifulSoup(response.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 查找&lt;title&gt;标签</span></span><br><span class="line">    title_tag = soup.find(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 打印标题文本</span></span><br><span class="line">    <span class="keyword">if</span> title_tag:</span><br><span class="line">        <span class="built_in">print</span>(title_tag.get_text())</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;未找到&lt;title&gt;标签&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请求失败，状态码：&quot;</span>, response.status_code)</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>查找标签</strong></p>
<ul>
<li><p><code>find()</code> 返回第一个匹配的标签</p>
</li>
<li><p><code>find_all()</code> 返回所有匹配的标签</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 省略获取url、编码</span></span><br><span class="line"><span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">    <span class="comment"># 使用BeautifulSoup解析网页内容</span></span><br><span class="line">    soup = BeautifulSoup(response.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">    <span class="comment"># 查找第一个 &lt;a&gt; 标签</span></span><br><span class="line">    first_link = soup.find(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(first_link)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;----------------------------&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取第一个 &lt;a&gt; 标签的 href 属性</span></span><br><span class="line">    first_link_url = first_link.get(<span class="string">&#x27;href&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(first_link_url)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;----------------------------&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查找所有 &lt;a&gt; 标签</span></span><br><span class="line">    all_links = soup.find_all(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(all_links)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请求失败，状态码：&quot;</span>, response.status_code)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">编码为： utf-8</span></span><br><span class="line"><span class="string">&lt;a aria-hidden=&quot;true&quot; class=&quot;linkBtn&quot; h=&quot;ID=SERP,5067.1&quot; href=&quot;javascript:void(0)&quot; id=&quot;hpinsthk&quot; tabindex=&quot;-1&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="string">----------------------------</span></span><br><span class="line"><span class="string">javascript:void(0)</span></span><br><span class="line"><span class="string">----------------------------</span></span><br><span class="line"><span class="string">[&lt;a aria-hidden=&quot;true&quot; class=&quot;linkBtn&quot; h=&quot;ID=SERP,5067.1&quot; href=&quot;javascript:void(0)&quot; id=&quot;hpinsthk&quot; tabindex=&quot;-1&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/a&gt;, &lt;a h=&quot;ID=SERP,5068.1&quot; href=&quot;https://dxzhgl.miit.gov.cn/dxxzsp/xkz/xkzgl/resource/qiyereport.jsp?num=caf04fa4-bd8a-4d9e-80b6-2aa1b86c1509&amp;amp;type=yreport&quot; id=&quot;ICPLicense&quot;&gt;增值电信业务经营许可证：合字B2-20090007&lt;/a&gt;, &lt;a h=&quot;ID=SERP,5069.1&quot; href=&quot;https://beian.miit.gov.cn&quot; id=&quot;ICPFiling&quot;&gt;京ICP备10036305号-7&lt;/a&gt;, &lt;a h=&quot;ID=SERP,5070.1&quot; href=&quot;http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802022657&quot; id=&quot;MMAIS&quot;&gt;京公网安备11010802022657号&lt;/a&gt;, &lt;a h=&quot;ID=SERP,5071.1&quot; href=&quot;//go.microsoft.com/fwlink/?LinkId=521839&quot; id=&quot;privacy&quot;&gt;隐私与 Cookie&lt;/a&gt;, &lt;a h=&quot;ID=SERP,5072.1&quot; href=&quot;//go.microsoft.com/fwlink/?LinkID=246338&quot; id=&quot;legal&quot;&gt;法律声明&lt;/a&gt;, &lt;a h=&quot;ID=SERP,5073.1&quot; href=&quot;//go.microsoft.com/fwlink/?linkid=868923&quot; id=&quot;&quot;&gt;广告&lt;/a&gt;, &lt;a h=&quot;ID=SERP,5074.1&quot; href=&quot;//go.microsoft.com/fwlink/?LinkID=286759&quot; id=&quot;&quot;&gt;关于我们的广告&lt;/a&gt;, &lt;a h=&quot;ID=SERP,5075.1&quot; href=&quot;//support.microsoft.com/topic/82d20721-2d6f-4012-a13d-d1910ccf203f&quot; id=&quot;help&quot;&gt;帮助&lt;/a&gt;, &lt;a h=&quot;ID=SERP,5076.1&quot; href=&quot;#&quot; id=&quot;sb_feedback&quot;&gt;反馈&lt;/a&gt;]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>获取标签的文本</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 省略获取url、编码</span></span><br><span class="line"><span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">    soup = BeautifulSoup(response.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取第一个 &lt;title&gt; 标签中的文本内容</span></span><br><span class="line">    paragraph_text = soup.find(<span class="string">&#x27;title&#x27;</span>).get_text()</span><br><span class="line">    <span class="comment"># 打印标题文本</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;标题：&quot;</span>,paragraph_text)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取页面中所有文本内容</span></span><br><span class="line">    all_text = soup.get_text()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;页面所有文本：&quot;</span>,all_text)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查找&lt;title&gt;标签</span></span><br><span class="line">    title_tag = soup.find(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请求失败，状态码：&quot;</span>, response.status_code)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">编码为： utf-8</span></span><br><span class="line"><span class="string">标题： 搜索 - Microsoft 必应</span></span><br><span class="line"><span class="string">------------------------------</span></span><br><span class="line"><span class="string">页面所有文本： 搜索 - Microsoft 必应© 2025 Microsoft增值电信业务经营许可证：合字B2-20090007京ICP备10036305号-7京公网安备11010802022657号隐私与 Cookie法律声明广告关于我们的广告帮助反馈</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>查找子标签和父标签</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取当前标签的父标签</span></span><br><span class="line">parent_tag = first_link.parent</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前标签的所有子标签</span></span><br><span class="line">children = first_link.children</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 省略获取url、编码</span></span><br><span class="line"><span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">    soup = BeautifulSoup(response.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查找第一个 &lt;a&gt; 标签</span></span><br><span class="line">    first_link = soup.find(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(first_link)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;----------------------------&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取当前标签的父标签</span></span><br><span class="line">    parent_tag = first_link.parent</span><br><span class="line">    <span class="built_in">print</span>(parent_tag.get_text())</span><br><span class="line">    </span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请求失败，状态码：&quot;</span>, response.status_code)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27; 输出</span></span><br><span class="line"><span class="string">编码为： utf-8</span></span><br><span class="line"><span class="string">&lt;a class=&quot;mnav c-font-normal c-color-t&quot; href=&quot;//news.baidu.com/&quot; target=&quot;_blank&quot;&gt;新闻&lt;/a&gt;</span></span><br><span class="line"><span class="string">----------------------------</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">新闻</span></span><br><span class="line"><span class="string">hao123</span></span><br><span class="line"><span class="string">地图</span></span><br><span class="line"><span class="string">直播</span></span><br><span class="line"><span class="string">视频</span></span><br><span class="line"><span class="string">贴吧</span></span><br><span class="line"><span class="string">学术</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">更多</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>查找特定 <code>id</code> 的标签<code>&lt;&gt;</code></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 省略获取url、编码</span></span><br><span class="line"><span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">    soup = BeautifulSoup(response.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 查找具有 id=&quot;unique-id&quot; 的 &lt;input&gt; 标签</span></span><br><span class="line">    unique_input = soup.find(<span class="string">&#x27;input&#x27;</span>, <span class="built_in">id</span>=<span class="string">&#x27;search_icon&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    input_value = unique_input[<span class="string">&#x27;value&#x27;</span>] <span class="comment"># 获取 input 输入框的值</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(input_value)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请求失败，状态码：&quot;</span>, response.status_code)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="爬取标准模板："><a href="#爬取标准模板：" class="headerlink" title="爬取标准模板："></a>爬取标准模板：</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment"># 使用 chardet 自动检测编码</span></span><br><span class="line"><span class="keyword">import</span> chardet</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定你想要获取标题的网站</span></span><br><span class="line">url = <span class="string">&#x27;https://cn.bing.com/&#x27;</span> <span class="comment"># 抓取bing搜索引擎的网页内容</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用完整浏览器头部</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Accept-Language&#x27;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送HTTP请求获取网页内容</span></span><br><span class="line">response = requests.get(url, headers=headers)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解决中文乱码问题(自动检测编码)</span></span><br><span class="line">encoding = chardet.detect(response.content)[<span class="string">&#x27;encoding&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;编码为：&quot;</span>,encoding)</span><br><span class="line">response.encoding = encoding </span><br><span class="line"></span><br><span class="line"><span class="comment"># 确保请求成功</span></span><br><span class="line"><span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">    <span class="comment"># 使用BeautifulSoup解析网页内容</span></span><br><span class="line">    soup = BeautifulSoup(response.text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 爬取 class_=&quot;&quot; 的标签&lt;&gt;</span></span><br><span class="line">	label_content = soup.find(<span class="string">&#x27;&#x27;</span>,class_=<span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="comment"># 爬取 id=&quot;xxx&quot; 的标签&lt;&gt;</span></span><br><span class="line">    label_content2 = soup.find(<span class="string">&#x27;&#x27;</span>,<span class="built_in">id</span>=<span class="string">&quot;xxx&quot;</span>)</span><br><span class="line">    <span class="comment"># 其他 ……</span></span><br><span class="line">    <span class="built_in">print</span>(label_content)</span><br><span class="line">    <span class="built_in">print</span>(label_content2)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请求失败，状态码：&quot;</span>, response.status_code)</span><br></pre></td></tr></table></figure>

<h3 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-spider-beautifulsoup.html">高级用法</a></h3><p>根据 CSS 爬取</p>
<hr>
<h3 id="Scrapy库"><a href="#Scrapy库" class="headerlink" title="Scrapy库"></a>Scrapy库</h3><p>Scrapy 是一个功能强大的 Python 爬虫框架，专门用于抓取网页数据并提取信息。</p>
<p>Scrapy常被用于数据挖掘、信息处理或存储历史数据等应用。</p>
<p>Scrapy 内置了许多有用的功能，如处理请求、跟踪状态、处理错误、处理请求频率限制等，非常适合进行高效、分布式的网页爬取。</p>
<p>与简单的爬虫库（如 <strong>requests</strong> 和 <strong>BeautifulSoup</strong>）不同，Scrapy 是一个<strong>全功能</strong>的爬虫框架，具有高度的可扩展性和灵活性，适用于复杂和大规模的网页抓取任务。</p>
<p>Scrapy 的工作基于以下几个核心组件：</p>
<ul>
<li><strong>Spider</strong>：爬虫类，用于定义如何从网页中提取数据以及如何跟踪网页的链接。</li>
<li><strong>Item</strong>：用来定义和存储抓取的数据。相当于数据模型。</li>
<li><strong>Pipeline</strong>：用于处理抓取到的数据，常用于清洗、存储数据等操作。</li>
<li><strong>Middleware</strong>：用来处理请求和响应，可以用于设置代理、处理 cookies、用户代理等。</li>
<li><strong>Settings</strong>：用来配置 Scrapy 项目的各项设置，如请求延迟、并发请求数等。</li>
</ul>
<p><font color="red"><em><strong>Scrapy 使用命令行工具来创建和管理爬虫项目。</strong></em></font></p>
<hr>
<h4 id="安装-Scrapy"><a href="#安装-Scrapy" class="headerlink" title="安装 Scrapy"></a><strong>安装 Scrapy</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install scrapy</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="Scrapy-项目结构"><a href="#Scrapy-项目结构" class="headerlink" title="Scrapy 项目结构"></a><strong>Scrapy 项目结构</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">myproject/</span><br><span class="line">    scrapy.cfg            # 项目的配置文件</span><br><span class="line">    myproject/            # 项目源代码文件夹</span><br><span class="line">        __init__.py</span><br><span class="line">        items.py          # 定义抓取的数据结构</span><br><span class="line">        middlewares.py    # 定义中间件</span><br><span class="line">        pipelines.py      # 定义数据处理管道</span><br><span class="line">        settings.py       # 项目的设置文件</span><br><span class="line">        spiders/           # 存放爬虫代码的文件夹</span><br><span class="line">            __init__.py</span><br><span class="line">            myspider.py   # 自定义的爬虫代码</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="创建一个新的-Scrapy-项目："><a href="#创建一个新的-Scrapy-项目：" class="headerlink" title="创建一个新的 Scrapy 项目："></a><strong>创建一个新的 Scrapy 项目</strong>：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject myproject</span><br></pre></td></tr></table></figure>

<p><img src="/blog2025.github.io/2025/05/29/Python/image-20250608114918652.png" alt="image-20250608114918652"></p>
<p>这将创建一个名为 myproject 的项目，项目结构大致如下：</p>
<p><img src="/blog2025.github.io/2025/05/29/Python/image-20250608114805142.png" alt="image-20250608114805142"></p>
<hr>
<h4 id="爬取网页："><a href="#爬取网页：" class="headerlink" title="爬取网页："></a><strong>爬取网页：</strong></h4><p>命令行进入项目：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> myproject</span><br></pre></td></tr></table></figure>

<p>通过 <strong><code>scrapy genspider</code></strong> 命令来创建一个爬虫</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy genspider douban_spider movie.douban.com</span><br></pre></td></tr></table></figure>

<p>生成**<code>douban_spider.py</code>**文件</p>
<p><img src="/blog2025.github.io/2025/05/29/Python/image-20250608115601614.png" alt="image-20250608115601614"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DoubanSpiderSpider</span>(scrapy.Spider):</span><br><span class="line">    name = <span class="string">&quot;douban_spider&quot;</span></span><br><span class="line">    allowed_domains = [<span class="string">&quot;movie.douban.com&quot;</span>]</span><br><span class="line">    start_urls = [<span class="string">&quot;https://movie.douban.com&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>代码说明：</p>
<ul>
<li><strong><code>name</code></strong>：定义爬虫的名称，必须是唯一的。</li>
<li><strong><code>allowed_domains</code></strong>：限制爬虫的访问域名，防止爬虫爬取其他域名的网页。</li>
<li><strong><code>start_urls</code></strong>：定义爬虫的起始页面，爬虫将从这些页面开始抓取。</li>
<li><strong><code>parse</code></strong>：<code>parse</code> 方法是每个爬虫的核心部分，用于处理响应并提取数据。它接收一个 <code>response</code> 对象，表示服务器返回的页面内容。</li>
</ul>
<hr>
<p><strong>编写爬虫代码：</strong></p>
<p>编写爬虫代码前我们需要注意几个点：</p>
<ul>
<li>豆瓣等网站可能会检测爬虫行为，建议设置 USER_AGENT 和 DOWNLOAD_DELAY 来模拟正常用户行为。</li>
<li>在爬取数据时，请遵守目标网站的 <strong>robots.txt</strong> 文件规定，避免对服务器造成过大压力。</li>
<li>如果频繁爬取，可能会触发 IP 封禁。</li>
</ul>
<hr>
<p><strong>修改 <code>settings.py</code> 配置：</strong></p>
<p>在 <code>settings.py</code> 中添加以下配置，以模拟浏览器请求并绕过反爬虫机制：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置 User-Agent</span></span><br><span class="line">USER_AGENT = <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 不遵守 robots.txt 规则</span></span><br><span class="line">ROBOTSTXT_OBEY = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置下载延迟，避免过快请求</span></span><br><span class="line">DOWNLOAD_DELAY = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启用自动限速扩展</span></span><br><span class="line">AUTOTHROTTLE_ENABLED = <span class="literal">True</span></span><br><span class="line">AUTOTHROTTLE_START_DELAY = <span class="number">2</span></span><br><span class="line">AUTOTHROTTLE_MAX_DELAY = <span class="number">5</span></span><br></pre></td></tr></table></figure>

<hr>
<p><strong>修改<code>douban_spider.py</code>：</strong></p>
<p>在爬虫代码中，添加自定义请求头（如 User-Agent 和 Referer），以进一步模拟浏览器行为。</p>
<p>打开 <code>douban_spider.py</code> 文件，并修改其内容如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DoubanSpider</span>(scrapy.Spider):</span><br><span class="line">    name = <span class="string">&quot;douban_spider&quot;</span></span><br><span class="line">    start_urls = [</span><br><span class="line">        <span class="string">&#x27;https://movie.douban.com/top250&#x27;</span>,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_requests</span>(<span class="params">self</span>):</span><br><span class="line">        headers = &#123;</span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://movie.douban.com/&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> url <span class="keyword">in</span> <span class="variable language_">self</span>.start_urls:</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(url, headers=headers, callback=<span class="variable language_">self</span>.parse)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">parse</span>(<span class="params">self, response</span>):</span><br><span class="line">        <span class="keyword">for</span> movie <span class="keyword">in</span> response.css(<span class="string">&#x27;div.item&#x27;</span>):</span><br><span class="line">            <span class="keyword">yield</span> &#123;</span><br><span class="line">                <span class="string">&#x27;title&#x27;</span>: movie.css(<span class="string">&#x27;span.title::text&#x27;</span>).get(),</span><br><span class="line">                <span class="string">&#x27;rating&#x27;</span>: movie.css(<span class="string">&#x27;span.rating_num::text&#x27;</span>).get(),</span><br><span class="line">                <span class="string">&#x27;quote&#x27;</span>: movie.css(<span class="string">&#x27;span.inq::text&#x27;</span>).get(),</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 处理分页</span></span><br><span class="line">        next_page = response.css(<span class="string">&#x27;span.next a::attr(href)&#x27;</span>).get()</span><br><span class="line">        <span class="keyword">if</span> next_page <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">yield</span> response.follow(next_page, callback=<span class="variable language_">self</span>.parse)</span><br></pre></td></tr></table></figure>

<p>代码解析：</p>
<ol>
<li><strong><code>name = &quot;douban_spider&quot;</code></strong>: 定义爬虫的名称。</li>
<li><strong><code>start_urls</code></strong>: 定义爬虫开始爬取的初始 URL（豆瓣电影 Top 250 页面）。</li>
<li><strong><code>parse</code> 方法</strong>:<ul>
<li>使用 CSS 选择器提取每部电影的标题、评分和简介。</li>
<li><code>span.title::text</code>：提取电影标题。</li>
<li><code>span.rating_num::text</code>：提取电影评分。</li>
<li><code>span.inq::text</code>：提取电影简介。</li>
</ul>
</li>
<li><strong>分页处理</strong>:<ul>
<li>使用 <code>span.next a::attr(href)</code> 提取下一页的链接。</li>
<li>如果存在下一页，使用 <code>response.follow</code> 继续爬取。</li>
</ul>
</li>
</ol>
<hr>
<h4 id="启动爬虫："><a href="#启动爬虫：" class="headerlink" title="启动爬虫："></a><strong>启动爬虫：</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl douban_spider -o myproject/douban_movies.csv</span><br></pre></td></tr></table></figure>

<ul>
<li><p>运行爬虫时通过 <code>-o</code> 和 <code>-O</code> 参数指定输出位置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 追加输出到文件</span></span><br><span class="line">scrapy crawl myspider -o output/mydata.json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 覆盖输出到文件</span></span><br><span class="line">scrapy crawl myspider -O output/mydata.json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定目录和文件名格式</span></span><br><span class="line">scrapy crawl myspider -o output/%(name)s_%(<span class="keyword">time</span>)s.json</span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h4 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a><a target="_blank" rel="noopener" href="https://www.runoob.com/python3/python-scrapy.html">常用方法</a></h4>
    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/blog2025.github.io/2025/05/28/Git%E5%91%BD%E4%BB%A4/" rel="prev" title="Git">
                  <i class="fa fa-angle-left"></i> Git
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/blog2025.github.io/2025/06/11/Rust/" rel="next" title="Rust">
                  Rust <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    
    <!-- 去除心形图案
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    -->
    <span class="post-meta-divider">|</span>

    <span class="author" itemprop="copyrightHolder">lsdyun</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

<!--隐藏网页底部powered by Hexo 强力驱动-->
<!--
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>
-->

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script>
<script src="/blog2025.github.io/js/comments.js"></script><script src="/blog2025.github.io/js/utils.js"></script><script src="/blog2025.github.io/js/motion.js"></script><script src="/blog2025.github.io/js/sidebar.js"></script><script src="/blog2025.github.io/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/blog2025.github.io/js/third-party/search/local-search.js"></script>




  <script src="/blog2025.github.io/js/third-party/fancybox.js"></script>

  <script src="/blog2025.github.io/js/third-party/pace.js"></script>


  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<script src="https://cdn.jsdelivr.net/npm/darkmode-js@1.5.7/lib/darkmode-js.min.js"></script>

<script>
var options = {
  bottom: '64px',
  right: 'unset',
  left: '32px',
  time: '0.5s',
  mixColor: 'transparent',
  backgroundColor: 'transparent',
  buttonColorDark: '#100f2c',
  buttonColorLight: '#fff',
  saveInCookies: true,
  label: '🌓',
  autoMatchOsTheme: true
}
const darkmode = new Darkmode(options);
window.darkmode = darkmode;
darkmode.showWidget();
</script>

</body>
</html>
